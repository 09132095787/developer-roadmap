import{j as e}from"./jsx-runtime.6940b965.js";import{r as l}from"./index.070054a4.js";import{i as u}from"./jwt.ab9b7b25.js";import{l as h}from"./navigation.9977dc3f.js";import{c as d}from"./createLucideIcon.3c9fdece.js";import{b as c}from"./team.f4809964.js";import{a as f}from"./http.387f5009.js";import{u as j}from"./use-toast.fb52de5d.js";import{u as g}from"./index.2d760e66.js";import{P as w}from"./plus.cedba9fe.js";import{U as N}from"./users.9673a18c.js";import{u as v}from"./use-outside-click.d7ce4a3d.js";import{C as b}from"./chevron-down.cc515fa2.js";import"./index.3e34842a.js";import"./index.a98c85f5.js";import"./toast.1fe7142d.js";const y=d("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),k=d("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);function C(r){const{setIsTeamsOpen:a}=r;return e.jsxs("ul",{children:[e.jsx("li",{className:"px-1",children:e.jsx("a",{href:"/account",className:"block rounded pl-4 pr-2 py-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:"Profile"})}),e.jsx("li",{className:"px-1",children:e.jsx("a",{href:"/account/friends",className:"block rounded pl-4 pr-2 py-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:"Friends"})}),e.jsx("li",{className:"px-1",children:e.jsxs("button",{className:"group flex w-full items-center justify-between rounded pl-4 pr-2 py-2 text-sm font-medium text-slate-100 hover:bg-slate-700",onClick:()=>a(!0),children:["Teams",e.jsx(k,{className:"h-4 w-4 shrink-0 stroke-[2.5px] text-slate-400 group-hover:text-white"})]})}),e.jsx("li",{className:"px-1",children:e.jsx("button",{className:"block w-full rounded pl-4 pr-2 py-2 text-left text-sm font-medium text-slate-100 hover:bg-slate-700",type:"button",onClick:h,children:"Logout"})})]})}function L(r){const{setIsTeamsOpen:a}=r,i=j(),o=g(c),[s,m]=l.useState(!0);async function x(){if(o.length>0)return;m(!0);const{response:t,error:n}=await f("https://api.roadmap.sh/v1-get-user-teams");if(n||!t){i.error(n?.message||"Something went wrong");return}c.set(t)}l.useEffect(()=>{x().finally(()=>m(!1))},[]);const p=s&&e.jsxs("div",{className:"mt-2 flex animate-pulse flex-col gap-1 px-1 text-center",children:[e.jsx("div",{className:"h-[35px] rounded-md bg-gray-700"}),e.jsx("div",{className:"h-[35px] rounded-md bg-gray-700"}),e.jsx("div",{className:"h-[35px] rounded-md bg-gray-700"})]});return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex items-center justify-between px-2",children:[e.jsx("button",{className:"mt-1 flex h-5 w-5 items-center justify-center rounded text-slate-400 hover:bg-slate-50/10 hover:text-slate-50",onClick:()=>a(!1),children:e.jsx(y,{className:"h-4 w-4 stroke-[2.5px]"})}),e.jsx("a",{className:"mt-1 flex h-5 w-5 items-center justify-center rounded text-slate-400 hover:bg-slate-50/10 hover:text-slate-50",href:"/team/new",children:e.jsx(w,{className:"h-4 w-4 stroke-[2.5px]"})})]}),p,!s&&e.jsxs("ul",{className:"mt-2",children:[o?.map(t=>{let n="";return t.status==="invited"?n=`/respond-invite?i=${t.memberId}`:t.status==="joined"&&(n=`/team/progress?t=${t._id}`),e.jsx("li",{className:"px-1",children:e.jsx("a",{href:n,className:"block truncate rounded px-4 py-2 text-sm font-medium text-slate-100 hover:bg-slate-700",children:t.name})},t._id)}),o.length===0&&!s&&e.jsx("li",{className:"mt-2 px-1 text-center",children:e.jsxs("p",{className:"block rounded px-4 py-2 text-sm font-medium text-slate-500",children:[e.jsx(N,{className:"mx-auto mb-2 h-7 w-7 text-slate-600"}),"No teams found."," ",e.jsx("a",{className:"font-medium text-slate-400 underline underline-offset-2 hover:text-slate-300",href:"/team/new",children:"Create a team"}),"."]})})]})]})}function B(){const r=l.useRef(null),[a,i]=l.useState(!1),[o,s]=l.useState(!1);return v(r,()=>{i(!1),s(!1)}),u()?e.jsxs("div",{className:"relative z-50 animate-fade-in",children:[e.jsxs("button",{className:"flex h-8 w-40 items-center justify-center gap-1.5 rounded-full bg-gradient-to-r from-purple-500 to-purple-700 px-4 py-2 text-sm font-medium text-white hover:from-purple-500 hover:to-purple-600",onClick:()=>{s(!1),i(!a)},children:[e.jsxs("span",{className:"inline-flex items-center",children:["Account ",e.jsx("span",{className:"text-gray-300",children:"/"})," Teams"]}),e.jsx(b,{className:"h-4 w-4 shrink-0 stroke-[2.5px]"})]}),a&&e.jsx("div",{ref:r,className:"absolute right-0 z-50 mt-2 min-h-[152px] w-48 rounded-md bg-slate-800 py-1 shadow-xl",children:o?e.jsx(L,{setIsTeamsOpen:s}):e.jsx(C,{setIsTeamsOpen:s})})]}):null}export{B as AccountDropdown};
