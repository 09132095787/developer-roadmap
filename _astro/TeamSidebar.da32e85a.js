import{j as e}from"./jsx-runtime.6940b965.js";import{TeamDropdown as N}from"./TeamDropdown.bf3efa73.js";import{C as k}from"./dropdown.e82bdca7.js";import{u as b}from"./use-team-id.9143090b.js";import{r as o}from"./index.070054a4.js";import{u as S}from"./index.2d760e66.js";import{b as C}from"./team.52a4929c.js";import{u as P}from"./use-outside-click.5adb83b9.js";import{u as T}from"./use-keydown.bb1f91bb.js";import{h as I}from"./http.3e3d4bea.js";import{C as F}from"./CheckIcon.1124cdab.js";import"./use-auth.93b31ecd.js";import"./jwt.5556697d.js";import"./Spinner.799b0955.js";import"./use-toast.dbd347db.js";import"./toast.5b8c89b6.js";import"./index.4b590221.js";import"./index.1c368e68.js";const $=new Proxy({src:"/_astro/team-progress.e60f2c93.svg",width:24,height:24,format:"svg"},{get(s,t,a){return t==="clone"?structuredClone(s):(globalThis.astroAsset.referencedImages.add(s.fsPath),s[t])}}),E=new Proxy({src:"/_astro/cog.f28a2108.svg",width:24,height:24,format:"svg"},{get(s,t,a){return t==="clone"?structuredClone(s):(globalThis.astroAsset.referencedImages.add(s.fsPath),s[t])}}),f=new Proxy({src:"/_astro/chat.919a576a.svg",width:24,height:24,format:"svg"},{get(s,t,a){return t==="clone"?structuredClone(s):(globalThis.astroAsset.referencedImages.add(s.fsPath),s[t])}}),A=new Proxy({src:"/_astro/map.ec2208d0.svg",width:24,height:24,format:"svg"},{get(s,t,a){return t==="clone"?structuredClone(s):(globalThis.astroAsset.referencedImages.add(s.fsPath),s[t])}}),g=new Proxy({src:"/_astro/group.47c51366.svg",width:24,height:24,format:"svg"},{get(s,t,a){return t==="clone"?structuredClone(s):(globalThis.astroAsset.referencedImages.add(s.fsPath),s[t])}});function _(s){const{onClose:t}=s,a=o.useRef(null),u=o.useRef(null),[d,m]=o.useState(!1),[n,l]=o.useState(""),[c,r]=o.useState(""),[i,w]=o.useState(!1),{teamId:j}=b();P(a,()=>{t()}),T("Escape",()=>{t()}),o.useEffect(()=>{u.current?.focus()},[]);const y=async x=>{x.preventDefault(),m(!0),l("");const{response:v,error:p}=await I(`https://api.roadmap.sh/v1-submit-team-feedback/${j}`,{feedback:c});if(p||!v){m(!1),l(p?.message||"Something went wrong");return}w(!0)},h=()=>{m(!1),l(""),r(""),t()};return e.jsx("div",{className:"fixed left-0 right-0 top-0 z-50 flex h-full items-center justify-center overflow-y-auto overflow-x-hidden bg-black/50",children:e.jsx("div",{className:"relative h-full w-full max-w-md p-4 md:h-auto",children:e.jsxs("div",{ref:a,className:"popup-body relative rounded-lg bg-white p-4 shadow",children:[!i&&e.jsxs(e.Fragment,{children:[e.jsx("h2",{className:"mb-1 text-xl font-semibold text-black",children:"Enter your feedback"}),e.jsx("p",{className:"text-sm text-gray-500",children:"Help us improve your experience."}),e.jsxs("form",{onSubmit:y,children:[e.jsxs("div",{className:"my-4",children:[e.jsx("textarea",{ref:u,name:"submit-feedback",id:"submit-feedback",className:"mt-2 block min-h-[150px] w-full resize-none rounded-md border border-gray-300 px-3 py-2 outline-none placeholder:text-gray-400",placeholder:"Enter your feedback",required:!0,autoFocus:!0,value:c,onInput:x=>r(x.target.value)}),n&&e.jsx("p",{className:"mt-2 rounded-md bg-red-100 p-2 text-red-700",children:n})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{type:"button",disabled:d,onClick:h,className:"flex-grow cursor-pointer rounded-md bg-gray-200 py-2 text-center",children:"Cancel"}),e.jsx("button",{disabled:d,type:"submit",className:"flex-grow cursor-pointer rounded-md bg-black py-2 text-white disabled:opacity-40",children:d?"Please wait ..":"Send"})]})]})]}),i&&e.jsxs("div",{className:"flex w-full flex-col items-center",children:[e.jsx(F,{additionalClasses:"w-14 h-14 text-green-500 mt-4"}),e.jsx("h1",{className:"mt-4 text-xl font-semibold text-black sm:text-2xl",children:"Feedback Submitted"}),e.jsx("p",{className:"text-center text-sm text-gray-500 sm:text-base",children:"Thank you for submitting your feedback."}),e.jsx("button",{type:"button",onClick:h,className:"mt-4 w-full flex-grow cursor-pointer rounded-lg bg-black py-2 text-center text-white disabled:opacity-40",children:"Close"})]})]})})})}function L({activePageId:s,children:t}){const[a,u]=o.useState(!1),d=S(C),[m,n]=o.useState(!1),{teamId:l}=b(),c=[{title:"Progress",href:`/team/progress?t=${l}`,id:"progress",icon:$.src},{title:"Roadmaps",href:`/team/roadmaps?t=${l}`,id:"roadmaps",icon:A.src,hasWarning:d?.roadmaps?.length===0},{title:"Members",href:`/team/members?t=${l}`,id:"members",icon:g.src},{title:"Settings",href:`/team/settings?t=${l}`,id:"settings",icon:E.src}];return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"relative mb-5 block border-b p-4 shadow-inner md:hidden",children:[e.jsxs("button",{className:"flex h-10 w-full items-center justify-between rounded-md border bg-white px-2 text-center text-sm font-medium text-gray-900",id:"settings-menu","aria-haspopup":"true","aria-expanded":"true",onClick:()=>u(!a),children:[c.find(r=>r.id===s)?.title,e.jsx("img",{alt:"menu",src:k.src,className:"h-4 w-4"})]}),a&&e.jsxs("ul",{id:"settings-menu-dropdown",className:"absolute left-0 right-0 z-50 mt-1 space-y-1.5 bg-white p-2 shadow-lg",children:[e.jsx("li",{children:e.jsxs("a",{href:"/team",className:`flex w-full items-center rounded px-3 py-1.5 text-sm text-slate-900 hover:bg-slate-200 ${s==="team"?"bg-slate-100":""}`,children:[e.jsx("img",{alt:"teams",src:g.src,className:"mr-2 h-4 w-4"}),"Personal Account / Teams"]})}),c.map(r=>{const i=s===r.id;return e.jsx("li",{children:e.jsxs("a",{href:r.href,className:`flex w-full items-center rounded px-3 py-1.5 text-sm text-slate-900 hover:bg-slate-200 ${i?"bg-slate-100":""}`,children:[e.jsx("img",{alt:"menu icon",src:r.icon,className:"mr-2 h-4 w-4"}),r.title]})},r.id)}),e.jsx("li",{children:e.jsxs("button",{className:"flex w-full items-center rounded px-3 py-1.5 text-sm text-slate-900 hover:bg-slate-200",onClick:()=>n(!0),children:[e.jsx("img",{alt:"menu icon",src:f.src,className:"mr-2 h-4 w-4"}),"Send Feedback"]})})]})]}),m&&e.jsx(_,{onClose:()=>{n(!1)}}),e.jsxs("div",{className:"container flex min-h-screen items-stretch",children:[e.jsxs("aside",{className:"hidden w-44 shrink-0 border-r border-slate-200 py-10 md:block",children:[e.jsx(N,{}),e.jsxs("nav",{children:[e.jsx("ul",{className:"space-y-1",children:c.map(r=>{const i=s===r.id;return e.jsx("li",{children:e.jsx("a",{href:r.href,className:`font-regular flex w-full items-center border-r-2 px-2 py-1.5 text-sm ${i?"border-r-black bg-gray-100 text-black":"border-r-transparent text-gray-500 hover:border-r-gray-300"}`,children:e.jsxs("span",{className:"flex flex-grow items-center justify-between",children:[e.jsxs("span",{className:"flex",children:[e.jsx("img",{alt:"menu icon",src:r.icon,className:"relative top-[2px] mr-2 h-4 w-4"}),r.title]}),r.hasWarning&&e.jsxs("span",{className:"relative mr-1 flex items-center",children:[e.jsx("span",{className:"relative rounded-full bg-red-200 p-1 text-xs"}),e.jsx("span",{className:"absolute bottom-0 left-0 right-0 top-0 animate-ping rounded-full bg-red-400 p-1 text-xs"})]})]})})},r.id)})}),e.jsxs("button",{className:"mr-3 mt-4 flex items-center justify-center rounded-md border p-2 text-sm text-gray-500 transition-colors hover:border-gray-300 hover:bg-gray-50 hover:text-black",onClick:()=>n(!0),children:[e.jsx("img",{alt:"feedback",src:f.src,className:"mr-2 h-4 w-4"}),"Send Feedback"]})]})]}),e.jsx("div",{className:"grow px-0 py-0 md:px-10 md:py-10",children:t})]})]})}export{L as TeamSidebar};
