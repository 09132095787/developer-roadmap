import{r as _,g as Ki,R as P}from"./index.070054a4.js";import"./index.5f60dc5b.js";function ht(t){if(typeof t=="string"||typeof t=="number")return""+t;let e="";if(Array.isArray(t))for(let n=0,o;n<t.length;n++)(o=ht(t[n]))!==""&&(e+=(e&&" ")+o);else for(let n in t)t[n]&&(e+=(e&&" ")+n);return e}var jo={exports:{}},tr={},er={exports:{}},nr={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ce=_;function qi(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Gi=typeof Object.is=="function"?Object.is:qi,Qi=ce.useState,Ji=ce.useEffect,ji=ce.useLayoutEffect,ts=ce.useDebugValue;function es(t,e){var n=e(),o=Qi({inst:{value:n,getSnapshot:e}}),r=o[0].inst,i=o[1];return ji(function(){r.value=n,r.getSnapshot=e,pn(r)&&i({inst:r})},[t,n,e]),Ji(function(){return pn(r)&&i({inst:r}),t(function(){pn(r)&&i({inst:r})})},[t]),ts(n),n}function pn(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Gi(t,n)}catch{return!0}}function ns(t,e){return e()}var os=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?ns:es;nr.useSyncExternalStore=ce.useSyncExternalStore!==void 0?ce.useSyncExternalStore:os;er.exports=nr;var rs=er.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var on=_,is=rs;function ss(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var as=typeof Object.is=="function"?Object.is:ss,cs=is.useSyncExternalStore,ls=on.useRef,us=on.useEffect,ds=on.useMemo,fs=on.useDebugValue;tr.useSyncExternalStoreWithSelector=function(t,e,n,o,r){var i=ls(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=ds(function(){function c(h){if(!u){if(u=!0,l=h,h=o(h),r!==void 0&&s.hasValue){var x=s.value;if(r(x,h))return d=x}return d=h}if(x=d,as(l,h))return x;var p=o(h);return r!==void 0&&r(x,p)?x:(l=h,d=p)}var u=!1,l,d,f=n===void 0?null:n;return[function(){return c(e())},f===null?void 0:function(){return c(f())}]},[e,n,o,r]);var a=cs(t,i[0],i[1]);return us(function(){s.hasValue=!0,s.value=a},[a]),fs(a),a};jo.exports=tr;var hs=jo.exports;const gs=Ki(hs),co=t=>{let e;const n=new Set,o=(c,u)=>{const l=typeof c=="function"?c(e):c;if(!Object.is(l,e)){const d=e;e=u??typeof l!="object"?l:Object.assign({},e,l),n.forEach(f=>f(e,d))}},r=()=>e,a={setState:o,getState:r,subscribe:c=>(n.add(c),()=>n.delete(c)),destroy:()=>{n.clear()}};return e=t(o,r,a),a},ps=t=>t?co(t):co,{useSyncExternalStoreWithSelector:ms}=gs;function or(t,e=t.getState,n){const o=ms(t.subscribe,t.getState,t.getServerState||t.getState,e,n);return _.useDebugValue(o),o}const lo=(t,e)=>{const n=ps(t),o=(r,i=e)=>or(n,r,i);return Object.assign(o,n),o},ys=(t,e)=>t?lo(t,e):lo;function ct(t,e){if(Object.is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;if(t instanceof Map&&e instanceof Map){if(t.size!==e.size)return!1;for(const[o,r]of t)if(!Object.is(r,e.get(o)))return!1;return!0}if(t instanceof Set&&e instanceof Set){if(t.size!==e.size)return!1;for(const o of t)if(!e.has(o))return!1;return!0}const n=Object.keys(t);if(n.length!==Object.keys(e).length)return!1;for(let o=0;o<n.length;o++)if(!Object.prototype.hasOwnProperty.call(e,n[o])||!Object.is(t[n[o]],e[n[o]]))return!1;return!0}var xs={value:()=>{}};function rn(){for(var t=0,e=arguments.length,n={},o;t<e;++t){if(!(o=arguments[t]+"")||o in n||/[\s.]/.test(o))throw new Error("illegal type: "+o);n[o]=[]}return new Fe(n)}function Fe(t){this._=t}function ws(t,e){return t.trim().split(/^|\s+/).map(function(n){var o="",r=n.indexOf(".");if(r>=0&&(o=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:o}})}Fe.prototype=rn.prototype={constructor:Fe,on:function(t,e){var n=this._,o=ws(t+"",n),r,i=-1,s=o.length;if(arguments.length<2){for(;++i<s;)if((r=(t=o[i]).type)&&(r=bs(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++i<s;)if(r=(t=o[i]).type)n[r]=uo(n[r],t.name,e);else if(e==null)for(r in n)n[r]=uo(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Fe(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),o=0,r,i;o<r;++o)n[o]=arguments[o+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(i=this._[t],o=0,r=i.length;o<r;++o)i[o].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var o=this._[t],r=0,i=o.length;r<i;++r)o[r].value.apply(e,n)}};function bs(t,e){for(var n=0,o=t.length,r;n<o;++n)if((r=t[n]).name===e)return r.value}function uo(t,e,n){for(var o=0,r=t.length;o<r;++o)if(t[o].name===e){t[o]=xs,t=t.slice(0,o).concat(t.slice(o+1));break}return n!=null&&t.push({name:e,value:n}),t}var kn="http://www.w3.org/1999/xhtml";const fo={svg:"http://www.w3.org/2000/svg",xhtml:kn,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function sn(t){var e=t+="",n=e.indexOf(":");return n>=0&&(e=t.slice(0,n))!=="xmlns"&&(t=t.slice(n+1)),fo.hasOwnProperty(e)?{space:fo[e],local:t}:t}function Ss(t){return function(){var e=this.ownerDocument,n=this.namespaceURI;return n===kn&&e.documentElement.namespaceURI===kn?e.createElement(t):e.createElementNS(n,t)}}function Es(t){return function(){return this.ownerDocument.createElementNS(t.space,t.local)}}function rr(t){var e=sn(t);return(e.local?Es:Ss)(e)}function vs(){}function Ln(t){return t==null?vs:function(){return this.querySelector(t)}}function _s(t){typeof t!="function"&&(t=Ln(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var i=e[r],s=i.length,a=o[r]=new Array(s),c,u,l=0;l<s;++l)(c=i[l])&&(u=t.call(c,c.__data__,l,i))&&("__data__"in c&&(u.__data__=c.__data__),a[l]=u);return new ut(o,this._parents)}function Ns(t){return t==null?[]:Array.isArray(t)?t:Array.from(t)}function ks(){return[]}function ir(t){return t==null?ks:function(){return this.querySelectorAll(t)}}function Cs(t){return function(){return Ns(t.apply(this,arguments))}}function Ms(t){typeof t=="function"?t=Cs(t):t=ir(t);for(var e=this._groups,n=e.length,o=[],r=[],i=0;i<n;++i)for(var s=e[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&(o.push(t.call(c,c.__data__,u,s)),r.push(c));return new ut(o,r)}function sr(t){return function(){return this.matches(t)}}function ar(t){return function(e){return e.matches(t)}}var As=Array.prototype.find;function $s(t){return function(){return As.call(this.children,t)}}function Ts(){return this.firstElementChild}function Ps(t){return this.select(t==null?Ts:$s(typeof t=="function"?t:ar(t)))}var Ds=Array.prototype.filter;function Rs(){return Array.from(this.children)}function Is(t){return function(){return Ds.call(this.children,t)}}function zs(t){return this.selectAll(t==null?Rs:Is(typeof t=="function"?t:ar(t)))}function Hs(t){typeof t!="function"&&(t=sr(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var i=e[r],s=i.length,a=o[r]=[],c,u=0;u<s;++u)(c=i[u])&&t.call(c,c.__data__,u,i)&&a.push(c);return new ut(o,this._parents)}function cr(t){return new Array(t.length)}function Os(){return new ut(this._enter||this._groups.map(cr),this._parents)}function We(t,e){this.ownerDocument=t.ownerDocument,this.namespaceURI=t.namespaceURI,this._next=null,this._parent=t,this.__data__=e}We.prototype={constructor:We,appendChild:function(t){return this._parent.insertBefore(t,this._next)},insertBefore:function(t,e){return this._parent.insertBefore(t,e)},querySelector:function(t){return this._parent.querySelector(t)},querySelectorAll:function(t){return this._parent.querySelectorAll(t)}};function Bs(t){return function(){return t}}function Ls(t,e,n,o,r,i){for(var s=0,a,c=e.length,u=i.length;s<u;++s)(a=e[s])?(a.__data__=i[s],o[s]=a):n[s]=new We(t,i[s]);for(;s<c;++s)(a=e[s])&&(r[s]=a)}function Vs(t,e,n,o,r,i,s){var a,c,u=new Map,l=e.length,d=i.length,f=new Array(l),h;for(a=0;a<l;++a)(c=e[a])&&(f[a]=h=s.call(c,c.__data__,a,e)+"",u.has(h)?r[a]=c:u.set(h,c));for(a=0;a<d;++a)h=s.call(t,i[a],a,i)+"",(c=u.get(h))?(o[a]=c,c.__data__=i[a],u.delete(h)):n[a]=new We(t,i[a]);for(a=0;a<l;++a)(c=e[a])&&u.get(f[a])===c&&(r[a]=c)}function Fs(t){return t.__data__}function Xs(t,e){if(!arguments.length)return Array.from(this,Fs);var n=e?Vs:Ls,o=this._parents,r=this._groups;typeof t!="function"&&(t=Bs(t));for(var i=r.length,s=new Array(i),a=new Array(i),c=new Array(i),u=0;u<i;++u){var l=o[u],d=r[u],f=d.length,h=Ys(t.call(l,l&&l.__data__,u,o)),x=h.length,p=a[u]=new Array(x),S=s[u]=new Array(x),m=c[u]=new Array(f);n(l,d,p,S,m,h,e);for(var N=0,C=0,y,$;N<x;++N)if(y=p[N]){for(N>=C&&(C=N+1);!($=S[C])&&++C<x;);y._next=$||null}}return s=new ut(s,o),s._enter=a,s._exit=c,s}function Ys(t){return typeof t=="object"&&"length"in t?t:Array.from(t)}function Us(){return new ut(this._exit||this._groups.map(cr),this._parents)}function Ws(t,e,n){var o=this.enter(),r=this,i=this.exit();return typeof t=="function"?(o=t(o),o&&(o=o.selection())):o=o.append(t+""),e!=null&&(r=e(r),r&&(r=r.selection())),n==null?i.remove():n(i),o&&r?o.merge(r).order():r}function Zs(t){for(var e=t.selection?t.selection():t,n=this._groups,o=e._groups,r=n.length,i=o.length,s=Math.min(r,i),a=new Array(r),c=0;c<s;++c)for(var u=n[c],l=o[c],d=u.length,f=a[c]=new Array(d),h,x=0;x<d;++x)(h=u[x]||l[x])&&(f[x]=h);for(;c<r;++c)a[c]=n[c];return new ut(a,this._parents)}function Ks(){for(var t=this._groups,e=-1,n=t.length;++e<n;)for(var o=t[e],r=o.length-1,i=o[r],s;--r>=0;)(s=o[r])&&(i&&s.compareDocumentPosition(i)^4&&i.parentNode.insertBefore(s,i),i=s);return this}function qs(t){t||(t=Gs);function e(d,f){return d&&f?t(d.__data__,f.__data__):!d-!f}for(var n=this._groups,o=n.length,r=new Array(o),i=0;i<o;++i){for(var s=n[i],a=s.length,c=r[i]=new Array(a),u,l=0;l<a;++l)(u=s[l])&&(c[l]=u);c.sort(e)}return new ut(r,this._parents).order()}function Gs(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function Qs(){var t=arguments[0];return arguments[0]=this,t.apply(null,arguments),this}function Js(){return Array.from(this)}function js(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o=t[e],r=0,i=o.length;r<i;++r){var s=o[r];if(s)return s}return null}function ta(){let t=0;for(const e of this)++t;return t}function ea(){return!this.node()}function na(t){for(var e=this._groups,n=0,o=e.length;n<o;++n)for(var r=e[n],i=0,s=r.length,a;i<s;++i)(a=r[i])&&t.call(a,a.__data__,i,r);return this}function oa(t){return function(){this.removeAttribute(t)}}function ra(t){return function(){this.removeAttributeNS(t.space,t.local)}}function ia(t,e){return function(){this.setAttribute(t,e)}}function sa(t,e){return function(){this.setAttributeNS(t.space,t.local,e)}}function aa(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttribute(t):this.setAttribute(t,n)}}function ca(t,e){return function(){var n=e.apply(this,arguments);n==null?this.removeAttributeNS(t.space,t.local):this.setAttributeNS(t.space,t.local,n)}}function la(t,e){var n=sn(t);if(arguments.length<2){var o=this.node();return n.local?o.getAttributeNS(n.space,n.local):o.getAttribute(n)}return this.each((e==null?n.local?ra:oa:typeof e=="function"?n.local?ca:aa:n.local?sa:ia)(n,e))}function lr(t){return t.ownerDocument&&t.ownerDocument.defaultView||t.document&&t||t.defaultView}function ua(t){return function(){this.style.removeProperty(t)}}function da(t,e,n){return function(){this.style.setProperty(t,e,n)}}function fa(t,e,n){return function(){var o=e.apply(this,arguments);o==null?this.style.removeProperty(t):this.style.setProperty(t,o,n)}}function ha(t,e,n){return arguments.length>1?this.each((e==null?ua:typeof e=="function"?fa:da)(t,e,n??"")):le(this.node(),t)}function le(t,e){return t.style.getPropertyValue(e)||lr(t).getComputedStyle(t,null).getPropertyValue(e)}function ga(t){return function(){delete this[t]}}function pa(t,e){return function(){this[t]=e}}function ma(t,e){return function(){var n=e.apply(this,arguments);n==null?delete this[t]:this[t]=n}}function ya(t,e){return arguments.length>1?this.each((e==null?ga:typeof e=="function"?ma:pa)(t,e)):this.node()[t]}function ur(t){return t.trim().split(/^|\s+/)}function Vn(t){return t.classList||new dr(t)}function dr(t){this._node=t,this._names=ur(t.getAttribute("class")||"")}dr.prototype={add:function(t){var e=this._names.indexOf(t);e<0&&(this._names.push(t),this._node.setAttribute("class",this._names.join(" ")))},remove:function(t){var e=this._names.indexOf(t);e>=0&&(this._names.splice(e,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(t){return this._names.indexOf(t)>=0}};function fr(t,e){for(var n=Vn(t),o=-1,r=e.length;++o<r;)n.add(e[o])}function hr(t,e){for(var n=Vn(t),o=-1,r=e.length;++o<r;)n.remove(e[o])}function xa(t){return function(){fr(this,t)}}function wa(t){return function(){hr(this,t)}}function ba(t,e){return function(){(e.apply(this,arguments)?fr:hr)(this,t)}}function Sa(t,e){var n=ur(t+"");if(arguments.length<2){for(var o=Vn(this.node()),r=-1,i=n.length;++r<i;)if(!o.contains(n[r]))return!1;return!0}return this.each((typeof e=="function"?ba:e?xa:wa)(n,e))}function Ea(){this.textContent=""}function va(t){return function(){this.textContent=t}}function _a(t){return function(){var e=t.apply(this,arguments);this.textContent=e??""}}function Na(t){return arguments.length?this.each(t==null?Ea:(typeof t=="function"?_a:va)(t)):this.node().textContent}function ka(){this.innerHTML=""}function Ca(t){return function(){this.innerHTML=t}}function Ma(t){return function(){var e=t.apply(this,arguments);this.innerHTML=e??""}}function Aa(t){return arguments.length?this.each(t==null?ka:(typeof t=="function"?Ma:Ca)(t)):this.node().innerHTML}function $a(){this.nextSibling&&this.parentNode.appendChild(this)}function Ta(){return this.each($a)}function Pa(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Da(){return this.each(Pa)}function Ra(t){var e=typeof t=="function"?t:rr(t);return this.select(function(){return this.appendChild(e.apply(this,arguments))})}function Ia(){return null}function za(t,e){var n=typeof t=="function"?t:rr(t),o=e==null?Ia:typeof e=="function"?e:Ln(e);return this.select(function(){return this.insertBefore(n.apply(this,arguments),o.apply(this,arguments)||null)})}function Ha(){var t=this.parentNode;t&&t.removeChild(this)}function Oa(){return this.each(Ha)}function Ba(){var t=this.cloneNode(!1),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function La(){var t=this.cloneNode(!0),e=this.parentNode;return e?e.insertBefore(t,this.nextSibling):t}function Va(t){return this.select(t?La:Ba)}function Fa(t){return arguments.length?this.property("__data__",t):this.node().__data__}function Xa(t){return function(e){t.call(this,e,this.__data__)}}function Ya(t){return t.trim().split(/^|\s+/).map(function(e){var n="",o=e.indexOf(".");return o>=0&&(n=e.slice(o+1),e=e.slice(0,o)),{type:e,name:n}})}function Ua(t){return function(){var e=this.__on;if(e){for(var n=0,o=-1,r=e.length,i;n<r;++n)i=e[n],(!t.type||i.type===t.type)&&i.name===t.name?this.removeEventListener(i.type,i.listener,i.options):e[++o]=i;++o?e.length=o:delete this.__on}}}function Wa(t,e,n){return function(){var o=this.__on,r,i=Xa(e);if(o){for(var s=0,a=o.length;s<a;++s)if((r=o[s]).type===t.type&&r.name===t.name){this.removeEventListener(r.type,r.listener,r.options),this.addEventListener(r.type,r.listener=i,r.options=n),r.value=e;return}}this.addEventListener(t.type,i,n),r={type:t.type,name:t.name,value:e,listener:i,options:n},o?o.push(r):this.__on=[r]}}function Za(t,e,n){var o=Ya(t+""),r,i=o.length,s;if(arguments.length<2){var a=this.node().__on;if(a){for(var c=0,u=a.length,l;c<u;++c)for(r=0,l=a[c];r<i;++r)if((s=o[r]).type===l.type&&s.name===l.name)return l.value}return}for(a=e?Wa:Ua,r=0;r<i;++r)this.each(a(o[r],e,n));return this}function gr(t,e,n){var o=lr(t),r=o.CustomEvent;typeof r=="function"?r=new r(e,n):(r=o.document.createEvent("Event"),n?(r.initEvent(e,n.bubbles,n.cancelable),r.detail=n.detail):r.initEvent(e,!1,!1)),t.dispatchEvent(r)}function Ka(t,e){return function(){return gr(this,t,e)}}function qa(t,e){return function(){return gr(this,t,e.apply(this,arguments))}}function Ga(t,e){return this.each((typeof e=="function"?qa:Ka)(t,e))}function*Qa(){for(var t=this._groups,e=0,n=t.length;e<n;++e)for(var o=t[e],r=0,i=o.length,s;r<i;++r)(s=o[r])&&(yield s)}var pr=[null];function ut(t,e){this._groups=t,this._parents=e}function $e(){return new ut([[document.documentElement]],pr)}function Ja(){return this}ut.prototype=$e.prototype={constructor:ut,select:_s,selectAll:Ms,selectChild:Ps,selectChildren:zs,filter:Hs,data:Xs,enter:Os,exit:Us,join:Ws,merge:Zs,selection:Ja,order:Ks,sort:qs,call:Qs,nodes:Js,node:js,size:ta,empty:ea,each:na,attr:la,style:ha,property:ya,classed:Sa,text:Na,html:Aa,raise:Ta,lower:Da,append:Ra,insert:za,remove:Oa,clone:Va,datum:Fa,on:Za,dispatch:Ga,[Symbol.iterator]:Qa};function pt(t){return typeof t=="string"?new ut([[document.querySelector(t)]],[document.documentElement]):new ut([[t]],pr)}function ja(t){let e;for(;e=t.sourceEvent;)t=e;return t}function bt(t,e){if(t=ja(t),e===void 0&&(e=t.currentTarget),e){var n=e.ownerSVGElement||e;if(n.createSVGPoint){var o=n.createSVGPoint();return o.x=t.clientX,o.y=t.clientY,o=o.matrixTransform(e.getScreenCTM().inverse()),[o.x,o.y]}if(e.getBoundingClientRect){var r=e.getBoundingClientRect();return[t.clientX-r.left-e.clientLeft,t.clientY-r.top-e.clientTop]}}return[t.pageX,t.pageY]}const tc={passive:!1},Ee={capture:!0,passive:!1};function mn(t){t.stopImmediatePropagation()}function re(t){t.preventDefault(),t.stopImmediatePropagation()}function mr(t){var e=t.document.documentElement,n=pt(t).on("dragstart.drag",re,Ee);"onselectstart"in e?n.on("selectstart.drag",re,Ee):(e.__noselect=e.style.MozUserSelect,e.style.MozUserSelect="none")}function yr(t,e){var n=t.document.documentElement,o=pt(t).on("dragstart.drag",null);e&&(o.on("click.drag",re,Ee),setTimeout(function(){o.on("click.drag",null)},0)),"onselectstart"in n?o.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const De=t=>()=>t;function Cn(t,{sourceEvent:e,subject:n,target:o,identifier:r,active:i,x:s,y:a,dx:c,dy:u,dispatch:l}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:o,enumerable:!0,configurable:!0},identifier:{value:r,enumerable:!0,configurable:!0},active:{value:i,enumerable:!0,configurable:!0},x:{value:s,enumerable:!0,configurable:!0},y:{value:a,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:u,enumerable:!0,configurable:!0},_:{value:l}})}Cn.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t};function ec(t){return!t.ctrlKey&&!t.button}function nc(){return this.parentNode}function oc(t,e){return e??{x:t.x,y:t.y}}function rc(){return navigator.maxTouchPoints||"ontouchstart"in this}function ic(){var t=ec,e=nc,n=oc,o=rc,r={},i=rn("start","drag","end"),s=0,a,c,u,l,d=0;function f(y){y.on("mousedown.drag",h).filter(o).on("touchstart.drag",S).on("touchmove.drag",m,tc).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function h(y,$){if(!(l||!t.call(this,y,$))){var T=C(this,e.call(this,y,$),y,$,"mouse");T&&(pt(y.view).on("mousemove.drag",x,Ee).on("mouseup.drag",p,Ee),mr(y.view),mn(y),u=!1,a=y.clientX,c=y.clientY,T("start",y))}}function x(y){if(re(y),!u){var $=y.clientX-a,T=y.clientY-c;u=$*$+T*T>d}r.mouse("drag",y)}function p(y){pt(y.view).on("mousemove.drag mouseup.drag",null),yr(y.view,u),re(y),r.mouse("end",y)}function S(y,$){if(t.call(this,y,$)){var T=y.changedTouches,z=e.call(this,y,$),R=T.length,I,O;for(I=0;I<R;++I)(O=C(this,z,y,$,T[I].identifier,T[I]))&&(mn(y),O("start",y,T[I]))}}function m(y){var $=y.changedTouches,T=$.length,z,R;for(z=0;z<T;++z)(R=r[$[z].identifier])&&(re(y),R("drag",y,$[z]))}function N(y){var $=y.changedTouches,T=$.length,z,R;for(l&&clearTimeout(l),l=setTimeout(function(){l=null},500),z=0;z<T;++z)(R=r[$[z].identifier])&&(mn(y),R("end",y,$[z]))}function C(y,$,T,z,R,I){var O=i.copy(),H=bt(I||T,$),B,E,g;if((g=n.call(y,new Cn("beforestart",{sourceEvent:T,target:f,identifier:R,active:s,x:H[0],y:H[1],dx:0,dy:0,dispatch:O}),z))!=null)return B=g.x-H[0]||0,E=g.y-H[1]||0,function v(b,M,D){var w=H,k;switch(b){case"start":r[R]=v,k=s++;break;case"end":delete r[R],--s;case"drag":H=bt(D||M,$),k=s;break}O.call(b,y,new Cn(b,{sourceEvent:M,subject:g,target:f,identifier:R,active:k,x:H[0]+B,y:H[1]+E,dx:H[0]-w[0],dy:H[1]-w[1],dispatch:O}),z)}}return f.filter=function(y){return arguments.length?(t=typeof y=="function"?y:De(!!y),f):t},f.container=function(y){return arguments.length?(e=typeof y=="function"?y:De(y),f):e},f.subject=function(y){return arguments.length?(n=typeof y=="function"?y:De(y),f):n},f.touchable=function(y){return arguments.length?(o=typeof y=="function"?y:De(!!y),f):o},f.on=function(){var y=i.on.apply(i,arguments);return y===i?f:y},f.clickDistance=function(y){return arguments.length?(d=(y=+y)*y,f):Math.sqrt(d)},f}function Fn(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function xr(t,e){var n=Object.create(t.prototype);for(var o in e)n[o]=e[o];return n}function Te(){}var ve=.7,Ze=1/ve,ie="\\s*([+-]?\\d+)\\s*",_e="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",St="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",sc=/^#([0-9a-f]{3,8})$/,ac=new RegExp(`^rgb\\(${ie},${ie},${ie}\\)$`),cc=new RegExp(`^rgb\\(${St},${St},${St}\\)$`),lc=new RegExp(`^rgba\\(${ie},${ie},${ie},${_e}\\)$`),uc=new RegExp(`^rgba\\(${St},${St},${St},${_e}\\)$`),dc=new RegExp(`^hsl\\(${_e},${St},${St}\\)$`),fc=new RegExp(`^hsla\\(${_e},${St},${St},${_e}\\)$`),ho={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Fn(Te,Ne,{copy(t){return Object.assign(new this.constructor,this,t)},displayable(){return this.rgb().displayable()},hex:go,formatHex:go,formatHex8:hc,formatHsl:gc,formatRgb:po,toString:po});function go(){return this.rgb().formatHex()}function hc(){return this.rgb().formatHex8()}function gc(){return wr(this).formatHsl()}function po(){return this.rgb().formatRgb()}function Ne(t){var e,n;return t=(t+"").trim().toLowerCase(),(e=sc.exec(t))?(n=e[1].length,e=parseInt(e[1],16),n===6?mo(e):n===3?new at(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):n===8?Re(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):n===4?Re(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=ac.exec(t))?new at(e[1],e[2],e[3],1):(e=cc.exec(t))?new at(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=lc.exec(t))?Re(e[1],e[2],e[3],e[4]):(e=uc.exec(t))?Re(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=dc.exec(t))?wo(e[1],e[2]/100,e[3]/100,1):(e=fc.exec(t))?wo(e[1],e[2]/100,e[3]/100,e[4]):ho.hasOwnProperty(t)?mo(ho[t]):t==="transparent"?new at(NaN,NaN,NaN,0):null}function mo(t){return new at(t>>16&255,t>>8&255,t&255,1)}function Re(t,e,n,o){return o<=0&&(t=e=n=NaN),new at(t,e,n,o)}function pc(t){return t instanceof Te||(t=Ne(t)),t?(t=t.rgb(),new at(t.r,t.g,t.b,t.opacity)):new at}function Mn(t,e,n,o){return arguments.length===1?pc(t):new at(t,e,n,o??1)}function at(t,e,n,o){this.r=+t,this.g=+e,this.b=+n,this.opacity=+o}Fn(at,Mn,xr(Te,{brighter(t){return t=t==null?Ze:Math.pow(Ze,t),new at(this.r*t,this.g*t,this.b*t,this.opacity)},darker(t){return t=t==null?ve:Math.pow(ve,t),new at(this.r*t,this.g*t,this.b*t,this.opacity)},rgb(){return this},clamp(){return new at(Wt(this.r),Wt(this.g),Wt(this.b),Ke(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:yo,formatHex:yo,formatHex8:mc,formatRgb:xo,toString:xo}));function yo(){return`#${Yt(this.r)}${Yt(this.g)}${Yt(this.b)}`}function mc(){return`#${Yt(this.r)}${Yt(this.g)}${Yt(this.b)}${Yt((isNaN(this.opacity)?1:this.opacity)*255)}`}function xo(){const t=Ke(this.opacity);return`${t===1?"rgb(":"rgba("}${Wt(this.r)}, ${Wt(this.g)}, ${Wt(this.b)}${t===1?")":`, ${t})`}`}function Ke(t){return isNaN(t)?1:Math.max(0,Math.min(1,t))}function Wt(t){return Math.max(0,Math.min(255,Math.round(t)||0))}function Yt(t){return t=Wt(t),(t<16?"0":"")+t.toString(16)}function wo(t,e,n,o){return o<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new mt(t,e,n,o)}function wr(t){if(t instanceof mt)return new mt(t.h,t.s,t.l,t.opacity);if(t instanceof Te||(t=Ne(t)),!t)return new mt;if(t instanceof mt)return t;t=t.rgb();var e=t.r/255,n=t.g/255,o=t.b/255,r=Math.min(e,n,o),i=Math.max(e,n,o),s=NaN,a=i-r,c=(i+r)/2;return a?(e===i?s=(n-o)/a+(n<o)*6:n===i?s=(o-e)/a+2:s=(e-n)/a+4,a/=c<.5?i+r:2-i-r,s*=60):a=c>0&&c<1?0:s,new mt(s,a,c,t.opacity)}function yc(t,e,n,o){return arguments.length===1?wr(t):new mt(t,e,n,o??1)}function mt(t,e,n,o){this.h=+t,this.s=+e,this.l=+n,this.opacity=+o}Fn(mt,yc,xr(Te,{brighter(t){return t=t==null?Ze:Math.pow(Ze,t),new mt(this.h,this.s,this.l*t,this.opacity)},darker(t){return t=t==null?ve:Math.pow(ve,t),new mt(this.h,this.s,this.l*t,this.opacity)},rgb(){var t=this.h%360+(this.h<0)*360,e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,o=n+(n<.5?n:1-n)*e,r=2*n-o;return new at(yn(t>=240?t-240:t+120,r,o),yn(t,r,o),yn(t<120?t+240:t-120,r,o),this.opacity)},clamp(){return new mt(bo(this.h),Ie(this.s),Ie(this.l),Ke(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const t=Ke(this.opacity);return`${t===1?"hsl(":"hsla("}${bo(this.h)}, ${Ie(this.s)*100}%, ${Ie(this.l)*100}%${t===1?")":`, ${t})`}`}}));function bo(t){return t=(t||0)%360,t<0?t+360:t}function Ie(t){return Math.max(0,Math.min(1,t||0))}function yn(t,e,n){return(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)*255}const br=t=>()=>t;function xc(t,e){return function(n){return t+n*e}}function wc(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(o){return Math.pow(t+o*e,n)}}function bc(t){return(t=+t)==1?Sr:function(e,n){return n-e?wc(e,n,t):br(isNaN(e)?n:e)}}function Sr(t,e){var n=e-t;return n?xc(t,n):br(isNaN(t)?e:t)}const So=function t(e){var n=bc(e);function o(r,i){var s=n((r=Mn(r)).r,(i=Mn(i)).r),a=n(r.g,i.g),c=n(r.b,i.b),u=Sr(r.opacity,i.opacity);return function(l){return r.r=s(l),r.g=a(l),r.b=c(l),r.opacity=u(l),r+""}}return o.gamma=t,o}(1);function $t(t,e){return t=+t,e=+e,function(n){return t*(1-n)+e*n}}var An=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,xn=new RegExp(An.source,"g");function Sc(t){return function(){return t}}function Ec(t){return function(e){return t(e)+""}}function vc(t,e){var n=An.lastIndex=xn.lastIndex=0,o,r,i,s=-1,a=[],c=[];for(t=t+"",e=e+"";(o=An.exec(t))&&(r=xn.exec(e));)(i=r.index)>n&&(i=e.slice(n,i),a[s]?a[s]+=i:a[++s]=i),(o=o[0])===(r=r[0])?a[s]?a[s]+=r:a[++s]=r:(a[++s]=null,c.push({i:s,x:$t(o,r)})),n=xn.lastIndex;return n<e.length&&(i=e.slice(n),a[s]?a[s]+=i:a[++s]=i),a.length<2?c[0]?Ec(c[0].x):Sc(e):(e=c.length,function(u){for(var l=0,d;l<e;++l)a[(d=c[l]).i]=d.x(u);return a.join("")})}var Eo=180/Math.PI,$n={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function Er(t,e,n,o,r,i){var s,a,c;return(s=Math.sqrt(t*t+e*e))&&(t/=s,e/=s),(c=t*n+e*o)&&(n-=t*c,o-=e*c),(a=Math.sqrt(n*n+o*o))&&(n/=a,o/=a,c/=a),t*o<e*n&&(t=-t,e=-e,c=-c,s=-s),{translateX:r,translateY:i,rotate:Math.atan2(e,t)*Eo,skewX:Math.atan(c)*Eo,scaleX:s,scaleY:a}}var ze;function _c(t){const e=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(t+"");return e.isIdentity?$n:Er(e.a,e.b,e.c,e.d,e.e,e.f)}function Nc(t){return t==null||(ze||(ze=document.createElementNS("http://www.w3.org/2000/svg","g")),ze.setAttribute("transform",t),!(t=ze.transform.baseVal.consolidate()))?$n:(t=t.matrix,Er(t.a,t.b,t.c,t.d,t.e,t.f))}function vr(t,e,n,o){function r(u){return u.length?u.pop()+" ":""}function i(u,l,d,f,h,x){if(u!==d||l!==f){var p=h.push("translate(",null,e,null,n);x.push({i:p-4,x:$t(u,d)},{i:p-2,x:$t(l,f)})}else(d||f)&&h.push("translate("+d+e+f+n)}function s(u,l,d,f){u!==l?(u-l>180?l+=360:l-u>180&&(u+=360),f.push({i:d.push(r(d)+"rotate(",null,o)-2,x:$t(u,l)})):l&&d.push(r(d)+"rotate("+l+o)}function a(u,l,d,f){u!==l?f.push({i:d.push(r(d)+"skewX(",null,o)-2,x:$t(u,l)}):l&&d.push(r(d)+"skewX("+l+o)}function c(u,l,d,f,h,x){if(u!==d||l!==f){var p=h.push(r(h)+"scale(",null,",",null,")");x.push({i:p-4,x:$t(u,d)},{i:p-2,x:$t(l,f)})}else(d!==1||f!==1)&&h.push(r(h)+"scale("+d+","+f+")")}return function(u,l){var d=[],f=[];return u=t(u),l=t(l),i(u.translateX,u.translateY,l.translateX,l.translateY,d,f),s(u.rotate,l.rotate,d,f),a(u.skewX,l.skewX,d,f),c(u.scaleX,u.scaleY,l.scaleX,l.scaleY,d,f),u=l=null,function(h){for(var x=-1,p=f.length,S;++x<p;)d[(S=f[x]).i]=S.x(h);return d.join("")}}}var kc=vr(_c,"px, ","px)","deg)"),Cc=vr(Nc,", ",")",")"),Mc=1e-12;function vo(t){return((t=Math.exp(t))+1/t)/2}function Ac(t){return((t=Math.exp(t))-1/t)/2}function $c(t){return((t=Math.exp(2*t))-1)/(t+1)}const Tc=function t(e,n,o){function r(i,s){var a=i[0],c=i[1],u=i[2],l=s[0],d=s[1],f=s[2],h=l-a,x=d-c,p=h*h+x*x,S,m;if(p<Mc)m=Math.log(f/u)/e,S=function(z){return[a+z*h,c+z*x,u*Math.exp(e*z*m)]};else{var N=Math.sqrt(p),C=(f*f-u*u+o*p)/(2*u*n*N),y=(f*f-u*u-o*p)/(2*f*n*N),$=Math.log(Math.sqrt(C*C+1)-C),T=Math.log(Math.sqrt(y*y+1)-y);m=(T-$)/e,S=function(z){var R=z*m,I=vo($),O=u/(n*N)*(I*$c(e*R+$)-Ac($));return[a+O*h,c+O*x,u*I/vo(e*R+$)]}}return S.duration=m*1e3*e/Math.SQRT2,S}return r.rho=function(i){var s=Math.max(.001,+i),a=s*s,c=a*a;return t(s,a,c)},r}(Math.SQRT2,2,4);var ue=0,be=0,pe=0,_r=1e3,qe,Se,Ge=0,Zt=0,an=0,ke=typeof performance=="object"&&performance.now?performance:Date,Nr=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function Xn(){return Zt||(Nr(Pc),Zt=ke.now()+an)}function Pc(){Zt=0}function Qe(){this._call=this._time=this._next=null}Qe.prototype=kr.prototype={constructor:Qe,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?Xn():+n)+(e==null?0:+e),!this._next&&Se!==this&&(Se?Se._next=this:qe=this,Se=this),this._call=t,this._time=n,Tn()},stop:function(){this._call&&(this._call=null,this._time=1/0,Tn())}};function kr(t,e,n){var o=new Qe;return o.restart(t,e,n),o}function Dc(){Xn(),++ue;for(var t=qe,e;t;)(e=Zt-t._time)>=0&&t._call.call(void 0,e),t=t._next;--ue}function _o(){Zt=(Ge=ke.now())+an,ue=be=0;try{Dc()}finally{ue=0,Ic(),Zt=0}}function Rc(){var t=ke.now(),e=t-Ge;e>_r&&(an-=e,Ge=t)}function Ic(){for(var t,e=qe,n,o=1/0;e;)e._call?(o>e._time&&(o=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:qe=n);Se=t,Tn(o)}function Tn(t){if(!ue){be&&(be=clearTimeout(be));var e=t-Zt;e>24?(t<1/0&&(be=setTimeout(_o,t-ke.now()-an)),pe&&(pe=clearInterval(pe))):(pe||(Ge=ke.now(),pe=setInterval(Rc,_r)),ue=1,Nr(_o))}}function No(t,e,n){var o=new Qe;return e=e==null?0:+e,o.restart(r=>{o.stop(),t(r+e)},e,n),o}var zc=rn("start","end","cancel","interrupt"),Hc=[],Cr=0,ko=1,Pn=2,Xe=3,Co=4,Dn=5,Ye=6;function cn(t,e,n,o,r,i){var s=t.__transition;if(!s)t.__transition={};else if(n in s)return;Oc(t,n,{name:e,index:o,group:r,on:zc,tween:Hc,time:i.time,delay:i.delay,duration:i.duration,ease:i.ease,timer:null,state:Cr})}function Yn(t,e){var n=yt(t,e);if(n.state>Cr)throw new Error("too late; already scheduled");return n}function Et(t,e){var n=yt(t,e);if(n.state>Xe)throw new Error("too late; already running");return n}function yt(t,e){var n=t.__transition;if(!n||!(n=n[e]))throw new Error("transition not found");return n}function Oc(t,e,n){var o=t.__transition,r;o[e]=n,n.timer=kr(i,0,n.time);function i(u){n.state=ko,n.timer.restart(s,n.delay,n.time),n.delay<=u&&s(u-n.delay)}function s(u){var l,d,f,h;if(n.state!==ko)return c();for(l in o)if(h=o[l],h.name===n.name){if(h.state===Xe)return No(s);h.state===Co?(h.state=Ye,h.timer.stop(),h.on.call("interrupt",t,t.__data__,h.index,h.group),delete o[l]):+l<e&&(h.state=Ye,h.timer.stop(),h.on.call("cancel",t,t.__data__,h.index,h.group),delete o[l])}if(No(function(){n.state===Xe&&(n.state=Co,n.timer.restart(a,n.delay,n.time),a(u))}),n.state=Pn,n.on.call("start",t,t.__data__,n.index,n.group),n.state===Pn){for(n.state=Xe,r=new Array(f=n.tween.length),l=0,d=-1;l<f;++l)(h=n.tween[l].value.call(t,t.__data__,n.index,n.group))&&(r[++d]=h);r.length=d+1}}function a(u){for(var l=u<n.duration?n.ease.call(null,u/n.duration):(n.timer.restart(c),n.state=Dn,1),d=-1,f=r.length;++d<f;)r[d].call(t,l);n.state===Dn&&(n.on.call("end",t,t.__data__,n.index,n.group),c())}function c(){n.state=Ye,n.timer.stop(),delete o[e];for(var u in o)return;delete t.__transition}}function Ue(t,e){var n=t.__transition,o,r,i=!0,s;if(n){e=e==null?null:e+"";for(s in n){if((o=n[s]).name!==e){i=!1;continue}r=o.state>Pn&&o.state<Dn,o.state=Ye,o.timer.stop(),o.on.call(r?"interrupt":"cancel",t,t.__data__,o.index,o.group),delete n[s]}i&&delete t.__transition}}function Bc(t){return this.each(function(){Ue(this,t)})}function Lc(t,e){var n,o;return function(){var r=Et(this,t),i=r.tween;if(i!==n){o=n=i;for(var s=0,a=o.length;s<a;++s)if(o[s].name===e){o=o.slice(),o.splice(s,1);break}}r.tween=o}}function Vc(t,e,n){var o,r;if(typeof n!="function")throw new Error;return function(){var i=Et(this,t),s=i.tween;if(s!==o){r=(o=s).slice();for(var a={name:e,value:n},c=0,u=r.length;c<u;++c)if(r[c].name===e){r[c]=a;break}c===u&&r.push(a)}i.tween=r}}function Fc(t,e){var n=this._id;if(t+="",arguments.length<2){for(var o=yt(this.node(),n).tween,r=0,i=o.length,s;r<i;++r)if((s=o[r]).name===t)return s.value;return null}return this.each((e==null?Lc:Vc)(n,t,e))}function Un(t,e,n){var o=t._id;return t.each(function(){var r=Et(this,o);(r.value||(r.value={}))[e]=n.apply(this,arguments)}),function(r){return yt(r,o).value[e]}}function Mr(t,e){var n;return(typeof e=="number"?$t:e instanceof Ne?So:(n=Ne(e))?(e=n,So):vc)(t,e)}function Xc(t){return function(){this.removeAttribute(t)}}function Yc(t){return function(){this.removeAttributeNS(t.space,t.local)}}function Uc(t,e,n){var o,r=n+"",i;return function(){var s=this.getAttribute(t);return s===r?null:s===o?i:i=e(o=s,n)}}function Wc(t,e,n){var o,r=n+"",i;return function(){var s=this.getAttributeNS(t.space,t.local);return s===r?null:s===o?i:i=e(o=s,n)}}function Zc(t,e,n){var o,r,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttribute(t):(s=this.getAttribute(t),c=a+"",s===c?null:s===o&&c===r?i:(r=c,i=e(o=s,a)))}}function Kc(t,e,n){var o,r,i;return function(){var s,a=n(this),c;return a==null?void this.removeAttributeNS(t.space,t.local):(s=this.getAttributeNS(t.space,t.local),c=a+"",s===c?null:s===o&&c===r?i:(r=c,i=e(o=s,a)))}}function qc(t,e){var n=sn(t),o=n==="transform"?Cc:Mr;return this.attrTween(t,typeof e=="function"?(n.local?Kc:Zc)(n,o,Un(this,"attr."+t,e)):e==null?(n.local?Yc:Xc)(n):(n.local?Wc:Uc)(n,o,e))}function Gc(t,e){return function(n){this.setAttribute(t,e.call(this,n))}}function Qc(t,e){return function(n){this.setAttributeNS(t.space,t.local,e.call(this,n))}}function Jc(t,e){var n,o;function r(){var i=e.apply(this,arguments);return i!==o&&(n=(o=i)&&Qc(t,i)),n}return r._value=e,r}function jc(t,e){var n,o;function r(){var i=e.apply(this,arguments);return i!==o&&(n=(o=i)&&Gc(t,i)),n}return r._value=e,r}function tl(t,e){var n="attr."+t;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(e==null)return this.tween(n,null);if(typeof e!="function")throw new Error;var o=sn(t);return this.tween(n,(o.local?Jc:jc)(o,e))}function el(t,e){return function(){Yn(this,t).delay=+e.apply(this,arguments)}}function nl(t,e){return e=+e,function(){Yn(this,t).delay=e}}function ol(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?el:nl)(e,t)):yt(this.node(),e).delay}function rl(t,e){return function(){Et(this,t).duration=+e.apply(this,arguments)}}function il(t,e){return e=+e,function(){Et(this,t).duration=e}}function sl(t){var e=this._id;return arguments.length?this.each((typeof t=="function"?rl:il)(e,t)):yt(this.node(),e).duration}function al(t,e){if(typeof e!="function")throw new Error;return function(){Et(this,t).ease=e}}function cl(t){var e=this._id;return arguments.length?this.each(al(e,t)):yt(this.node(),e).ease}function ll(t,e){return function(){var n=e.apply(this,arguments);if(typeof n!="function")throw new Error;Et(this,t).ease=n}}function ul(t){if(typeof t!="function")throw new Error;return this.each(ll(this._id,t))}function dl(t){typeof t!="function"&&(t=sr(t));for(var e=this._groups,n=e.length,o=new Array(n),r=0;r<n;++r)for(var i=e[r],s=i.length,a=o[r]=[],c,u=0;u<s;++u)(c=i[u])&&t.call(c,c.__data__,u,i)&&a.push(c);return new Nt(o,this._parents,this._name,this._id)}function fl(t){if(t._id!==this._id)throw new Error;for(var e=this._groups,n=t._groups,o=e.length,r=n.length,i=Math.min(o,r),s=new Array(o),a=0;a<i;++a)for(var c=e[a],u=n[a],l=c.length,d=s[a]=new Array(l),f,h=0;h<l;++h)(f=c[h]||u[h])&&(d[h]=f);for(;a<o;++a)s[a]=e[a];return new Nt(s,this._parents,this._name,this._id)}function hl(t){return(t+"").trim().split(/^|\s+/).every(function(e){var n=e.indexOf(".");return n>=0&&(e=e.slice(0,n)),!e||e==="start"})}function gl(t,e,n){var o,r,i=hl(e)?Yn:Et;return function(){var s=i(this,t),a=s.on;a!==o&&(r=(o=a).copy()).on(e,n),s.on=r}}function pl(t,e){var n=this._id;return arguments.length<2?yt(this.node(),n).on.on(t):this.each(gl(n,t,e))}function ml(t){return function(){var e=this.parentNode;for(var n in this.__transition)if(+n!==t)return;e&&e.removeChild(this)}}function yl(){return this.on("end.remove",ml(this._id))}function xl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=Ln(t));for(var o=this._groups,r=o.length,i=new Array(r),s=0;s<r;++s)for(var a=o[s],c=a.length,u=i[s]=new Array(c),l,d,f=0;f<c;++f)(l=a[f])&&(d=t.call(l,l.__data__,f,a))&&("__data__"in l&&(d.__data__=l.__data__),u[f]=d,cn(u[f],e,n,f,u,yt(l,n)));return new Nt(i,this._parents,e,n)}function wl(t){var e=this._name,n=this._id;typeof t!="function"&&(t=ir(t));for(var o=this._groups,r=o.length,i=[],s=[],a=0;a<r;++a)for(var c=o[a],u=c.length,l,d=0;d<u;++d)if(l=c[d]){for(var f=t.call(l,l.__data__,d,c),h,x=yt(l,n),p=0,S=f.length;p<S;++p)(h=f[p])&&cn(h,e,n,p,f,x);i.push(f),s.push(l)}return new Nt(i,s,e,n)}var bl=$e.prototype.constructor;function Sl(){return new bl(this._groups,this._parents)}function El(t,e){var n,o,r;return function(){var i=le(this,t),s=(this.style.removeProperty(t),le(this,t));return i===s?null:i===n&&s===o?r:r=e(n=i,o=s)}}function Ar(t){return function(){this.style.removeProperty(t)}}function vl(t,e,n){var o,r=n+"",i;return function(){var s=le(this,t);return s===r?null:s===o?i:i=e(o=s,n)}}function _l(t,e,n){var o,r,i;return function(){var s=le(this,t),a=n(this),c=a+"";return a==null&&(c=a=(this.style.removeProperty(t),le(this,t))),s===c?null:s===o&&c===r?i:(r=c,i=e(o=s,a))}}function Nl(t,e){var n,o,r,i="style."+e,s="end."+i,a;return function(){var c=Et(this,t),u=c.on,l=c.value[i]==null?a||(a=Ar(e)):void 0;(u!==n||r!==l)&&(o=(n=u).copy()).on(s,r=l),c.on=o}}function kl(t,e,n){var o=(t+="")=="transform"?kc:Mr;return e==null?this.styleTween(t,El(t,o)).on("end.style."+t,Ar(t)):typeof e=="function"?this.styleTween(t,_l(t,o,Un(this,"style."+t,e))).each(Nl(this._id,t)):this.styleTween(t,vl(t,o,e),n).on("end.style."+t,null)}function Cl(t,e,n){return function(o){this.style.setProperty(t,e.call(this,o),n)}}function Ml(t,e,n){var o,r;function i(){var s=e.apply(this,arguments);return s!==r&&(o=(r=s)&&Cl(t,s,n)),o}return i._value=e,i}function Al(t,e,n){var o="style."+(t+="");if(arguments.length<2)return(o=this.tween(o))&&o._value;if(e==null)return this.tween(o,null);if(typeof e!="function")throw new Error;return this.tween(o,Ml(t,e,n??""))}function $l(t){return function(){this.textContent=t}}function Tl(t){return function(){var e=t(this);this.textContent=e??""}}function Pl(t){return this.tween("text",typeof t=="function"?Tl(Un(this,"text",t)):$l(t==null?"":t+""))}function Dl(t){return function(e){this.textContent=t.call(this,e)}}function Rl(t){var e,n;function o(){var r=t.apply(this,arguments);return r!==n&&(e=(n=r)&&Dl(r)),e}return o._value=t,o}function Il(t){var e="text";if(arguments.length<1)return(e=this.tween(e))&&e._value;if(t==null)return this.tween(e,null);if(typeof t!="function")throw new Error;return this.tween(e,Rl(t))}function zl(){for(var t=this._name,e=this._id,n=$r(),o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,c,u=0;u<a;++u)if(c=s[u]){var l=yt(c,e);cn(c,t,n,u,s,{time:l.time+l.delay+l.duration,delay:0,duration:l.duration,ease:l.ease})}return new Nt(o,this._parents,t,n)}function Hl(){var t,e,n=this,o=n._id,r=n.size();return new Promise(function(i,s){var a={value:s},c={value:function(){--r===0&&i()}};n.each(function(){var u=Et(this,o),l=u.on;l!==t&&(e=(t=l).copy(),e._.cancel.push(a),e._.interrupt.push(a),e._.end.push(c)),u.on=e}),r===0&&i()})}var Ol=0;function Nt(t,e,n,o){this._groups=t,this._parents=e,this._name=n,this._id=o}function $r(){return++Ol}var vt=$e.prototype;Nt.prototype={constructor:Nt,select:xl,selectAll:wl,selectChild:vt.selectChild,selectChildren:vt.selectChildren,filter:dl,merge:fl,selection:Sl,transition:zl,call:vt.call,nodes:vt.nodes,node:vt.node,size:vt.size,empty:vt.empty,each:vt.each,on:pl,attr:qc,attrTween:tl,style:kl,styleTween:Al,text:Pl,textTween:Il,remove:yl,tween:Fc,delay:ol,duration:sl,ease:cl,easeVarying:ul,end:Hl,[Symbol.iterator]:vt[Symbol.iterator]};function Bl(t){return((t*=2)<=1?t*t*t:(t-=2)*t*t+2)/2}var Ll={time:null,delay:0,duration:250,ease:Bl};function Vl(t,e){for(var n;!(n=t.__transition)||!(n=n[e]);)if(!(t=t.parentNode))throw new Error(`transition ${e} not found`);return n}function Fl(t){var e,n;t instanceof Nt?(e=t._id,t=t._name):(e=$r(),(n=Ll).time=Xn(),t=t==null?null:t+"");for(var o=this._groups,r=o.length,i=0;i<r;++i)for(var s=o[i],a=s.length,c,u=0;u<a;++u)(c=s[u])&&cn(c,t,e,u,s,n||Vl(c,e));return new Nt(o,this._parents,t,e)}$e.prototype.interrupt=Bc;$e.prototype.transition=Fl;const He=t=>()=>t;function Xl(t,{sourceEvent:e,target:n,transform:o,dispatch:r}){Object.defineProperties(this,{type:{value:t,enumerable:!0,configurable:!0},sourceEvent:{value:e,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:o,enumerable:!0,configurable:!0},_:{value:r}})}function _t(t,e,n){this.k=t,this.x=e,this.y=n}_t.prototype={constructor:_t,scale:function(t){return t===1?this:new _t(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new _t(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Dt=new _t(1,0,0);_t.prototype;function wn(t){t.stopImmediatePropagation()}function me(t){t.preventDefault(),t.stopImmediatePropagation()}function Yl(t){return(!t.ctrlKey||t.type==="wheel")&&!t.button}function Ul(){var t=this;return t instanceof SVGElement?(t=t.ownerSVGElement||t,t.hasAttribute("viewBox")?(t=t.viewBox.baseVal,[[t.x,t.y],[t.x+t.width,t.y+t.height]]):[[0,0],[t.width.baseVal.value,t.height.baseVal.value]]):[[0,0],[t.clientWidth,t.clientHeight]]}function Mo(){return this.__zoom||Dt}function Wl(t){return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*(t.ctrlKey?10:1)}function Zl(){return navigator.maxTouchPoints||"ontouchstart"in this}function Kl(t,e,n){var o=t.invertX(e[0][0])-n[0][0],r=t.invertX(e[1][0])-n[1][0],i=t.invertY(e[0][1])-n[0][1],s=t.invertY(e[1][1])-n[1][1];return t.translate(r>o?(o+r)/2:Math.min(0,o)||Math.max(0,r),s>i?(i+s)/2:Math.min(0,i)||Math.max(0,s))}function ql(){var t=Yl,e=Ul,n=Kl,o=Wl,r=Zl,i=[0,1/0],s=[[-1/0,-1/0],[1/0,1/0]],a=250,c=Tc,u=rn("start","zoom","end"),l,d,f,h=500,x=150,p=0,S=10;function m(g){g.property("__zoom",Mo).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",O).filter(r).on("touchstart.zoom",H).on("touchmove.zoom",B).on("touchend.zoom touchcancel.zoom",E).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}m.transform=function(g,v,b,M){var D=g.selection?g.selection():g;D.property("__zoom",Mo),g!==D?$(g,v,b,M):D.interrupt().each(function(){T(this,arguments).event(M).start().zoom(null,typeof v=="function"?v.apply(this,arguments):v).end()})},m.scaleBy=function(g,v,b,M){m.scaleTo(g,function(){var D=this.__zoom.k,w=typeof v=="function"?v.apply(this,arguments):v;return D*w},b,M)},m.scaleTo=function(g,v,b,M){m.transform(g,function(){var D=e.apply(this,arguments),w=this.__zoom,k=b==null?y(D):typeof b=="function"?b.apply(this,arguments):b,A=w.invert(k),V=typeof v=="function"?v.apply(this,arguments):v;return n(C(N(w,V),k,A),D,s)},b,M)},m.translateBy=function(g,v,b,M){m.transform(g,function(){return n(this.__zoom.translate(typeof v=="function"?v.apply(this,arguments):v,typeof b=="function"?b.apply(this,arguments):b),e.apply(this,arguments),s)},null,M)},m.translateTo=function(g,v,b,M,D){m.transform(g,function(){var w=e.apply(this,arguments),k=this.__zoom,A=M==null?y(w):typeof M=="function"?M.apply(this,arguments):M;return n(Dt.translate(A[0],A[1]).scale(k.k).translate(typeof v=="function"?-v.apply(this,arguments):-v,typeof b=="function"?-b.apply(this,arguments):-b),w,s)},M,D)};function N(g,v){return v=Math.max(i[0],Math.min(i[1],v)),v===g.k?g:new _t(v,g.x,g.y)}function C(g,v,b){var M=v[0]-b[0]*g.k,D=v[1]-b[1]*g.k;return M===g.x&&D===g.y?g:new _t(g.k,M,D)}function y(g){return[(+g[0][0]+ +g[1][0])/2,(+g[0][1]+ +g[1][1])/2]}function $(g,v,b,M){g.on("start.zoom",function(){T(this,arguments).event(M).start()}).on("interrupt.zoom end.zoom",function(){T(this,arguments).event(M).end()}).tween("zoom",function(){var D=this,w=arguments,k=T(D,w).event(M),A=e.apply(D,w),V=b==null?y(A):typeof b=="function"?b.apply(D,w):b,X=Math.max(A[1][0]-A[0][0],A[1][1]-A[0][1]),F=D.__zoom,W=typeof v=="function"?v.apply(D,w):v,Z=c(F.invert(V).concat(X/F.k),W.invert(V).concat(X/W.k));return function(K){if(K===1)K=W;else{var q=Z(K),Q=X/q[2];K=new _t(Q,V[0]-q[0]*Q,V[1]-q[1]*Q)}k.zoom(null,K)}})}function T(g,v,b){return!b&&g.__zooming||new z(g,v)}function z(g,v){this.that=g,this.args=v,this.active=0,this.sourceEvent=null,this.extent=e.apply(g,v),this.taps=0}z.prototype={event:function(g){return g&&(this.sourceEvent=g),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(g,v){return this.mouse&&g!=="mouse"&&(this.mouse[1]=v.invert(this.mouse[0])),this.touch0&&g!=="touch"&&(this.touch0[1]=v.invert(this.touch0[0])),this.touch1&&g!=="touch"&&(this.touch1[1]=v.invert(this.touch1[0])),this.that.__zoom=v,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(g){var v=pt(this.that).datum();u.call(g,this.that,new Xl(g,{sourceEvent:this.sourceEvent,target:m,type:g,transform:this.that.__zoom,dispatch:u}),v)}};function R(g,...v){if(!t.apply(this,arguments))return;var b=T(this,v).event(g),M=this.__zoom,D=Math.max(i[0],Math.min(i[1],M.k*Math.pow(2,o.apply(this,arguments)))),w=bt(g);if(b.wheel)(b.mouse[0][0]!==w[0]||b.mouse[0][1]!==w[1])&&(b.mouse[1]=M.invert(b.mouse[0]=w)),clearTimeout(b.wheel);else{if(M.k===D)return;b.mouse=[w,M.invert(w)],Ue(this),b.start()}me(g),b.wheel=setTimeout(k,x),b.zoom("mouse",n(C(N(M,D),b.mouse[0],b.mouse[1]),b.extent,s));function k(){b.wheel=null,b.end()}}function I(g,...v){if(f||!t.apply(this,arguments))return;var b=g.currentTarget,M=T(this,v,!0).event(g),D=pt(g.view).on("mousemove.zoom",V,!0).on("mouseup.zoom",X,!0),w=bt(g,b),k=g.clientX,A=g.clientY;mr(g.view),wn(g),M.mouse=[w,this.__zoom.invert(w)],Ue(this),M.start();function V(F){if(me(F),!M.moved){var W=F.clientX-k,Z=F.clientY-A;M.moved=W*W+Z*Z>p}M.event(F).zoom("mouse",n(C(M.that.__zoom,M.mouse[0]=bt(F,b),M.mouse[1]),M.extent,s))}function X(F){D.on("mousemove.zoom mouseup.zoom",null),yr(F.view,M.moved),me(F),M.event(F).end()}}function O(g,...v){if(t.apply(this,arguments)){var b=this.__zoom,M=bt(g.changedTouches?g.changedTouches[0]:g,this),D=b.invert(M),w=b.k*(g.shiftKey?.5:2),k=n(C(N(b,w),M,D),e.apply(this,v),s);me(g),a>0?pt(this).transition().duration(a).call($,k,M,g):pt(this).call(m.transform,k,M,g)}}function H(g,...v){if(t.apply(this,arguments)){var b=g.touches,M=b.length,D=T(this,v,g.changedTouches.length===M).event(g),w,k,A,V;for(wn(g),k=0;k<M;++k)A=b[k],V=bt(A,this),V=[V,this.__zoom.invert(V),A.identifier],D.touch0?!D.touch1&&D.touch0[2]!==V[2]&&(D.touch1=V,D.taps=0):(D.touch0=V,w=!0,D.taps=1+!!l);l&&(l=clearTimeout(l)),w&&(D.taps<2&&(d=V[0],l=setTimeout(function(){l=null},h)),Ue(this),D.start())}}function B(g,...v){if(this.__zooming){var b=T(this,v).event(g),M=g.changedTouches,D=M.length,w,k,A,V;for(me(g),w=0;w<D;++w)k=M[w],A=bt(k,this),b.touch0&&b.touch0[2]===k.identifier?b.touch0[0]=A:b.touch1&&b.touch1[2]===k.identifier&&(b.touch1[0]=A);if(k=b.that.__zoom,b.touch1){var X=b.touch0[0],F=b.touch0[1],W=b.touch1[0],Z=b.touch1[1],K=(K=W[0]-X[0])*K+(K=W[1]-X[1])*K,q=(q=Z[0]-F[0])*q+(q=Z[1]-F[1])*q;k=N(k,Math.sqrt(K/q)),A=[(X[0]+W[0])/2,(X[1]+W[1])/2],V=[(F[0]+Z[0])/2,(F[1]+Z[1])/2]}else if(b.touch0)A=b.touch0[0],V=b.touch0[1];else return;b.zoom("touch",n(C(k,A,V),b.extent,s))}}function E(g,...v){if(this.__zooming){var b=T(this,v).event(g),M=g.changedTouches,D=M.length,w,k;for(wn(g),f&&clearTimeout(f),f=setTimeout(function(){f=null},h),w=0;w<D;++w)k=M[w],b.touch0&&b.touch0[2]===k.identifier?delete b.touch0:b.touch1&&b.touch1[2]===k.identifier&&delete b.touch1;if(b.touch1&&!b.touch0&&(b.touch0=b.touch1,delete b.touch1),b.touch0)b.touch0[1]=this.__zoom.invert(b.touch0[0]);else if(b.end(),b.taps===2&&(k=bt(k,this),Math.hypot(d[0]-k[0],d[1]-k[1])<S)){var A=pt(this).on("dblclick.zoom");A&&A.apply(this,arguments)}}}return m.wheelDelta=function(g){return arguments.length?(o=typeof g=="function"?g:He(+g),m):o},m.filter=function(g){return arguments.length?(t=typeof g=="function"?g:He(!!g),m):t},m.touchable=function(g){return arguments.length?(r=typeof g=="function"?g:He(!!g),m):r},m.extent=function(g){return arguments.length?(e=typeof g=="function"?g:He([[+g[0][0],+g[0][1]],[+g[1][0],+g[1][1]]]),m):e},m.scaleExtent=function(g){return arguments.length?(i[0]=+g[0],i[1]=+g[1],m):[i[0],i[1]]},m.translateExtent=function(g){return arguments.length?(s[0][0]=+g[0][0],s[1][0]=+g[1][0],s[0][1]=+g[0][1],s[1][1]=+g[1][1],m):[[s[0][0],s[0][1]],[s[1][0],s[1][1]]]},m.constrain=function(g){return arguments.length?(n=g,m):n},m.duration=function(g){return arguments.length?(a=+g,m):a},m.interpolate=function(g){return arguments.length?(c=g,m):c},m.on=function(){var g=u.on.apply(u,arguments);return g===u?m:g},m.clickDistance=function(g){return arguments.length?(p=(g=+g)*g,m):Math.sqrt(p)},m.tapDistance=function(g){return arguments.length?(S=+g,m):S},m}const ln=_.createContext(null),Gl=ln.Provider,kt={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:t=>`Node type "${t}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:t=>`The old edge with id=${t} does not exist.`,error009:t=>`Marker type "${t}" doesn't exist.`,error008:(t,e)=>`Couldn't create edge for ${t?"target":"source"} handle id: "${t?e.targetHandle:e.sourceHandle}", edge id: ${e.id}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:t=>`Edge type "${t}" not found. Using fallback type "default".`,error012:t=>`Node with id "${t}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`},Tr=kt.error001();function j(t,e){const n=_.useContext(ln);if(n===null)throw new Error(Tr);return or(n,t,e)}const nt=()=>{const t=_.useContext(ln);if(t===null)throw new Error(Tr);return _.useMemo(()=>({getState:t.getState,setState:t.setState,subscribe:t.subscribe,destroy:t.destroy}),[t])},Ql=t=>t.userSelectionActive?"none":"all";function Jl({position:t,children:e,className:n,style:o,...r}){const i=j(Ql),s=`${t}`.split("-");return P.createElement("div",{className:ht(["react-flow__panel",n,...s]),style:{...o,pointerEvents:i},...r},e)}function jl({proOptions:t,position:e="bottom-right"}){return t?.hideAttribution?null:P.createElement(Jl,{position:e,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev"},P.createElement("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution"},"React Flow"))}const tu=({x:t,y:e,label:n,labelStyle:o={},labelShowBg:r=!0,labelBgStyle:i={},labelBgPadding:s=[2,4],labelBgBorderRadius:a=2,children:c,className:u,...l})=>{const d=_.useRef(null),[f,h]=_.useState({x:0,y:0,width:0,height:0}),x=ht(["react-flow__edge-textwrapper",u]);return _.useEffect(()=>{if(d.current){const p=d.current.getBBox();h({x:p.x,y:p.y,width:p.width,height:p.height})}},[n]),typeof n>"u"||!n?null:P.createElement("g",{transform:`translate(${t-f.width/2} ${e-f.height/2})`,className:x,visibility:f.width?"visible":"hidden",...l},r&&P.createElement("rect",{width:f.width+2*s[0],x:-s[0],y:-s[1],height:f.height+2*s[1],className:"react-flow__edge-textbg",style:i,rx:a,ry:a}),P.createElement("text",{className:"react-flow__edge-text",y:f.height/2,dy:"0.3em",ref:d,style:o},n),c)};var eu=_.memo(tu);const Wn=t=>({width:t.offsetWidth,height:t.offsetHeight}),de=(t,e=0,n=1)=>Math.min(Math.max(t,e),n),Zn=(t={x:0,y:0},e)=>({x:de(t.x,e[0][0],e[1][0]),y:de(t.y,e[0][1],e[1][1])}),Ao=(t,e,n)=>t<e?de(Math.abs(t-e),1,50)/50:t>n?-de(Math.abs(t-n),1,50)/50:0,Pr=(t,e)=>{const n=Ao(t.x,35,e.width-35)*20,o=Ao(t.y,35,e.height-35)*20;return[n,o]},Dr=t=>t.getRootNode?.()||window?.document,nu=(t,e)=>({x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x2,e.x2),y2:Math.max(t.y2,e.y2)}),Kn=({x:t,y:e,width:n,height:o})=>({x:t,y:e,x2:t+n,y2:e+o}),ou=({x:t,y:e,x2:n,y2:o})=>({x:t,y:e,width:n-t,height:o-e}),$o=t=>({...t.positionAbsolute||{x:0,y:0},width:t.width||0,height:t.height||0}),Rn=(t,e)=>{const n=Math.max(0,Math.min(t.x+t.width,e.x+e.width)-Math.max(t.x,e.x)),o=Math.max(0,Math.min(t.y+t.height,e.y+e.height)-Math.max(t.y,e.y));return Math.ceil(n*o)},ru=t=>ft(t.width)&&ft(t.height)&&ft(t.x)&&ft(t.y),ft=t=>!isNaN(t)&&isFinite(t),et=Symbol.for("internals"),Rr=["Enter"," ","Escape"],iu=(t,e)=>{},su=t=>"nativeEvent"in t;function In(t){const n=(su(t)?t.nativeEvent:t).composedPath?.()?.[0]||t.target;return["INPUT","SELECT","TEXTAREA"].includes(n?.nodeName)||n?.hasAttribute("contenteditable")||!!n?.closest(".nokey")}const Ir=t=>"clientX"in t,Rt=(t,e)=>{const n=Ir(t),o=n?t.clientX:t.touches?.[0].clientX,r=n?t.clientY:t.touches?.[0].clientY;return{x:o-(e?.left??0),y:r-(e?.top??0)}},Je=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0,Pe=({id:t,path:e,labelX:n,labelY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:f,interactionWidth:h=20})=>P.createElement(P.Fragment,null,P.createElement("path",{id:t,style:l,d:e,fill:"none",className:"react-flow__edge-path",markerEnd:d,markerStart:f}),h&&P.createElement("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:h,className:"react-flow__edge-interaction"}),r&&ft(n)&&ft(o)?P.createElement(eu,{x:n,y:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u}):null);Pe.displayName="BaseEdge";function ye(t,e,n){return n===void 0?n:o=>{const r=e().edges.find(i=>i.id===t);r&&n(o,{...r})}}function zr({sourceX:t,sourceY:e,targetX:n,targetY:o}){const r=Math.abs(n-t)/2,i=n<t?n+r:n-r,s=Math.abs(o-e)/2,a=o<e?o+s:o-s;return[i,a,r,s]}function Hr({sourceX:t,sourceY:e,targetX:n,targetY:o,sourceControlX:r,sourceControlY:i,targetControlX:s,targetControlY:a}){const c=t*.125+r*.375+s*.375+n*.125,u=e*.125+i*.375+a*.375+o*.125,l=Math.abs(c-t),d=Math.abs(u-e);return[c,u,l,d]}var Kt;(function(t){t.Strict="strict",t.Loose="loose"})(Kt||(Kt={}));var Ut;(function(t){t.Free="free",t.Vertical="vertical",t.Horizontal="horizontal"})(Ut||(Ut={}));var Ce;(function(t){t.Partial="partial",t.Full="full"})(Ce||(Ce={}));var Pt;(function(t){t.Bezier="default",t.Straight="straight",t.Step="step",t.SmoothStep="smoothstep",t.SimpleBezier="simplebezier"})(Pt||(Pt={}));var je;(function(t){t.Arrow="arrow",t.ArrowClosed="arrowclosed"})(je||(je={}));var L;(function(t){t.Left="left",t.Top="top",t.Right="right",t.Bottom="bottom"})(L||(L={}));function To({pos:t,x1:e,y1:n,x2:o,y2:r}){return t===L.Left||t===L.Right?[.5*(e+o),n]:[e,.5*(n+r)]}function qn({sourceX:t,sourceY:e,sourcePosition:n=L.Bottom,targetX:o,targetY:r,targetPosition:i=L.Top}){const[s,a]=To({pos:n,x1:t,y1:e,x2:o,y2:r}),[c,u]=To({pos:i,x1:o,y1:r,x2:t,y2:e}),[l,d,f,h]=Hr({sourceX:t,sourceY:e,targetX:o,targetY:r,sourceControlX:s,sourceControlY:a,targetControlX:c,targetControlY:u});return[`M${t},${e} C${s},${a} ${c},${u} ${o},${r}`,l,d,f,h]}const Gn=_.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,sourcePosition:r=L.Bottom,targetPosition:i=L.Top,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:x,interactionWidth:p})=>{const[S,m,N]=qn({sourceX:t,sourceY:e,sourcePosition:r,targetX:n,targetY:o,targetPosition:i});return P.createElement(Pe,{path:S,labelX:m,labelY:N,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:x,interactionWidth:p})});Gn.displayName="SimpleBezierEdge";const Po={[L.Left]:{x:-1,y:0},[L.Right]:{x:1,y:0},[L.Top]:{x:0,y:-1},[L.Bottom]:{x:0,y:1}},au=({source:t,sourcePosition:e=L.Bottom,target:n})=>e===L.Left||e===L.Right?t.x<n.x?{x:1,y:0}:{x:-1,y:0}:t.y<n.y?{x:0,y:1}:{x:0,y:-1},Do=(t,e)=>Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2));function cu({source:t,sourcePosition:e=L.Bottom,target:n,targetPosition:o=L.Top,center:r,offset:i}){const s=Po[e],a=Po[o],c={x:t.x+s.x*i,y:t.y+s.y*i},u={x:n.x+a.x*i,y:n.y+a.y*i},l=au({source:c,sourcePosition:e,target:u}),d=l.x!==0?"x":"y",f=l[d];let h=[],x,p;const S={x:0,y:0},m={x:0,y:0},[N,C,y,$]=zr({sourceX:t.x,sourceY:t.y,targetX:n.x,targetY:n.y});if(s[d]*a[d]===-1){x=r.x||N,p=r.y||C;const z=[{x,y:c.y},{x,y:u.y}],R=[{x:c.x,y:p},{x:u.x,y:p}];s[d]===f?h=d==="x"?z:R:h=d==="x"?R:z}else{const z=[{x:c.x,y:u.y}],R=[{x:u.x,y:c.y}];if(d==="x"?h=s.x===f?R:z:h=s.y===f?z:R,e===o){const E=Math.abs(t[d]-n[d]);if(E<=i){const g=Math.min(i-1,i-E);s[d]===f?S[d]=(c[d]>t[d]?-1:1)*g:m[d]=(u[d]>n[d]?-1:1)*g}}if(e!==o){const E=d==="x"?"y":"x",g=s[d]===a[E],v=c[E]>u[E],b=c[E]<u[E];(s[d]===1&&(!g&&v||g&&b)||s[d]!==1&&(!g&&b||g&&v))&&(h=d==="x"?z:R)}const I={x:c.x+S.x,y:c.y+S.y},O={x:u.x+m.x,y:u.y+m.y},H=Math.max(Math.abs(I.x-h[0].x),Math.abs(O.x-h[0].x)),B=Math.max(Math.abs(I.y-h[0].y),Math.abs(O.y-h[0].y));H>=B?(x=(I.x+O.x)/2,p=h[0].y):(x=h[0].x,p=(I.y+O.y)/2)}return[[t,{x:c.x+S.x,y:c.y+S.y},...h,{x:u.x+m.x,y:u.y+m.y},n],x,p,y,$]}function lu(t,e,n,o){const r=Math.min(Do(t,e)/2,Do(e,n)/2,o),{x:i,y:s}=e;if(t.x===i&&i===n.x||t.y===s&&s===n.y)return`L${i} ${s}`;if(t.y===s){const u=t.x<n.x?-1:1,l=t.y<n.y?1:-1;return`L ${i+r*u},${s}Q ${i},${s} ${i},${s+r*l}`}const a=t.x<n.x?1:-1,c=t.y<n.y?-1:1;return`L ${i},${s+r*c}Q ${i},${s} ${i+r*a},${s}`}function Me({sourceX:t,sourceY:e,sourcePosition:n=L.Bottom,targetX:o,targetY:r,targetPosition:i=L.Top,borderRadius:s=5,centerX:a,centerY:c,offset:u=20}){const[l,d,f,h,x]=cu({source:{x:t,y:e},sourcePosition:n,target:{x:o,y:r},targetPosition:i,center:{x:a,y:c},offset:u});return[l.reduce((S,m,N)=>{let C="";return N>0&&N<l.length-1?C=lu(l[N-1],m,l[N+1],s):C=`${N===0?"M":"L"}${m.x} ${m.y}`,S+=C,S},""),d,f,h,x]}const un=_.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,sourcePosition:d=L.Bottom,targetPosition:f=L.Top,markerEnd:h,markerStart:x,pathOptions:p,interactionWidth:S})=>{const[m,N,C]=Me({sourceX:t,sourceY:e,sourcePosition:d,targetX:n,targetY:o,targetPosition:f,borderRadius:p?.borderRadius,offset:p?.offset});return P.createElement(Pe,{path:m,labelX:N,labelY:C,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:h,markerStart:x,interactionWidth:S})});un.displayName="SmoothStepEdge";const Qn=_.memo(t=>P.createElement(un,{...t,pathOptions:_.useMemo(()=>({borderRadius:0,offset:t.pathOptions?.offset}),[t.pathOptions?.offset])}));Qn.displayName="StepEdge";function Or({sourceX:t,sourceY:e,targetX:n,targetY:o}){const[r,i,s,a]=zr({sourceX:t,sourceY:e,targetX:n,targetY:o});return[`M ${t},${e}L ${n},${o}`,r,i,s,a]}const Jn=_.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:f,interactionWidth:h})=>{const[x,p,S]=Or({sourceX:t,sourceY:e,targetX:n,targetY:o});return P.createElement(Pe,{path:x,labelX:p,labelY:S,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:a,labelBgPadding:c,labelBgBorderRadius:u,style:l,markerEnd:d,markerStart:f,interactionWidth:h})});Jn.displayName="StraightEdge";function Oe(t,e){return t>=0?.5*t:e*25*Math.sqrt(-t)}function Ro({pos:t,x1:e,y1:n,x2:o,y2:r,c:i}){switch(t){case L.Left:return[e-Oe(e-o,i),n];case L.Right:return[e+Oe(o-e,i),n];case L.Top:return[e,n-Oe(n-r,i)];case L.Bottom:return[e,n+Oe(r-n,i)]}}function tn({sourceX:t,sourceY:e,sourcePosition:n=L.Bottom,targetX:o,targetY:r,targetPosition:i=L.Top,curvature:s=.25}){const[a,c]=Ro({pos:n,x1:t,y1:e,x2:o,y2:r,c:s}),[u,l]=Ro({pos:i,x1:o,y1:r,x2:t,y2:e,c:s}),[d,f,h,x]=Hr({sourceX:t,sourceY:e,targetX:o,targetY:r,sourceControlX:a,sourceControlY:c,targetControlX:u,targetControlY:l});return[`M${t},${e} C${a},${c} ${u},${l} ${o},${r}`,d,f,h,x]}const en=_.memo(({sourceX:t,sourceY:e,targetX:n,targetY:o,sourcePosition:r=L.Bottom,targetPosition:i=L.Top,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:x,pathOptions:p,interactionWidth:S})=>{const[m,N,C]=tn({sourceX:t,sourceY:e,sourcePosition:r,targetX:n,targetY:o,targetPosition:i,curvature:p?.curvature});return P.createElement(Pe,{path:m,labelX:N,labelY:C,label:s,labelStyle:a,labelShowBg:c,labelBgStyle:u,labelBgPadding:l,labelBgBorderRadius:d,style:f,markerEnd:h,markerStart:x,interactionWidth:S})});en.displayName="BezierEdge";const jn=_.createContext(null),uu=jn.Provider;jn.Consumer;const du=()=>_.useContext(jn),fu=t=>"id"in t&&"source"in t&&"target"in t,hu=({source:t,sourceHandle:e,target:n,targetHandle:o})=>`reactflow__edge-${t}${e||""}-${n}${o||""}`,zn=(t,e)=>typeof t>"u"?"":typeof t=="string"?t:`${e?`${e}__`:""}${Object.keys(t).sort().map(o=>`${o}=${t[o]}`).join("&")}`,gu=(t,e)=>e.some(n=>n.source===t.source&&n.target===t.target&&(n.sourceHandle===t.sourceHandle||!n.sourceHandle&&!t.sourceHandle)&&(n.targetHandle===t.targetHandle||!n.targetHandle&&!t.targetHandle)),pu=(t,e)=>{if(!t.source||!t.target)return e;let n;return fu(t)?n={...t}:n={...t,id:hu(t)},gu(n,e)?e:e.concat(n)},Br=({x:t,y:e},[n,o,r],i,[s,a])=>{const c={x:(t-n)/r,y:(e-o)/r};return i?{x:s*Math.round(c.x/s),y:a*Math.round(c.y/a)}:c},mu=({x:t,y:e},[n,o,r])=>({x:t*r+n,y:e*r+o}),se=(t,e=[0,0])=>{if(!t)return{x:0,y:0,positionAbsolute:{x:0,y:0}};const n=(t.width??0)*e[0],o=(t.height??0)*e[1],r={x:t.position.x-n,y:t.position.y-o};return{...r,positionAbsolute:t.positionAbsolute?{x:t.positionAbsolute.x-n,y:t.positionAbsolute.y-o}:r}},to=(t,e=[0,0])=>{if(t.length===0)return{x:0,y:0,width:0,height:0};const n=t.reduce((o,r)=>{const{x:i,y:s}=se(r,e).positionAbsolute;return nu(o,Kn({x:i,y:s,width:r.width||0,height:r.height||0}))},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return ou(n)},Lr=(t,e,[n,o,r]=[0,0,1],i=!1,s=!1,a=[0,0])=>{const c={x:(e.x-n)/r,y:(e.y-o)/r,width:e.width/r,height:e.height/r},u=[];return t.forEach(l=>{const{width:d,height:f,selectable:h=!0,hidden:x=!1}=l;if(s&&!h||x)return!1;const{positionAbsolute:p}=se(l,a),S={x:p.x,y:p.y,width:d||0,height:f||0},m=Rn(c,S),N=typeof d>"u"||typeof f>"u"||d===null||f===null,C=i&&m>0,y=(d||0)*(f||0);(N||C||m>=y||l.dragging)&&u.push(l)}),u},Vr=(t,e)=>{const n=t.map(o=>o.id);return e.filter(o=>n.includes(o.source)||n.includes(o.target))},Fr=(t,e,n,o,r,i=.1)=>{const s=e/(t.width*(1+i)),a=n/(t.height*(1+i)),c=Math.min(s,a),u=de(c,o,r),l=t.x+t.width/2,d=t.y+t.height/2,f=e/2-l*u,h=n/2-d*u;return[f,h,u]},Xt=(t,e=0)=>t.transition().duration(e);function Io(t,e,n,o){return(e[n]||[]).reduce((r,i)=>(`${t.id}-${i.id}-${n}`!==o&&r.push({id:i.id||null,type:n,nodeId:t.id,x:(t.positionAbsolute?.x??0)+i.x+i.width/2,y:(t.positionAbsolute?.y??0)+i.y+i.height/2}),r),[])}function yu(t,e,n,o,r,i){const{x:s,y:a}=Rt(t),u=e.elementsFromPoint(s,a).find(x=>x.classList.contains("react-flow__handle"));if(u){const x=u.getAttribute("data-nodeid");if(x){const p=eo(void 0,u),S=u.getAttribute("data-handleid"),m=i({nodeId:x,id:S,type:p});if(m)return{handle:{id:S,type:p,nodeId:x,x:n.x,y:n.y},validHandleResult:m}}}let l=[],d=1/0;if(r.forEach(x=>{const p=Math.sqrt((x.x-n.x)**2+(x.y-n.y)**2);if(p<=o){const S=i(x);p<=d&&(p<d?l=[{handle:x,validHandleResult:S}]:p===d&&l.push({handle:x,validHandleResult:S}),d=p)}}),!l.length)return{handle:null,validHandleResult:Xr()};if(l.length===1)return l[0];const f=l.some(({validHandleResult:x})=>x.isValid),h=l.some(({handle:x})=>x.type==="target");return l.find(({handle:x,validHandleResult:p})=>h?x.type==="target":f?p.isValid:!0)||l[0]}const xu={source:null,target:null,sourceHandle:null,targetHandle:null},Xr=()=>({handleDomNode:null,isValid:!1,connection:xu,endHandle:null});function Yr(t,e,n,o,r,i,s){const a=r==="target",c=s.querySelector(`.react-flow__handle[data-id="${t?.nodeId}-${t?.id}-${t?.type}"]`),u={...Xr(),handleDomNode:c};if(c){const l=eo(void 0,c),d=c.getAttribute("data-nodeid"),f=c.getAttribute("data-handleid"),h=c.classList.contains("connectable"),x=c.classList.contains("connectableend"),p={source:a?d:n,sourceHandle:a?f:o,target:a?n:d,targetHandle:a?o:f};u.connection=p,h&&x&&(e===Kt.Strict?a&&l==="source"||!a&&l==="target":d!==n||f!==o)&&(u.endHandle={nodeId:d,handleId:f,type:l},u.isValid=i(p))}return u}function wu({nodes:t,nodeId:e,handleId:n,handleType:o}){return t.reduce((r,i)=>{if(i[et]){const{handleBounds:s}=i[et];let a=[],c=[];s&&(a=Io(i,s,"source",`${e}-${n}-${o}`),c=Io(i,s,"target",`${e}-${n}-${o}`)),r.push(...a,...c)}return r},[])}function eo(t,e){return t||(e?.classList.contains("target")?"target":e?.classList.contains("source")?"source":null)}function bn(t){t?.classList.remove("valid","connecting","react-flow__handle-valid","react-flow__handle-connecting")}function bu(t,e){let n=null;return e?n="valid":t&&!e&&(n="invalid"),n}function Ur({event:t,handleId:e,nodeId:n,onConnect:o,isTarget:r,getState:i,setState:s,isValidConnection:a,edgeUpdaterType:c,onEdgeUpdateEnd:u}){const l=Dr(t.target),{connectionMode:d,domNode:f,autoPanOnConnect:h,connectionRadius:x,onConnectStart:p,panBy:S,getNodes:m,cancelConnection:N}=i();let C=0,y;const{x:$,y:T}=Rt(t),z=l?.elementFromPoint($,T),R=eo(c,z),I=f?.getBoundingClientRect();if(!I||!R)return;let O,H=Rt(t,I),B=!1,E=null,g=!1,v=null;const b=wu({nodes:m(),nodeId:n,handleId:e,handleType:R}),M=()=>{if(!h)return;const[k,A]=Pr(H,I);S({x:k,y:A}),C=requestAnimationFrame(M)};s({connectionPosition:H,connectionStatus:null,connectionNodeId:n,connectionHandleId:e,connectionHandleType:R,connectionStartHandle:{nodeId:n,handleId:e,type:R},connectionEndHandle:null}),p?.(t,{nodeId:n,handleId:e,handleType:R});function D(k){const{transform:A}=i();H=Rt(k,I);const{handle:V,validHandleResult:X}=yu(k,l,Br(H,A,!1,[1,1]),x,b,F=>Yr(F,d,n,e,r?"target":"source",a,l));if(y=V,B||(M(),B=!0),v=X.handleDomNode,E=X.connection,g=X.isValid,s({connectionPosition:y&&g?mu({x:y.x,y:y.y},A):H,connectionStatus:bu(!!y,g),connectionEndHandle:X.endHandle}),!y&&!g&&!v)return bn(O);E.source!==E.target&&v&&(bn(O),O=v,v.classList.add("connecting","react-flow__handle-connecting"),v.classList.toggle("valid",g),v.classList.toggle("react-flow__handle-valid",g))}function w(k){(y||v)&&E&&g&&o?.(E),i().onConnectEnd?.(k),c&&u?.(k),bn(O),N(),cancelAnimationFrame(C),B=!1,g=!1,E=null,v=null,l.removeEventListener("mousemove",D),l.removeEventListener("mouseup",w),l.removeEventListener("touchmove",D),l.removeEventListener("touchend",w)}l.addEventListener("mousemove",D),l.addEventListener("mouseup",w),l.addEventListener("touchmove",D),l.addEventListener("touchend",w)}const zo=()=>!0,Su=t=>({connectionStartHandle:t.connectionStartHandle,connectOnClick:t.connectOnClick,noPanClassName:t.noPanClassName}),Eu=(t,e,n)=>o=>{const{connectionStartHandle:r,connectionEndHandle:i,connectionClickStartHandle:s}=o;return{connecting:r?.nodeId===t&&r?.handleId===e&&r?.type===n||i?.nodeId===t&&i?.handleId===e&&i?.type===n,clickConnecting:s?.nodeId===t&&s?.handleId===e&&s?.type===n}},Wr=_.forwardRef(({type:t="source",position:e=L.Top,isValidConnection:n,isConnectable:o=!0,isConnectableStart:r=!0,isConnectableEnd:i=!0,id:s,onConnect:a,children:c,className:u,onMouseDown:l,onTouchStart:d,...f},h)=>{const x=s||null,p=t==="target",S=nt(),m=du(),{connectOnClick:N,noPanClassName:C}=j(Su,ct),{connecting:y,clickConnecting:$}=j(Eu(m,x,t),ct);m||S.getState().onError?.("010",kt.error010());const T=I=>{const{defaultEdgeOptions:O,onConnect:H,hasDefaultEdges:B}=S.getState(),E={...O,...I};if(B){const{edges:g,setEdges:v}=S.getState();v(pu(E,g))}H?.(E),a?.(E)},z=I=>{if(!m)return;const O=Ir(I);r&&(O&&I.button===0||!O)&&Ur({event:I,handleId:x,nodeId:m,onConnect:T,isTarget:p,getState:S.getState,setState:S.setState,isValidConnection:n||S.getState().isValidConnection||zo}),O?l?.(I):d?.(I)},R=I=>{const{onClickConnectStart:O,onClickConnectEnd:H,connectionClickStartHandle:B,connectionMode:E,isValidConnection:g}=S.getState();if(!m||!B&&!r)return;if(!B){O?.(I,{nodeId:m,handleId:x,handleType:t}),S.setState({connectionClickStartHandle:{nodeId:m,type:t,handleId:x}});return}const v=Dr(I.target),b=n||g||zo,{connection:M,isValid:D}=Yr({nodeId:m,id:x,type:t},E,B.nodeId,B.handleId||null,B.type,b,v);D&&T(M),H?.(I),S.setState({connectionClickStartHandle:null})};return P.createElement("div",{"data-handleid":x,"data-nodeid":m,"data-handlepos":e,"data-id":`${m}-${x}-${t}`,className:ht(["react-flow__handle",`react-flow__handle-${e}`,"nodrag",C,u,{source:!p,target:p,connectable:o,connectablestart:r,connectableend:i,connecting:$,connectionindicator:o&&(r&&!y||i&&y)}]),onMouseDown:z,onTouchStart:z,onClick:N?R:void 0,ref:h,...f},c)});Wr.displayName="Handle";var nn=_.memo(Wr);const Zr=({data:t,isConnectable:e,targetPosition:n=L.Top,sourcePosition:o=L.Bottom})=>P.createElement(P.Fragment,null,P.createElement(nn,{type:"target",position:n,isConnectable:e}),t?.label,P.createElement(nn,{type:"source",position:o,isConnectable:e}));Zr.displayName="DefaultNode";var Hn=_.memo(Zr);const Kr=({data:t,isConnectable:e,sourcePosition:n=L.Bottom})=>P.createElement(P.Fragment,null,t?.label,P.createElement(nn,{type:"source",position:n,isConnectable:e}));Kr.displayName="InputNode";var qr=_.memo(Kr);const Gr=({data:t,isConnectable:e,targetPosition:n=L.Top})=>P.createElement(P.Fragment,null,P.createElement(nn,{type:"target",position:n,isConnectable:e}),t?.label);Gr.displayName="OutputNode";var Qr=_.memo(Gr);const no=()=>null;no.displayName="GroupNode";const vu=t=>({selectedNodes:t.getNodes().filter(e=>e.selected),selectedEdges:t.edges.filter(e=>e.selected)}),Be=t=>t.id;function _u(t,e){return ct(t.selectedNodes.map(Be),e.selectedNodes.map(Be))&&ct(t.selectedEdges.map(Be),e.selectedEdges.map(Be))}const Jr=_.memo(({onSelectionChange:t})=>{const e=nt(),{selectedNodes:n,selectedEdges:o}=j(vu,_u);return _.useEffect(()=>{const r={nodes:n,edges:o};t?.(r),e.getState().onSelectionChange?.(r)},[n,o,t]),null});Jr.displayName="SelectionListener";const Nu=t=>!!t.onSelectionChange;function ku({onSelectionChange:t}){const e=j(Nu);return t||e?P.createElement(Jr,{onSelectionChange:t}):null}const Cu=t=>({setNodes:t.setNodes,setEdges:t.setEdges,setDefaultNodesAndEdges:t.setDefaultNodesAndEdges,setMinZoom:t.setMinZoom,setMaxZoom:t.setMaxZoom,setTranslateExtent:t.setTranslateExtent,setNodeExtent:t.setNodeExtent,reset:t.reset});function jt(t,e){_.useEffect(()=>{typeof t<"u"&&e(t)},[t])}function U(t,e,n){_.useEffect(()=>{typeof e<"u"&&n({[t]:e})},[e])}const Mu=({nodes:t,edges:e,defaultNodes:n,defaultEdges:o,onConnect:r,onConnectStart:i,onConnectEnd:s,onClickConnectStart:a,onClickConnectEnd:c,nodesDraggable:u,nodesConnectable:l,nodesFocusable:d,edgesFocusable:f,edgesUpdatable:h,elevateNodesOnSelect:x,minZoom:p,maxZoom:S,nodeExtent:m,onNodesChange:N,onEdgesChange:C,elementsSelectable:y,connectionMode:$,snapGrid:T,snapToGrid:z,translateExtent:R,connectOnClick:I,defaultEdgeOptions:O,fitView:H,fitViewOptions:B,onNodesDelete:E,onEdgesDelete:g,onNodeDrag:v,onNodeDragStart:b,onNodeDragStop:M,onSelectionDrag:D,onSelectionDragStart:w,onSelectionDragStop:k,noPanClassName:A,nodeOrigin:V,rfId:X,autoPanOnConnect:F,autoPanOnNodeDrag:W,onError:Z,connectionRadius:K,isValidConnection:q,nodeDragThreshold:Q})=>{const{setNodes:J,setEdges:it,setDefaultNodesAndEdges:gt,setMinZoom:xt,setMaxZoom:tt,setTranslateExtent:G,setNodeExtent:st,reset:lt}=j(Cu,ct),Y=nt();return _.useEffect(()=>{const It=o?.map(zt=>({...zt,...O}));return gt(n,It),()=>{lt()}},[]),U("defaultEdgeOptions",O,Y.setState),U("connectionMode",$,Y.setState),U("onConnect",r,Y.setState),U("onConnectStart",i,Y.setState),U("onConnectEnd",s,Y.setState),U("onClickConnectStart",a,Y.setState),U("onClickConnectEnd",c,Y.setState),U("nodesDraggable",u,Y.setState),U("nodesConnectable",l,Y.setState),U("nodesFocusable",d,Y.setState),U("edgesFocusable",f,Y.setState),U("edgesUpdatable",h,Y.setState),U("elementsSelectable",y,Y.setState),U("elevateNodesOnSelect",x,Y.setState),U("snapToGrid",z,Y.setState),U("snapGrid",T,Y.setState),U("onNodesChange",N,Y.setState),U("onEdgesChange",C,Y.setState),U("connectOnClick",I,Y.setState),U("fitViewOnInit",H,Y.setState),U("fitViewOnInitOptions",B,Y.setState),U("onNodesDelete",E,Y.setState),U("onEdgesDelete",g,Y.setState),U("onNodeDrag",v,Y.setState),U("onNodeDragStart",b,Y.setState),U("onNodeDragStop",M,Y.setState),U("onSelectionDrag",D,Y.setState),U("onSelectionDragStart",w,Y.setState),U("onSelectionDragStop",k,Y.setState),U("noPanClassName",A,Y.setState),U("nodeOrigin",V,Y.setState),U("rfId",X,Y.setState),U("autoPanOnConnect",F,Y.setState),U("autoPanOnNodeDrag",W,Y.setState),U("onError",Z,Y.setState),U("connectionRadius",K,Y.setState),U("isValidConnection",q,Y.setState),U("nodeDragThreshold",Q,Y.setState),jt(t,J),jt(e,it),jt(p,xt),jt(S,tt),jt(R,G),jt(m,st),null},Ho={display:"none"},Au={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},jr="react-flow__node-desc",ti="react-flow__edge-desc",$u="react-flow__aria-live",Tu=t=>t.ariaLiveMessage;function Pu({rfId:t}){const e=j(Tu);return P.createElement("div",{id:`${$u}-${t}`,"aria-live":"assertive","aria-atomic":"true",style:Au},e)}function Du({rfId:t,disableKeyboardA11y:e}){return P.createElement(P.Fragment,null,P.createElement("div",{id:`${jr}-${t}`,style:Ho},"Press enter or space to select a node.",!e&&"You can then use the arrow keys to move the node around."," Press delete to remove it and escape to cancel."," "),P.createElement("div",{id:`${ti}-${t}`,style:Ho},"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel."),!e&&P.createElement(Pu,{rfId:t}))}var Ae=(t=null,e={actInsideInputWithModifier:!0})=>{const[n,o]=_.useState(!1),r=_.useRef(!1),i=_.useRef(new Set([])),[s,a]=_.useMemo(()=>{if(t!==null){const u=(Array.isArray(t)?t:[t]).filter(d=>typeof d=="string").map(d=>d.split("+")),l=u.reduce((d,f)=>d.concat(...f),[]);return[u,l]}return[[],[]]},[t]);return _.useEffect(()=>{const c=typeof document<"u"?document:null,u=e?.target||c;if(t!==null){const l=h=>{if(r.current=h.ctrlKey||h.metaKey||h.shiftKey,(!r.current||r.current&&!e.actInsideInputWithModifier)&&In(h))return!1;const p=Bo(h.code,a);i.current.add(h[p]),Oo(s,i.current,!1)&&(h.preventDefault(),o(!0))},d=h=>{if((!r.current||r.current&&!e.actInsideInputWithModifier)&&In(h))return!1;const p=Bo(h.code,a);Oo(s,i.current,!0)?(o(!1),i.current.clear()):i.current.delete(h[p]),h.key==="Meta"&&i.current.clear(),r.current=!1},f=()=>{i.current.clear(),o(!1)};return u?.addEventListener("keydown",l),u?.addEventListener("keyup",d),window.addEventListener("blur",f),()=>{u?.removeEventListener("keydown",l),u?.removeEventListener("keyup",d),window.removeEventListener("blur",f)}}},[t,o]),n};function Oo(t,e,n){return t.filter(o=>n||o.length===e.size).some(o=>o.every(r=>e.has(r)))}function Bo(t,e){return e.includes(t)?"code":"key"}function ei(t,e,n,o){if(!t.parentNode)return n;const r=e.get(t.parentNode),i=se(r,o);return ei(r,e,{x:(n.x??0)+i.x,y:(n.y??0)+i.y,z:(r[et]?.z??0)>(n.z??0)?r[et]?.z??0:n.z??0},o)}function ni(t,e,n){t.forEach(o=>{if(o.parentNode&&!t.has(o.parentNode))throw new Error(`Parent node ${o.parentNode} not found`);if(o.parentNode||n?.[o.id]){const{x:r,y:i,z:s}=ei(o,t,{...o.position,z:o[et]?.z??0},e);o.positionAbsolute={x:r,y:i},o[et].z=s,n?.[o.id]&&(o[et].isParent=!0)}})}function Sn(t,e,n,o){const r=new Map,i={},s=o?1e3:0;return t.forEach(a=>{const c=(ft(a.zIndex)?a.zIndex:0)+(a.selected?s:0),u=e.get(a.id),l={width:u?.width,height:u?.height,...a,positionAbsolute:{x:a.position.x,y:a.position.y}};a.parentNode&&(l.parentNode=a.parentNode,i[a.parentNode]=!0),Object.defineProperty(l,et,{enumerable:!1,value:{handleBounds:u?.[et]?.handleBounds,z:c}}),r.set(a.id,l)}),ni(r,n,i),r}function oi(t,e={}){const{getNodes:n,width:o,height:r,minZoom:i,maxZoom:s,d3Zoom:a,d3Selection:c,fitViewOnInitDone:u,fitViewOnInit:l,nodeOrigin:d}=t(),f=e.initial&&!u&&l;if(a&&c&&(f||!e.initial)){const x=n().filter(S=>{const m=e.includeHiddenNodes?S.width&&S.height:!S.hidden;return e.nodes?.length?m&&e.nodes.some(N=>N.id===S.id):m}),p=x.every(S=>S.width&&S.height);if(x.length>0&&p){const S=to(x,d),[m,N,C]=Fr(S,o,r,e.minZoom??i,e.maxZoom??s,e.padding??.1),y=Dt.translate(m,N).scale(C);return typeof e.duration=="number"&&e.duration>0?a.transform(Xt(c,e.duration),y):a.transform(c,y),!0}}return!1}function Ru(t,e){return t.forEach(n=>{const o=e.get(n.id);o&&e.set(o.id,{...o,[et]:o[et],selected:n.selected})}),new Map(e)}function Iu(t,e){return e.map(n=>{const o=t.find(r=>r.id===n.id);return o&&(n.selected=o.selected),n})}function Le({changedNodes:t,changedEdges:e,get:n,set:o}){const{nodeInternals:r,edges:i,onNodesChange:s,onEdgesChange:a,hasDefaultNodes:c,hasDefaultEdges:u}=n();t?.length&&(c&&o({nodeInternals:Ru(t,r)}),s?.(t)),e?.length&&(u&&o({edges:Iu(e,i)}),a?.(e))}const te=()=>{},zu={zoomIn:te,zoomOut:te,zoomTo:te,getZoom:()=>1,setViewport:te,getViewport:()=>({x:0,y:0,zoom:1}),fitView:()=>!1,setCenter:te,fitBounds:te,project:t=>t,viewportInitialized:!1},Hu=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection}),Ou=()=>{const t=nt(),{d3Zoom:e,d3Selection:n}=j(Hu,ct);return _.useMemo(()=>n&&e?{zoomIn:r=>e.scaleBy(Xt(n,r?.duration),1.2),zoomOut:r=>e.scaleBy(Xt(n,r?.duration),1/1.2),zoomTo:(r,i)=>e.scaleTo(Xt(n,i?.duration),r),getZoom:()=>t.getState().transform[2],setViewport:(r,i)=>{const[s,a,c]=t.getState().transform,u=Dt.translate(r.x??s,r.y??a).scale(r.zoom??c);e.transform(Xt(n,i?.duration),u)},getViewport:()=>{const[r,i,s]=t.getState().transform;return{x:r,y:i,zoom:s}},fitView:r=>oi(t.getState,r),setCenter:(r,i,s)=>{const{width:a,height:c,maxZoom:u}=t.getState(),l=typeof s?.zoom<"u"?s.zoom:u,d=a/2-r*l,f=c/2-i*l,h=Dt.translate(d,f).scale(l);e.transform(Xt(n,s?.duration),h)},fitBounds:(r,i)=>{const{width:s,height:a,minZoom:c,maxZoom:u}=t.getState(),[l,d,f]=Fr(r,s,a,c,u,i?.padding??.1),h=Dt.translate(l,d).scale(f);e.transform(Xt(n,i?.duration),h)},project:r=>{const{transform:i,snapToGrid:s,snapGrid:a}=t.getState();return Br(r,i,s,a)},viewportInitialized:!0}:zu,[e,n])};function ri(){const t=Ou(),e=nt(),n=_.useCallback(()=>e.getState().getNodes().map(p=>({...p})),[]),o=_.useCallback(p=>e.getState().nodeInternals.get(p),[]),r=_.useCallback(()=>{const{edges:p=[]}=e.getState();return p.map(S=>({...S}))},[]),i=_.useCallback(p=>{const{edges:S=[]}=e.getState();return S.find(m=>m.id===p)},[]),s=_.useCallback(p=>{const{getNodes:S,setNodes:m,hasDefaultNodes:N,onNodesChange:C}=e.getState(),y=S(),$=typeof p=="function"?p(y):p;if(N)m($);else if(C){const T=$.length===0?y.map(z=>({type:"remove",id:z.id})):$.map(z=>({item:z,type:"reset"}));C(T)}},[]),a=_.useCallback(p=>{const{edges:S=[],setEdges:m,hasDefaultEdges:N,onEdgesChange:C}=e.getState(),y=typeof p=="function"?p(S):p;if(N)m(y);else if(C){const $=y.length===0?S.map(T=>({type:"remove",id:T.id})):y.map(T=>({item:T,type:"reset"}));C($)}},[]),c=_.useCallback(p=>{const S=Array.isArray(p)?p:[p],{getNodes:m,setNodes:N,hasDefaultNodes:C,onNodesChange:y}=e.getState();if(C){const T=[...m(),...S];N(T)}else if(y){const $=S.map(T=>({item:T,type:"add"}));y($)}},[]),u=_.useCallback(p=>{const S=Array.isArray(p)?p:[p],{edges:m=[],setEdges:N,hasDefaultEdges:C,onEdgesChange:y}=e.getState();if(C)N([...m,...S]);else if(y){const $=S.map(T=>({item:T,type:"add"}));y($)}},[]),l=_.useCallback(()=>{const{getNodes:p,edges:S=[],transform:m}=e.getState(),[N,C,y]=m;return{nodes:p().map($=>({...$})),edges:S.map($=>({...$})),viewport:{x:N,y:C,zoom:y}}},[]),d=_.useCallback(({nodes:p,edges:S})=>{const{nodeInternals:m,getNodes:N,edges:C,hasDefaultNodes:y,hasDefaultEdges:$,onNodesDelete:T,onEdgesDelete:z,onNodesChange:R,onEdgesChange:I}=e.getState(),O=(p||[]).map(v=>v.id),H=(S||[]).map(v=>v.id),B=N().reduce((v,b)=>{const M=!O.includes(b.id)&&b.parentNode&&v.find(w=>w.id===b.parentNode);return(typeof b.deletable=="boolean"?b.deletable:!0)&&(O.includes(b.id)||M)&&v.push(b),v},[]),E=C.filter(v=>typeof v.deletable=="boolean"?v.deletable:!0),g=E.filter(v=>H.includes(v.id));if(B||g){const v=Vr(B,E),b=[...g,...v],M=b.reduce((D,w)=>(D.includes(w.id)||D.push(w.id),D),[]);if(($||y)&&($&&e.setState({edges:C.filter(D=>!M.includes(D.id))}),y&&(B.forEach(D=>{m.delete(D.id)}),e.setState({nodeInternals:new Map(m)}))),M.length>0&&(z?.(b),I&&I(M.map(D=>({id:D,type:"remove"})))),B.length>0&&(T?.(B),R)){const D=B.map(w=>({id:w.id,type:"remove"}));R(D)}}},[]),f=_.useCallback(p=>{const S=ru(p),m=S?null:e.getState().nodeInternals.get(p.id);return[S?p:$o(m),m,S]},[]),h=_.useCallback((p,S=!0,m)=>{const[N,C,y]=f(p);return N?(m||e.getState().getNodes()).filter($=>{if(!y&&($.id===C.id||!$.positionAbsolute))return!1;const T=$o($),z=Rn(T,N);return S&&z>0||z>=p.width*p.height}):[]},[]),x=_.useCallback((p,S,m=!0)=>{const[N]=f(p);if(!N)return!1;const C=Rn(N,S);return m&&C>0||C>=p.width*p.height},[]);return _.useMemo(()=>({...t,getNodes:n,getNode:o,getEdges:r,getEdge:i,setNodes:s,setEdges:a,addNodes:c,addEdges:u,toObject:l,deleteElements:d,getIntersectingNodes:h,isNodeIntersecting:x}),[t,n,o,r,i,s,a,c,u,l,d,h,x])}const Bu={actInsideInputWithModifier:!1};var Lu=({deleteKeyCode:t,multiSelectionKeyCode:e})=>{const n=nt(),{deleteElements:o}=ri(),r=Ae(t,Bu),i=Ae(e);_.useEffect(()=>{if(r){const{edges:s,getNodes:a}=n.getState(),c=a().filter(l=>l.selected),u=s.filter(l=>l.selected);o({nodes:c,edges:u}),n.setState({nodesSelectionActive:!1})}},[r]),_.useEffect(()=>{n.setState({multiSelectionActive:i})},[i])};function Vu(t){const e=nt();_.useEffect(()=>{let n;const o=()=>{if(!t.current)return;const r=Wn(t.current);(r.height===0||r.width===0)&&e.getState().onError?.("004",kt.error004()),e.setState({width:r.width||500,height:r.height||500})};return o(),window.addEventListener("resize",o),t.current&&(n=new ResizeObserver(()=>o()),n.observe(t.current)),()=>{window.removeEventListener("resize",o),n&&t.current&&n.unobserve(t.current)}},[])}const oo={position:"absolute",width:"100%",height:"100%",top:0,left:0},Fu=(t,e)=>t.x!==e.x||t.y!==e.y||t.zoom!==e.k,Ve=t=>({x:t.x,y:t.y,zoom:t.k}),ee=(t,e)=>t.target.closest(`.${e}`),Lo=(t,e)=>e===2&&Array.isArray(t)&&t.includes(2),Vo=t=>{const e=t.ctrlKey&&Je()?10:1;return-t.deltaY*(t.deltaMode===1?.05:t.deltaMode?1:.002)*e},Xu=t=>({d3Zoom:t.d3Zoom,d3Selection:t.d3Selection,d3ZoomHandler:t.d3ZoomHandler,userSelectionActive:t.userSelectionActive}),Yu=({onMove:t,onMoveStart:e,onMoveEnd:n,onPaneContextMenu:o,zoomOnScroll:r=!0,zoomOnPinch:i=!0,panOnScroll:s=!1,panOnScrollSpeed:a=.5,panOnScrollMode:c=Ut.Free,zoomOnDoubleClick:u=!0,elementsSelectable:l,panOnDrag:d=!0,defaultViewport:f,translateExtent:h,minZoom:x,maxZoom:p,zoomActivationKeyCode:S,preventScrolling:m=!0,children:N,noWheelClassName:C,noPanClassName:y})=>{const $=_.useRef(),T=nt(),z=_.useRef(!1),R=_.useRef(!1),I=_.useRef(null),O=_.useRef({x:0,y:0,zoom:0}),{d3Zoom:H,d3Selection:B,d3ZoomHandler:E,userSelectionActive:g}=j(Xu,ct),v=Ae(S),b=_.useRef(0),M=_.useRef(!1),D=_.useRef();return Vu(I),_.useEffect(()=>{if(I.current){const w=I.current.getBoundingClientRect(),k=ql().scaleExtent([x,p]).translateExtent(h),A=pt(I.current).call(k),V=Dt.translate(f.x,f.y).scale(de(f.zoom,x,p)),X=[[0,0],[w.width,w.height]],F=k.constrain()(V,X,h);k.transform(A,F),k.wheelDelta(Vo),T.setState({d3Zoom:k,d3Selection:A,d3ZoomHandler:A.on("wheel.zoom"),transform:[F.x,F.y,F.k],domNode:I.current.closest(".react-flow")})}},[]),_.useEffect(()=>{B&&H&&(s&&!v&&!g?B.on("wheel.zoom",w=>{if(ee(w,C))return!1;w.preventDefault(),w.stopImmediatePropagation();const k=B.property("__zoom").k||1,A=Je();if(w.ctrlKey&&i&&A){const Q=bt(w),J=Vo(w),it=k*Math.pow(2,J);H.scaleTo(B,it,Q,w);return}const V=w.deltaMode===1?20:1;let X=c===Ut.Vertical?0:w.deltaX*V,F=c===Ut.Horizontal?0:w.deltaY*V;!A&&w.shiftKey&&c!==Ut.Vertical&&(X=w.deltaY*V,F=0),H.translateBy(B,-(X/k)*a,-(F/k)*a,{internal:!0});const W=Ve(B.property("__zoom")),{onViewportChangeStart:Z,onViewportChange:K,onViewportChangeEnd:q}=T.getState();clearTimeout(D.current),M.current||(M.current=!0,e?.(w,W),Z?.(W)),M.current&&(t?.(w,W),K?.(W),D.current=setTimeout(()=>{n?.(w,W),q?.(W),M.current=!1},150))},{passive:!1}):typeof E<"u"&&B.on("wheel.zoom",function(w,k){if(!m||ee(w,C))return null;w.preventDefault(),E.call(this,w,k)},{passive:!1}))},[g,s,c,B,H,E,v,i,m,C,e,t,n]),_.useEffect(()=>{H&&H.on("start",w=>{if(!w.sourceEvent||w.sourceEvent.internal)return null;b.current=w.sourceEvent?.button;const{onViewportChangeStart:k}=T.getState(),A=Ve(w.transform);z.current=!0,O.current=A,w.sourceEvent?.type==="mousedown"&&T.setState({paneDragging:!0}),k?.(A),e?.(w.sourceEvent,A)})},[H,e]),_.useEffect(()=>{H&&(g&&!z.current?H.on("zoom",null):g||H.on("zoom",w=>{const{onViewportChange:k}=T.getState();if(T.setState({transform:[w.transform.x,w.transform.y,w.transform.k]}),R.current=!!(o&&Lo(d,b.current??0)),(t||k)&&!w.sourceEvent?.internal){const A=Ve(w.transform);k?.(A),t?.(w.sourceEvent,A)}}))},[g,H,t,d,o]),_.useEffect(()=>{H&&H.on("end",w=>{if(!w.sourceEvent||w.sourceEvent.internal)return null;const{onViewportChangeEnd:k}=T.getState();if(z.current=!1,T.setState({paneDragging:!1}),o&&Lo(d,b.current??0)&&!R.current&&o(w.sourceEvent),R.current=!1,(n||k)&&Fu(O.current,w.transform)){const A=Ve(w.transform);O.current=A,clearTimeout($.current),$.current=setTimeout(()=>{k?.(A),n?.(w.sourceEvent,A)},s?150:0)}})},[H,s,d,n,o]),_.useEffect(()=>{H&&H.filter(w=>{const k=v||r,A=i&&w.ctrlKey;if((d===!0||Array.isArray(d)&&d.includes(1))&&w.button===1&&w.type==="mousedown"&&(ee(w,"react-flow__node")||ee(w,"react-flow__edge")))return!0;if(!d&&!k&&!s&&!u&&!i||g||!u&&w.type==="dblclick"||ee(w,C)&&w.type==="wheel"||ee(w,y)&&(!s&&w.type!=="wheel"||s&&w.type==="wheel")||!i&&w.ctrlKey&&w.type==="wheel"||!k&&!s&&!A&&w.type==="wheel"||!d&&(w.type==="mousedown"||w.type==="touchstart")||Array.isArray(d)&&!d.includes(w.button)&&(w.type==="mousedown"||w.type==="touchstart"))return!1;const V=Array.isArray(d)&&d.includes(w.button)||!w.button||w.button<=1;return(!w.ctrlKey||w.type==="wheel")&&V})},[g,H,r,i,s,u,d,l,v]),P.createElement("div",{className:"react-flow__renderer",ref:I,style:oo},N)},Uu=t=>({userSelectionActive:t.userSelectionActive,userSelectionRect:t.userSelectionRect});function Wu(){const{userSelectionActive:t,userSelectionRect:e}=j(Uu,ct);return t&&e?P.createElement("div",{className:"react-flow__selection react-flow__container",style:{width:e.width,height:e.height,transform:`translate(${e.x}px, ${e.y}px)`}}):null}function Fo(t,e){const n=t.find(o=>o.id===e.parentNode);if(n){const o=e.position.x+e.width-n.width,r=e.position.y+e.height-n.height;if(o>0||r>0||e.position.x<0||e.position.y<0){if(n.style={...n.style},n.style.width=n.style.width??n.width,n.style.height=n.style.height??n.height,o>0&&(n.style.width+=o),r>0&&(n.style.height+=r),e.position.x<0){const i=Math.abs(e.position.x);n.position.x=n.position.x-i,n.style.width+=i,e.position.x=0}if(e.position.y<0){const i=Math.abs(e.position.y);n.position.y=n.position.y-i,n.style.height+=i,e.position.y=0}n.width=n.style.width,n.height=n.style.height}}}function Zu(t,e){if(t.some(o=>o.type==="reset"))return t.filter(o=>o.type==="reset").map(o=>o.item);const n=t.filter(o=>o.type==="add").map(o=>o.item);return e.reduce((o,r)=>{const i=t.filter(a=>a.id===r.id);if(i.length===0)return o.push(r),o;const s={...r};for(const a of i)if(a)switch(a.type){case"select":{s.selected=a.selected;break}case"position":{typeof a.position<"u"&&(s.position=a.position),typeof a.positionAbsolute<"u"&&(s.positionAbsolute=a.positionAbsolute),typeof a.dragging<"u"&&(s.dragging=a.dragging),s.expandParent&&Fo(o,s);break}case"dimensions":{typeof a.dimensions<"u"&&(s.width=a.dimensions.width,s.height=a.dimensions.height),typeof a.updateStyle<"u"&&(s.style={...s.style||{},...a.dimensions}),typeof a.resizing=="boolean"&&(s.resizing=a.resizing),s.expandParent&&Fo(o,s);break}case"remove":return o}return o.push(s),o},n)}function Ku(t,e){return Zu(t,e)}const Tt=(t,e)=>({id:t,type:"select",selected:e});function oe(t,e){return t.reduce((n,o)=>{const r=e.includes(o.id);return!o.selected&&r?(o.selected=!0,n.push(Tt(o.id,!0))):o.selected&&!r&&(o.selected=!1,n.push(Tt(o.id,!1))),n},[])}const En=(t,e)=>n=>{n.target===e.current&&t?.(n)},qu=t=>({userSelectionActive:t.userSelectionActive,elementsSelectable:t.elementsSelectable,dragging:t.paneDragging}),ii=_.memo(({isSelecting:t,selectionMode:e=Ce.Full,panOnDrag:n,onSelectionStart:o,onSelectionEnd:r,onPaneClick:i,onPaneContextMenu:s,onPaneScroll:a,onPaneMouseEnter:c,onPaneMouseMove:u,onPaneMouseLeave:l,children:d})=>{const f=_.useRef(null),h=nt(),x=_.useRef(0),p=_.useRef(0),S=_.useRef(),{userSelectionActive:m,elementsSelectable:N,dragging:C}=j(qu,ct),y=()=>{h.setState({userSelectionActive:!1,userSelectionRect:null}),x.current=0,p.current=0},$=E=>{i?.(E),h.getState().resetSelectedElements(),h.setState({nodesSelectionActive:!1})},T=E=>{if(Array.isArray(n)&&n?.includes(2)){E.preventDefault();return}s?.(E)},z=a?E=>a(E):void 0,R=E=>{const{resetSelectedElements:g,domNode:v}=h.getState();if(S.current=v?.getBoundingClientRect(),!N||!t||E.button!==0||E.target!==f.current||!S.current)return;const{x:b,y:M}=Rt(E,S.current);g(),h.setState({userSelectionRect:{width:0,height:0,startX:b,startY:M,x:b,y:M}}),o?.(E)},I=E=>{const{userSelectionRect:g,nodeInternals:v,edges:b,transform:M,onNodesChange:D,onEdgesChange:w,nodeOrigin:k,getNodes:A}=h.getState();if(!t||!S.current||!g)return;h.setState({userSelectionActive:!0,nodesSelectionActive:!1});const V=Rt(E,S.current),X=g.startX??0,F=g.startY??0,W={...g,x:V.x<X?V.x:X,y:V.y<F?V.y:F,width:Math.abs(V.x-X),height:Math.abs(V.y-F)},Z=A(),K=Lr(v,W,M,e===Ce.Partial,!0,k),q=Vr(K,b).map(J=>J.id),Q=K.map(J=>J.id);if(x.current!==Q.length){x.current=Q.length;const J=oe(Z,Q);J.length&&D?.(J)}if(p.current!==q.length){p.current=q.length;const J=oe(b,q);J.length&&w?.(J)}h.setState({userSelectionRect:W})},O=E=>{if(E.button!==0)return;const{userSelectionRect:g}=h.getState();!m&&g&&E.target===f.current&&$?.(E),h.setState({nodesSelectionActive:x.current>0}),y(),r?.(E)},H=E=>{m&&(h.setState({nodesSelectionActive:x.current>0}),r?.(E)),y()},B=N&&(t||m);return P.createElement("div",{className:ht(["react-flow__pane",{dragging:C,selection:t}]),onClick:B?void 0:En($,f),onContextMenu:En(T,f),onWheel:En(z,f),onMouseEnter:B?void 0:c,onMouseDown:B?R:void 0,onMouseMove:B?I:u,onMouseUp:B?O:void 0,onMouseLeave:B?H:l,ref:f,style:oo},d,P.createElement(Wu,null))});ii.displayName="Pane";function si(t,e){if(!t.parentNode)return!1;const n=e.get(t.parentNode);return n?n.selected?!0:si(n,e):!1}function Xo(t,e,n){let o=t;do{if(o?.matches(e))return!0;if(o===n.current)return!1;o=o.parentElement}while(o);return!1}function Gu(t,e,n,o){return Array.from(t.values()).filter(r=>(r.selected||r.id===o)&&(!r.parentNode||!si(r,t))&&(r.draggable||e&&typeof r.draggable>"u")).map(r=>({id:r.id,position:r.position||{x:0,y:0},positionAbsolute:r.positionAbsolute||{x:0,y:0},distance:{x:n.x-(r.positionAbsolute?.x??0),y:n.y-(r.positionAbsolute?.y??0)},delta:{x:0,y:0},extent:r.extent,parentNode:r.parentNode,width:r.width,height:r.height,expandParent:r.expandParent}))}function Qu(t,e){return!e||e==="parent"?e:[e[0],[e[1][0]-(t.width||0),e[1][1]-(t.height||0)]]}function ai(t,e,n,o,r=[0,0],i){const s=Qu(t,t.extent||o);let a=s;if(t.extent==="parent"&&!t.expandParent)if(t.parentNode&&t.width&&t.height){const l=n.get(t.parentNode),{x:d,y:f}=se(l,r).positionAbsolute;a=l&&ft(d)&&ft(f)&&ft(l.width)&&ft(l.height)?[[d+t.width*r[0],f+t.height*r[1]],[d+l.width-t.width+t.width*r[0],f+l.height-t.height+t.height*r[1]]]:a}else i?.("005",kt.error005()),a=s;else if(t.extent&&t.parentNode&&t.extent!=="parent"){const l=n.get(t.parentNode),{x:d,y:f}=se(l,r).positionAbsolute;a=[[t.extent[0][0]+d,t.extent[0][1]+f],[t.extent[1][0]+d,t.extent[1][1]+f]]}let c={x:0,y:0};if(t.parentNode){const l=n.get(t.parentNode);c=se(l,r).positionAbsolute}const u=a&&a!=="parent"?Zn(e,a):e;return{position:{x:u.x-c.x,y:u.y-c.y},positionAbsolute:u}}function vn({nodeId:t,dragItems:e,nodeInternals:n}){const o=e.map(r=>({...n.get(r.id),position:r.position,positionAbsolute:r.positionAbsolute}));return[t?o.find(r=>r.id===t):o[0],o]}const Yo=(t,e,n,o)=>{const r=e.querySelectorAll(t);if(!r||!r.length)return null;const i=Array.from(r),s=e.getBoundingClientRect(),a={x:s.width*o[0],y:s.height*o[1]};return i.map(c=>{const u=c.getBoundingClientRect();return{id:c.getAttribute("data-handleid"),position:c.getAttribute("data-handlepos"),x:(u.left-s.left-a.x)/n,y:(u.top-s.top-a.y)/n,...Wn(c)}})};function xe(t,e,n){return n===void 0?n:o=>{const r=e().nodeInternals.get(t);r&&n(o,{...r})}}function On({id:t,store:e,unselect:n=!1,nodeRef:o}){const{addSelectedNodes:r,unselectNodesAndEdges:i,multiSelectionActive:s,nodeInternals:a,onError:c}=e.getState(),u=a.get(t);if(!u){c?.("012",kt.error012(t));return}e.setState({nodesSelectionActive:!1}),u.selected?(n||u.selected&&s)&&(i({nodes:[u],edges:[]}),requestAnimationFrame(()=>o?.current?.blur())):r([t])}function Ju(){const t=nt();return _.useCallback(({sourceEvent:n})=>{const{transform:o,snapGrid:r,snapToGrid:i}=t.getState(),s=n.touches?n.touches[0].clientX:n.clientX,a=n.touches?n.touches[0].clientY:n.clientY,c={x:(s-o[0])/o[2],y:(a-o[1])/o[2]};return{xSnapped:i?r[0]*Math.round(c.x/r[0]):c.x,ySnapped:i?r[1]*Math.round(c.y/r[1]):c.y,...c}},[])}function _n(t){return(e,n,o)=>t?.(e,o)}function ci({nodeRef:t,disabled:e=!1,noDragClassName:n,handleSelector:o,nodeId:r,isSelectable:i,selectNodesOnDrag:s}){const a=nt(),[c,u]=_.useState(!1),l=_.useRef([]),d=_.useRef({x:null,y:null}),f=_.useRef(0),h=_.useRef(null),x=_.useRef({x:0,y:0}),p=_.useRef(null),S=_.useRef(!1),m=_.useRef(!1),N=Ju();return _.useEffect(()=>{if(t?.current){const C=pt(t.current),y=({x:z,y:R})=>{const{nodeInternals:I,onNodeDrag:O,onSelectionDrag:H,updateNodePositions:B,nodeExtent:E,snapGrid:g,snapToGrid:v,nodeOrigin:b,onError:M}=a.getState();d.current={x:z,y:R};let D=!1,w={x:0,y:0,x2:0,y2:0};if(l.current.length>1&&E){const A=to(l.current,b);w=Kn(A)}if(l.current=l.current.map(A=>{const V={x:z-A.distance.x,y:R-A.distance.y};v&&(V.x=g[0]*Math.round(V.x/g[0]),V.y=g[1]*Math.round(V.y/g[1]));const X=[[E[0][0],E[0][1]],[E[1][0],E[1][1]]];l.current.length>1&&E&&!A.extent&&(X[0][0]=A.positionAbsolute.x-w.x+E[0][0],X[1][0]=A.positionAbsolute.x+(A.width??0)-w.x2+E[1][0],X[0][1]=A.positionAbsolute.y-w.y+E[0][1],X[1][1]=A.positionAbsolute.y+(A.height??0)-w.y2+E[1][1]);const F=ai(A,V,I,X,b,M);return D=D||A.position.x!==F.position.x||A.position.y!==F.position.y,A.position=F.position,A.positionAbsolute=F.positionAbsolute,A}),!D)return;B(l.current,!0,!0),u(!0);const k=r?O:_n(H);if(k&&p.current){const[A,V]=vn({nodeId:r,dragItems:l.current,nodeInternals:I});k(p.current,A,V)}},$=()=>{if(!h.current)return;const[z,R]=Pr(x.current,h.current);if(z!==0||R!==0){const{transform:I,panBy:O}=a.getState();d.current.x=(d.current.x??0)-z/I[2],d.current.y=(d.current.y??0)-R/I[2],O({x:z,y:R})&&y(d.current)}f.current=requestAnimationFrame($)},T=z=>{const{nodeInternals:R,multiSelectionActive:I,nodesDraggable:O,unselectNodesAndEdges:H,onNodeDragStart:B,onSelectionDragStart:E}=a.getState();m.current=!0;const g=r?B:_n(E);(!s||!i)&&!I&&r&&(R.get(r)?.selected||H()),r&&i&&s&&On({id:r,store:a,nodeRef:t});const v=N(z);if(d.current=v,l.current=Gu(R,O,v,r),g&&l.current){const[b,M]=vn({nodeId:r,dragItems:l.current,nodeInternals:R});g(z.sourceEvent,b,M)}};if(e)C.on(".drag",null);else{const z=ic().on("start",R=>{const{domNode:I,nodeDragThreshold:O}=a.getState();O===0&&T(R);const H=N(R);d.current=H,h.current=I?.getBoundingClientRect()||null,x.current=Rt(R.sourceEvent,h.current)}).on("drag",R=>{const I=N(R),{autoPanOnNodeDrag:O,nodeDragThreshold:H}=a.getState();if(!S.current&&m.current&&O&&(S.current=!0,$()),!m.current){const B=I.xSnapped-(d?.current?.x??0),E=I.ySnapped-(d?.current?.y??0);Math.sqrt(B*B+E*E)>H&&T(R)}(d.current.x!==I.xSnapped||d.current.y!==I.ySnapped)&&l.current&&m.current&&(p.current=R.sourceEvent,x.current=Rt(R.sourceEvent,h.current),y(I))}).on("end",R=>{if(m.current&&(u(!1),S.current=!1,m.current=!1,cancelAnimationFrame(f.current),l.current)){const{updateNodePositions:I,nodeInternals:O,onNodeDragStop:H,onSelectionDragStop:B}=a.getState(),E=r?H:_n(B);if(I(l.current,!1,!1),E){const[g,v]=vn({nodeId:r,dragItems:l.current,nodeInternals:O});E(R.sourceEvent,g,v)}}}).filter(R=>{const I=R.target;return!R.button&&(!n||!Xo(I,`.${n}`,t))&&(!o||Xo(I,o,t))});return C.call(z),()=>{C.on(".drag",null)}}}},[t,e,n,o,i,a,r,s,N]),c}function li(){const t=nt();return _.useCallback(n=>{const{nodeInternals:o,nodeExtent:r,updateNodePositions:i,getNodes:s,snapToGrid:a,snapGrid:c,onError:u,nodesDraggable:l}=t.getState(),d=s().filter(N=>N.selected&&(N.draggable||l&&typeof N.draggable>"u")),f=a?c[0]:5,h=a?c[1]:5,x=n.isShiftPressed?4:1,p=n.x*f*x,S=n.y*h*x,m=d.map(N=>{if(N.positionAbsolute){const C={x:N.positionAbsolute.x+p,y:N.positionAbsolute.y+S};a&&(C.x=c[0]*Math.round(C.x/c[0]),C.y=c[1]*Math.round(C.y/c[1]));const{positionAbsolute:y,position:$}=ai(N,C,o,r,void 0,u);N.position=$,N.positionAbsolute=y}return N});i(m,!0,!1)},[])}const ae={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}};var we=t=>{const e=({id:n,type:o,data:r,xPos:i,yPos:s,xPosOrigin:a,yPosOrigin:c,selected:u,onClick:l,onMouseEnter:d,onMouseMove:f,onMouseLeave:h,onContextMenu:x,onDoubleClick:p,style:S,className:m,isDraggable:N,isSelectable:C,isConnectable:y,isFocusable:$,selectNodesOnDrag:T,sourcePosition:z,targetPosition:R,hidden:I,resizeObserver:O,dragHandle:H,zIndex:B,isParent:E,noDragClassName:g,noPanClassName:v,initialized:b,disableKeyboardA11y:M,ariaLabel:D,rfId:w})=>{const k=nt(),A=_.useRef(null),V=_.useRef(z),X=_.useRef(R),F=_.useRef(o),W=C||N||l||d||f||h,Z=li(),K=xe(n,k.getState,d),q=xe(n,k.getState,f),Q=xe(n,k.getState,h),J=xe(n,k.getState,x),it=xe(n,k.getState,p),gt=G=>{const{nodeDragThreshold:st}=k.getState();if(C&&(!T||!N||st>0)&&On({id:n,store:k,nodeRef:A}),l){const lt=k.getState().nodeInternals.get(n);lt&&l(G,{...lt})}},xt=G=>{if(!In(G))if(Rr.includes(G.key)&&C){const st=G.key==="Escape";On({id:n,store:k,unselect:st,nodeRef:A})}else!M&&N&&u&&Object.prototype.hasOwnProperty.call(ae,G.key)&&(k.setState({ariaLiveMessage:`Moved selected node ${G.key.replace("Arrow","").toLowerCase()}. New position, x: ${~~i}, y: ${~~s}`}),Z({x:ae[G.key].x,y:ae[G.key].y,isShiftPressed:G.shiftKey}))};_.useEffect(()=>{if(A.current&&!I){const G=A.current;return O?.observe(G),()=>O?.unobserve(G)}},[I]),_.useEffect(()=>{const G=F.current!==o,st=V.current!==z,lt=X.current!==R;A.current&&(G||st||lt)&&(G&&(F.current=o),st&&(V.current=z),lt&&(X.current=R),k.getState().updateNodeDimensions([{id:n,nodeElement:A.current,forceUpdate:!0}]))},[n,o,z,R]);const tt=ci({nodeRef:A,disabled:I||!N,noDragClassName:g,handleSelector:H,nodeId:n,isSelectable:C,selectNodesOnDrag:T});return I?null:P.createElement("div",{className:ht(["react-flow__node",`react-flow__node-${o}`,{[v]:N},m,{selected:u,selectable:C,parent:E,dragging:tt}]),ref:A,style:{zIndex:B,transform:`translate(${a}px,${c}px)`,pointerEvents:W?"all":"none",visibility:b?"visible":"hidden",...S},"data-id":n,"data-testid":`rf__node-${n}`,onMouseEnter:K,onMouseMove:q,onMouseLeave:Q,onContextMenu:J,onClick:gt,onDoubleClick:it,onKeyDown:$?xt:void 0,tabIndex:$?0:void 0,role:$?"button":void 0,"aria-describedby":M?void 0:`${jr}-${w}`,"aria-label":D},P.createElement(uu,{value:n},P.createElement(t,{id:n,data:r,type:o,xPos:i,yPos:s,selected:u,isConnectable:y,sourcePosition:z,targetPosition:R,dragging:tt,dragHandle:H,zIndex:B})))};return e.displayName="NodeWrapper",_.memo(e)};const ju=t=>{const e=t.getNodes().filter(n=>n.selected);return{...to(e,t.nodeOrigin),transformString:`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`,userSelectionActive:t.userSelectionActive}};function td({onSelectionContextMenu:t,noPanClassName:e,disableKeyboardA11y:n}){const o=nt(),{width:r,height:i,x:s,y:a,transformString:c,userSelectionActive:u}=j(ju,ct),l=li(),d=_.useRef(null);if(_.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),ci({nodeRef:d}),u||!r||!i)return null;const f=t?x=>{const p=o.getState().getNodes().filter(S=>S.selected);t(x,p)}:void 0,h=x=>{Object.prototype.hasOwnProperty.call(ae,x.key)&&l({x:ae[x.key].x,y:ae[x.key].y,isShiftPressed:x.shiftKey})};return P.createElement("div",{className:ht(["react-flow__nodesselection","react-flow__container",e]),style:{transform:c}},P.createElement("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:f,tabIndex:n?void 0:-1,onKeyDown:n?void 0:h,style:{width:r,height:i,top:a,left:s}}))}var ed=_.memo(td);const nd=t=>t.nodesSelectionActive,ui=({children:t,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,deleteKeyCode:a,onMove:c,onMoveStart:u,onMoveEnd:l,selectionKeyCode:d,selectionOnDrag:f,selectionMode:h,onSelectionStart:x,onSelectionEnd:p,multiSelectionKeyCode:S,panActivationKeyCode:m,zoomActivationKeyCode:N,elementsSelectable:C,zoomOnScroll:y,zoomOnPinch:$,panOnScroll:T,panOnScrollSpeed:z,panOnScrollMode:R,zoomOnDoubleClick:I,panOnDrag:O,defaultViewport:H,translateExtent:B,minZoom:E,maxZoom:g,preventScrolling:v,onSelectionContextMenu:b,noWheelClassName:M,noPanClassName:D,disableKeyboardA11y:w})=>{const k=j(nd),A=Ae(d),X=Ae(m)||O,F=A||f&&X!==!0;return Lu({deleteKeyCode:a,multiSelectionKeyCode:S}),P.createElement(Yu,{onMove:c,onMoveStart:u,onMoveEnd:l,onPaneContextMenu:i,elementsSelectable:C,zoomOnScroll:y,zoomOnPinch:$,panOnScroll:T,panOnScrollSpeed:z,panOnScrollMode:R,zoomOnDoubleClick:I,panOnDrag:!A&&X,defaultViewport:H,translateExtent:B,minZoom:E,maxZoom:g,zoomActivationKeyCode:N,preventScrolling:v,noWheelClassName:M,noPanClassName:D},P.createElement(ii,{onSelectionStart:x,onSelectionEnd:p,onPaneClick:e,onPaneMouseEnter:n,onPaneMouseMove:o,onPaneMouseLeave:r,onPaneContextMenu:i,onPaneScroll:s,panOnDrag:X,isSelecting:!!F,selectionMode:h},t,k&&P.createElement(ed,{onSelectionContextMenu:b,noPanClassName:D,disableKeyboardA11y:w})))};ui.displayName="FlowRenderer";var od=_.memo(ui);function rd(t){return j(_.useCallback(n=>t?Lr(n.nodeInternals,{x:0,y:0,width:n.width,height:n.height},n.transform,!0):n.getNodes(),[t]))}function id(t){const e={input:we(t.input||qr),default:we(t.default||Hn),output:we(t.output||Qr),group:we(t.group||no)},n={},o=Object.keys(t).filter(r=>!["input","default","output","group"].includes(r)).reduce((r,i)=>(r[i]=we(t[i]||Hn),r),n);return{...e,...o}}const sd=({x:t,y:e,width:n,height:o,origin:r})=>!n||!o?{x:t,y:e}:r[0]<0||r[1]<0||r[0]>1||r[1]>1?{x:t,y:e}:{x:t-n*r[0],y:e-o*r[1]},ad=t=>({nodesDraggable:t.nodesDraggable,nodesConnectable:t.nodesConnectable,nodesFocusable:t.nodesFocusable,elementsSelectable:t.elementsSelectable,updateNodeDimensions:t.updateNodeDimensions,onError:t.onError}),di=t=>{const{nodesDraggable:e,nodesConnectable:n,nodesFocusable:o,elementsSelectable:r,updateNodeDimensions:i,onError:s}=j(ad,ct),a=rd(t.onlyRenderVisibleElements),c=_.useRef(),u=_.useMemo(()=>{if(typeof ResizeObserver>"u")return null;const l=new ResizeObserver(d=>{const f=d.map(h=>({id:h.target.getAttribute("data-id"),nodeElement:h.target,forceUpdate:!0}));i(f)});return c.current=l,l},[]);return _.useEffect(()=>()=>{c?.current?.disconnect()},[]),P.createElement("div",{className:"react-flow__nodes",style:oo},a.map(l=>{let d=l.type||"default";t.nodeTypes[d]||(s?.("003",kt.error003(d)),d="default");const f=t.nodeTypes[d]||t.nodeTypes.default,h=!!(l.draggable||e&&typeof l.draggable>"u"),x=!!(l.selectable||r&&typeof l.selectable>"u"),p=!!(l.connectable||n&&typeof l.connectable>"u"),S=!!(l.focusable||o&&typeof l.focusable>"u"),m=t.nodeExtent?Zn(l.positionAbsolute,t.nodeExtent):l.positionAbsolute,N=m?.x??0,C=m?.y??0,y=sd({x:N,y:C,width:l.width??0,height:l.height??0,origin:t.nodeOrigin});return P.createElement(f,{key:l.id,id:l.id,className:l.className,style:l.style,type:d,data:l.data,sourcePosition:l.sourcePosition||L.Bottom,targetPosition:l.targetPosition||L.Top,hidden:l.hidden,xPos:N,yPos:C,xPosOrigin:y.x,yPosOrigin:y.y,selectNodesOnDrag:t.selectNodesOnDrag,onClick:t.onNodeClick,onMouseEnter:t.onNodeMouseEnter,onMouseMove:t.onNodeMouseMove,onMouseLeave:t.onNodeMouseLeave,onContextMenu:t.onNodeContextMenu,onDoubleClick:t.onNodeDoubleClick,selected:!!l.selected,isDraggable:h,isSelectable:x,isConnectable:p,isFocusable:S,resizeObserver:u,dragHandle:l.dragHandle,zIndex:l[et]?.z??0,isParent:!!l[et]?.isParent,noDragClassName:t.noDragClassName,noPanClassName:t.noPanClassName,initialized:!!l.width&&!!l.height,rfId:t.rfId,disableKeyboardA11y:t.disableKeyboardA11y,ariaLabel:l.ariaLabel})}))};di.displayName="NodeRenderer";var cd=_.memo(di);const ld=(t,e,n)=>n===L.Left?t-e:n===L.Right?t+e:t,ud=(t,e,n)=>n===L.Top?t-e:n===L.Bottom?t+e:t,Uo="react-flow__edgeupdater",Wo=({position:t,centerX:e,centerY:n,radius:o=10,onMouseDown:r,onMouseEnter:i,onMouseOut:s,type:a})=>P.createElement("circle",{onMouseDown:r,onMouseEnter:i,onMouseOut:s,className:ht([Uo,`${Uo}-${a}`]),cx:ld(e,o,t),cy:ud(n,o,t),r:o,stroke:"transparent",fill:"transparent"}),dd=()=>!0;var ne=t=>{const e=({id:n,className:o,type:r,data:i,onClick:s,onEdgeDoubleClick:a,selected:c,animated:u,label:l,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:p,style:S,source:m,target:N,sourceX:C,sourceY:y,targetX:$,targetY:T,sourcePosition:z,targetPosition:R,elementsSelectable:I,hidden:O,sourceHandleId:H,targetHandleId:B,onContextMenu:E,onMouseEnter:g,onMouseMove:v,onMouseLeave:b,edgeUpdaterRadius:M,onEdgeUpdate:D,onEdgeUpdateStart:w,onEdgeUpdateEnd:k,markerEnd:A,markerStart:V,rfId:X,ariaLabel:F,isFocusable:W,isUpdatable:Z,pathOptions:K,interactionWidth:q})=>{const Q=_.useRef(null),[J,it]=_.useState(!1),[gt,xt]=_.useState(!1),tt=nt(),G=_.useMemo(()=>`url(#${zn(V,X)})`,[V,X]),st=_.useMemo(()=>`url(#${zn(A,X)})`,[A,X]);if(O)return null;const lt=ot=>{const{edges:dt,addSelectedEdges:Bt,unselectNodesAndEdges:Lt,multiSelectionActive:Jt}=tt.getState(),wt=dt.find(Vt=>Vt.id===n);wt&&(I&&(tt.setState({nodesSelectionActive:!1}),wt.selected&&Jt?(Lt({nodes:[],edges:[wt]}),Q.current?.blur()):Bt([n])),s&&s(ot,wt))},Y=ye(n,tt.getState,a),It=ye(n,tt.getState,E),zt=ye(n,tt.getState,g),fe=ye(n,tt.getState,v),qt=ye(n,tt.getState,b),Ht=(ot,dt)=>{if(ot.button!==0)return;const{edges:Bt,isValidConnection:Lt}=tt.getState(),Jt=dt?N:m,wt=(dt?B:H)||null,Vt=dt?"target":"source",dn=Lt||dd,fn=dt,ge=Bt.find(Ft=>Ft.id===n);xt(!0),w?.(ot,ge,Vt);const hn=Ft=>{xt(!1),k?.(Ft,ge,Vt)};Ur({event:ot,handleId:wt,nodeId:Jt,onConnect:Ft=>D?.(ge,Ft),isTarget:fn,getState:tt.getState,setState:tt.setState,isValidConnection:dn,edgeUpdaterType:Vt,onEdgeUpdateEnd:hn})},Ct=ot=>Ht(ot,!0),Gt=ot=>Ht(ot,!1),Mt=()=>it(!0),Ot=()=>it(!1),he=!I&&!s,Qt=ot=>{if(Rr.includes(ot.key)&&I){const{unselectNodesAndEdges:dt,addSelectedEdges:Bt,edges:Lt}=tt.getState();ot.key==="Escape"?(Q.current?.blur(),dt({edges:[Lt.find(wt=>wt.id===n)]})):Bt([n])}};return P.createElement("g",{className:ht(["react-flow__edge",`react-flow__edge-${r}`,o,{selected:c,animated:u,inactive:he,updating:J}]),onClick:lt,onDoubleClick:Y,onContextMenu:It,onMouseEnter:zt,onMouseMove:fe,onMouseLeave:qt,onKeyDown:W?Qt:void 0,tabIndex:W?0:void 0,role:W?"button":"img","data-testid":`rf__edge-${n}`,"aria-label":F===null?void 0:F||`Edge from ${m} to ${N}`,"aria-describedby":W?`${ti}-${X}`:void 0,ref:Q},!gt&&P.createElement(t,{id:n,source:m,target:N,selected:c,animated:u,label:l,labelStyle:d,labelShowBg:f,labelBgStyle:h,labelBgPadding:x,labelBgBorderRadius:p,data:i,style:S,sourceX:C,sourceY:y,targetX:$,targetY:T,sourcePosition:z,targetPosition:R,sourceHandleId:H,targetHandleId:B,markerStart:G,markerEnd:st,pathOptions:K,interactionWidth:q}),Z&&P.createElement(P.Fragment,null,(Z==="source"||Z===!0)&&P.createElement(Wo,{position:z,centerX:C,centerY:y,radius:M,onMouseDown:Ct,onMouseEnter:Mt,onMouseOut:Ot,type:"source"}),(Z==="target"||Z===!0)&&P.createElement(Wo,{position:R,centerX:$,centerY:T,radius:M,onMouseDown:Gt,onMouseEnter:Mt,onMouseOut:Ot,type:"target"})))};return e.displayName="EdgeWrapper",_.memo(e)};function fd(t){const e={default:ne(t.default||en),straight:ne(t.bezier||Jn),step:ne(t.step||Qn),smoothstep:ne(t.step||un),simplebezier:ne(t.simplebezier||Gn)},n={},o=Object.keys(t).filter(r=>!["default","bezier"].includes(r)).reduce((r,i)=>(r[i]=ne(t[i]||en),r),n);return{...e,...o}}function Zo(t,e,n=null){const o=(n?.x||0)+e.x,r=(n?.y||0)+e.y,i=n?.width||e.width,s=n?.height||e.height;switch(t){case L.Top:return{x:o+i/2,y:r};case L.Right:return{x:o+i,y:r+s/2};case L.Bottom:return{x:o+i/2,y:r+s};case L.Left:return{x:o,y:r+s/2}}}function Ko(t,e){return t?t.length===1||!e?t[0]:e&&t.find(n=>n.id===e)||null:null}const hd=(t,e,n,o,r,i)=>{const s=Zo(n,t,e),a=Zo(i,o,r);return{sourceX:s.x,sourceY:s.y,targetX:a.x,targetY:a.y}};function gd({sourcePos:t,targetPos:e,sourceWidth:n,sourceHeight:o,targetWidth:r,targetHeight:i,width:s,height:a,transform:c}){const u={x:Math.min(t.x,e.x),y:Math.min(t.y,e.y),x2:Math.max(t.x+n,e.x+r),y2:Math.max(t.y+o,e.y+i)};u.x===u.x2&&(u.x2+=1),u.y===u.y2&&(u.y2+=1);const l=Kn({x:(0-c[0])/c[2],y:(0-c[1])/c[2],width:s/c[2],height:a/c[2]}),d=Math.max(0,Math.min(l.x2,u.x2)-Math.max(l.x,u.x)),f=Math.max(0,Math.min(l.y2,u.y2)-Math.max(l.y,u.y));return Math.ceil(d*f)>0}function qo(t){const e=t?.[et]?.handleBounds||null,n=e&&t?.width&&t?.height&&typeof t?.positionAbsolute?.x<"u"&&typeof t?.positionAbsolute?.y<"u";return[{x:t?.positionAbsolute?.x||0,y:t?.positionAbsolute?.y||0,width:t?.width||0,height:t?.height||0},e,!!n]}const pd=[{level:0,isMaxLevel:!0,edges:[]}];function md(t,e,n=!1){let o=-1;const r=t.reduce((s,a)=>{const c=ft(a.zIndex);let u=c?a.zIndex:0;if(n){const l=e.get(a.target),d=e.get(a.source),f=a.selected||l?.selected||d?.selected,h=Math.max(d?.[et]?.z||0,l?.[et]?.z||0,1e3);u=(c?a.zIndex:0)+(f?h:0)}return s[u]?s[u].push(a):s[u]=[a],o=u>o?u:o,s},{}),i=Object.entries(r).map(([s,a])=>{const c=+s;return{edges:a,level:c,isMaxLevel:c===o}});return i.length===0?pd:i}function yd(t,e,n){const o=j(_.useCallback(r=>t?r.edges.filter(i=>{const s=e.get(i.source),a=e.get(i.target);return s?.width&&s?.height&&a?.width&&a?.height&&gd({sourcePos:s.positionAbsolute||{x:0,y:0},targetPos:a.positionAbsolute||{x:0,y:0},sourceWidth:s.width,sourceHeight:s.height,targetWidth:a.width,targetHeight:a.height,width:r.width,height:r.height,transform:r.transform})}):r.edges,[t,e]));return md(o,e,n)}const xd=({color:t="none",strokeWidth:e=1})=>P.createElement("polyline",{style:{stroke:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",fill:"none",points:"-5,-4 0,0 -5,4"}),wd=({color:t="none",strokeWidth:e=1})=>P.createElement("polyline",{style:{stroke:t,fill:t,strokeWidth:e},strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"}),Go={[je.Arrow]:xd,[je.ArrowClosed]:wd};function bd(t){const e=nt();return _.useMemo(()=>Object.prototype.hasOwnProperty.call(Go,t)?Go[t]:(e.getState().onError?.("009",kt.error009(t)),null),[t])}const Sd=({id:t,type:e,color:n,width:o=12.5,height:r=12.5,markerUnits:i="strokeWidth",strokeWidth:s,orient:a="auto-start-reverse"})=>{const c=bd(e);return c?P.createElement("marker",{className:"react-flow__arrowhead",id:t,markerWidth:`${o}`,markerHeight:`${r}`,viewBox:"-10 -10 20 20",markerUnits:i,orient:a,refX:"0",refY:"0"},P.createElement(c,{color:n,strokeWidth:s})):null},Ed=({defaultColor:t,rfId:e})=>n=>{const o=[];return n.edges.reduce((r,i)=>([i.markerStart,i.markerEnd].forEach(s=>{if(s&&typeof s=="object"){const a=zn(s,e);o.includes(a)||(r.push({id:a,color:s.color||t,...s}),o.push(a))}}),r),[]).sort((r,i)=>r.id.localeCompare(i.id))},fi=({defaultColor:t,rfId:e})=>{const n=j(_.useCallback(Ed({defaultColor:t,rfId:e}),[t,e]),(o,r)=>!(o.length!==r.length||o.some((i,s)=>i.id!==r[s].id)));return P.createElement("defs",null,n.map(o=>P.createElement(Sd,{id:o.id,key:o.id,type:o.type,color:o.color,width:o.width,height:o.height,markerUnits:o.markerUnits,strokeWidth:o.strokeWidth,orient:o.orient})))};fi.displayName="MarkerDefinitions";var vd=_.memo(fi);const _d=t=>({nodesConnectable:t.nodesConnectable,edgesFocusable:t.edgesFocusable,edgesUpdatable:t.edgesUpdatable,elementsSelectable:t.elementsSelectable,width:t.width,height:t.height,connectionMode:t.connectionMode,nodeInternals:t.nodeInternals,onError:t.onError}),hi=({defaultMarkerColor:t,onlyRenderVisibleElements:e,elevateEdgesOnSelect:n,rfId:o,edgeTypes:r,noPanClassName:i,onEdgeUpdate:s,onEdgeContextMenu:a,onEdgeMouseEnter:c,onEdgeMouseMove:u,onEdgeMouseLeave:l,onEdgeClick:d,edgeUpdaterRadius:f,onEdgeDoubleClick:h,onEdgeUpdateStart:x,onEdgeUpdateEnd:p,children:S})=>{const{edgesFocusable:m,edgesUpdatable:N,elementsSelectable:C,width:y,height:$,connectionMode:T,nodeInternals:z,onError:R}=j(_d,ct),I=yd(e,z,n);return y?P.createElement(P.Fragment,null,I.map(({level:O,edges:H,isMaxLevel:B})=>P.createElement("svg",{key:O,style:{zIndex:O},width:y,height:$,className:"react-flow__edges react-flow__container"},B&&P.createElement(vd,{defaultColor:t,rfId:o}),P.createElement("g",null,H.map(E=>{const[g,v,b]=qo(z.get(E.source)),[M,D,w]=qo(z.get(E.target));if(!b||!w)return null;let k=E.type||"default";r[k]||(R?.("011",kt.error011(k)),k="default");const A=r[k]||r.default,V=T===Kt.Strict?D.target:(D.target??[]).concat(D.source??[]),X=Ko(v.source,E.sourceHandle),F=Ko(V,E.targetHandle),W=X?.position||L.Bottom,Z=F?.position||L.Top,K=!!(E.focusable||m&&typeof E.focusable>"u"),q=typeof s<"u"&&(E.updatable||N&&typeof E.updatable>"u");if(!X||!F)return R?.("008",kt.error008(X,E)),null;const{sourceX:Q,sourceY:J,targetX:it,targetY:gt}=hd(g,X,W,M,F,Z);return P.createElement(A,{key:E.id,id:E.id,className:ht([E.className,i]),type:k,data:E.data,selected:!!E.selected,animated:!!E.animated,hidden:!!E.hidden,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,style:E.style,source:E.source,target:E.target,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerEnd:E.markerEnd,markerStart:E.markerStart,sourceX:Q,sourceY:J,targetX:it,targetY:gt,sourcePosition:W,targetPosition:Z,elementsSelectable:C,onEdgeUpdate:s,onContextMenu:a,onMouseEnter:c,onMouseMove:u,onMouseLeave:l,onClick:d,edgeUpdaterRadius:f,onEdgeDoubleClick:h,onEdgeUpdateStart:x,onEdgeUpdateEnd:p,rfId:o,ariaLabel:E.ariaLabel,isFocusable:K,isUpdatable:q,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth})})))),S):null};hi.displayName="EdgeRenderer";var Nd=_.memo(hi);const kd=t=>`translate(${t.transform[0]}px,${t.transform[1]}px) scale(${t.transform[2]})`;function Cd({children:t}){const e=j(kd);return P.createElement("div",{className:"react-flow__viewport react-flow__container",style:{transform:e}},t)}function Md(t){const e=ri(),n=_.useRef(!1);_.useEffect(()=>{!n.current&&e.viewportInitialized&&t&&(setTimeout(()=>t(e),1),n.current=!0)},[t,e.viewportInitialized])}const Ad={[L.Left]:L.Right,[L.Right]:L.Left,[L.Top]:L.Bottom,[L.Bottom]:L.Top},gi=({nodeId:t,handleType:e,style:n,type:o=Pt.Bezier,CustomComponent:r,connectionStatus:i})=>{const{fromNode:s,handleId:a,toX:c,toY:u,connectionMode:l}=j(_.useCallback(T=>({fromNode:T.nodeInternals.get(t),handleId:T.connectionHandleId,toX:(T.connectionPosition.x-T.transform[0])/T.transform[2],toY:(T.connectionPosition.y-T.transform[1])/T.transform[2],connectionMode:T.connectionMode}),[t]),ct),d=s?.[et]?.handleBounds;let f=d?.[e];if(l===Kt.Loose&&(f=f||d?.[e==="source"?"target":"source"]),!s||!f)return null;const h=a?f.find(T=>T.id===a):f[0],x=h?h.x+h.width/2:(s.width??0)/2,p=h?h.y+h.height/2:s.height??0,S=(s.positionAbsolute?.x??0)+x,m=(s.positionAbsolute?.y??0)+p,N=h?.position,C=N?Ad[N]:null;if(!N||!C)return null;if(r)return P.createElement(r,{connectionLineType:o,connectionLineStyle:n,fromNode:s,fromHandle:h,fromX:S,fromY:m,toX:c,toY:u,fromPosition:N,toPosition:C,connectionStatus:i});let y="";const $={sourceX:S,sourceY:m,sourcePosition:N,targetX:c,targetY:u,targetPosition:C};return o===Pt.Bezier?[y]=tn($):o===Pt.Step?[y]=Me({...$,borderRadius:0}):o===Pt.SmoothStep?[y]=Me($):o===Pt.SimpleBezier?[y]=qn($):y=`M${S},${m} ${c},${u}`,P.createElement("path",{d:y,fill:"none",className:"react-flow__connection-path",style:n})};gi.displayName="ConnectionLine";const $d=t=>({nodeId:t.connectionNodeId,handleType:t.connectionHandleType,nodesConnectable:t.nodesConnectable,connectionStatus:t.connectionStatus,width:t.width,height:t.height});function Td({containerStyle:t,style:e,type:n,component:o}){const{nodeId:r,handleType:i,nodesConnectable:s,width:a,height:c,connectionStatus:u}=j($d,ct);return!(r&&i&&a&&s)?null:P.createElement("svg",{style:t,width:a,height:c,className:"react-flow__edges react-flow__connectionline react-flow__container"},P.createElement("g",{className:ht(["react-flow__connection",u])},P.createElement(gi,{nodeId:r,handleType:i,style:e,type:n,CustomComponent:o,connectionStatus:u})))}function Qo(t,e){return _.useRef(null),nt(),_.useMemo(()=>e(t),[t])}const pi=({nodeTypes:t,edgeTypes:e,onMove:n,onMoveStart:o,onMoveEnd:r,onInit:i,onNodeClick:s,onEdgeClick:a,onNodeDoubleClick:c,onEdgeDoubleClick:u,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,onSelectionContextMenu:x,onSelectionStart:p,onSelectionEnd:S,connectionLineType:m,connectionLineStyle:N,connectionLineComponent:C,connectionLineContainerStyle:y,selectionKeyCode:$,selectionOnDrag:T,selectionMode:z,multiSelectionKeyCode:R,panActivationKeyCode:I,zoomActivationKeyCode:O,deleteKeyCode:H,onlyRenderVisibleElements:B,elementsSelectable:E,selectNodesOnDrag:g,defaultViewport:v,translateExtent:b,minZoom:M,maxZoom:D,preventScrolling:w,defaultMarkerColor:k,zoomOnScroll:A,zoomOnPinch:V,panOnScroll:X,panOnScrollSpeed:F,panOnScrollMode:W,zoomOnDoubleClick:Z,panOnDrag:K,onPaneClick:q,onPaneMouseEnter:Q,onPaneMouseMove:J,onPaneMouseLeave:it,onPaneScroll:gt,onPaneContextMenu:xt,onEdgeUpdate:tt,onEdgeContextMenu:G,onEdgeMouseEnter:st,onEdgeMouseMove:lt,onEdgeMouseLeave:Y,edgeUpdaterRadius:It,onEdgeUpdateStart:zt,onEdgeUpdateEnd:fe,noDragClassName:qt,noWheelClassName:Ht,noPanClassName:Ct,elevateEdgesOnSelect:Gt,disableKeyboardA11y:Mt,nodeOrigin:Ot,nodeExtent:he,rfId:Qt})=>{const ot=Qo(t,id),dt=Qo(e,fd);return Md(i),P.createElement(od,{onPaneClick:q,onPaneMouseEnter:Q,onPaneMouseMove:J,onPaneMouseLeave:it,onPaneContextMenu:xt,onPaneScroll:gt,deleteKeyCode:H,selectionKeyCode:$,selectionOnDrag:T,selectionMode:z,onSelectionStart:p,onSelectionEnd:S,multiSelectionKeyCode:R,panActivationKeyCode:I,zoomActivationKeyCode:O,elementsSelectable:E,onMove:n,onMoveStart:o,onMoveEnd:r,zoomOnScroll:A,zoomOnPinch:V,zoomOnDoubleClick:Z,panOnScroll:X,panOnScrollSpeed:F,panOnScrollMode:W,panOnDrag:K,defaultViewport:v,translateExtent:b,minZoom:M,maxZoom:D,onSelectionContextMenu:x,preventScrolling:w,noDragClassName:qt,noWheelClassName:Ht,noPanClassName:Ct,disableKeyboardA11y:Mt},P.createElement(Cd,null,P.createElement(Nd,{edgeTypes:dt,onEdgeClick:a,onEdgeDoubleClick:u,onEdgeUpdate:tt,onlyRenderVisibleElements:B,onEdgeContextMenu:G,onEdgeMouseEnter:st,onEdgeMouseMove:lt,onEdgeMouseLeave:Y,onEdgeUpdateStart:zt,onEdgeUpdateEnd:fe,edgeUpdaterRadius:It,defaultMarkerColor:k,noPanClassName:Ct,elevateEdgesOnSelect:!!Gt,disableKeyboardA11y:Mt,rfId:Qt},P.createElement(Td,{style:N,type:m,component:C,containerStyle:y})),P.createElement("div",{className:"react-flow__edgelabel-renderer"}),P.createElement(cd,{nodeTypes:ot,onNodeClick:s,onNodeDoubleClick:c,onNodeMouseEnter:l,onNodeMouseMove:d,onNodeMouseLeave:f,onNodeContextMenu:h,selectNodesOnDrag:g,onlyRenderVisibleElements:B,noPanClassName:Ct,noDragClassName:qt,disableKeyboardA11y:Mt,nodeOrigin:Ot,nodeExtent:he,rfId:Qt})))};pi.displayName="GraphView";var Pd=_.memo(pi);const Bn=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],At={rfId:"1",width:0,height:0,transform:[0,0,1],nodeInternals:new Map,edges:[],onNodesChange:null,onEdgesChange:null,hasDefaultNodes:!1,hasDefaultEdges:!1,d3Zoom:null,d3Selection:null,d3ZoomHandler:void 0,minZoom:.5,maxZoom:2,translateExtent:Bn,nodeExtent:Bn,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionNodeId:null,connectionHandleId:null,connectionHandleType:"source",connectionPosition:{x:0,y:0},connectionStatus:null,connectionMode:Kt.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:[0,0],nodeDragThreshold:0,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesUpdatable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,fitViewOnInit:!1,fitViewOnInitDone:!1,fitViewOnInitOptions:void 0,multiSelectionActive:!1,connectionStartHandle:null,connectionEndHandle:null,connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,connectionRadius:20,onError:iu,isValidConnection:void 0},Dd=()=>ys((t,e)=>({...At,setNodes:n=>{const{nodeInternals:o,nodeOrigin:r,elevateNodesOnSelect:i}=e();t({nodeInternals:Sn(n,o,r,i)})},getNodes:()=>Array.from(e().nodeInternals.values()),setEdges:n=>{const{defaultEdgeOptions:o={}}=e();t({edges:n.map(r=>({...o,...r}))})},setDefaultNodesAndEdges:(n,o)=>{const r=typeof n<"u",i=typeof o<"u",s=r?Sn(n,new Map,e().nodeOrigin,e().elevateNodesOnSelect):new Map;t({nodeInternals:s,edges:i?o:[],hasDefaultNodes:r,hasDefaultEdges:i})},updateNodeDimensions:n=>{const{onNodesChange:o,nodeInternals:r,fitViewOnInit:i,fitViewOnInitDone:s,fitViewOnInitOptions:a,domNode:c,nodeOrigin:u}=e(),l=c?.querySelector(".react-flow__viewport");if(!l)return;const d=window.getComputedStyle(l),{m22:f}=new window.DOMMatrixReadOnly(d.transform),h=n.reduce((p,S)=>{const m=r.get(S.id);if(m){const N=Wn(S.nodeElement);!!(N.width&&N.height&&(m.width!==N.width||m.height!==N.height||S.forceUpdate))&&(r.set(m.id,{...m,[et]:{...m[et],handleBounds:{source:Yo(".source",S.nodeElement,f,u),target:Yo(".target",S.nodeElement,f,u)}},...N}),p.push({id:m.id,type:"dimensions",dimensions:N}))}return p},[]);ni(r,u);const x=s||i&&!s&&oi(e,{initial:!0,...a});t({nodeInternals:new Map(r),fitViewOnInitDone:x}),h?.length>0&&o?.(h)},updateNodePositions:(n,o=!0,r=!1)=>{const{triggerNodeChanges:i}=e(),s=n.map(a=>{const c={id:a.id,type:"position",dragging:r};return o&&(c.positionAbsolute=a.positionAbsolute,c.position=a.position),c});i(s)},triggerNodeChanges:n=>{const{onNodesChange:o,nodeInternals:r,hasDefaultNodes:i,nodeOrigin:s,getNodes:a,elevateNodesOnSelect:c}=e();if(n?.length){if(i){const u=Ku(n,a()),l=Sn(u,r,s,c);t({nodeInternals:l})}o?.(n)}},addSelectedNodes:n=>{const{multiSelectionActive:o,edges:r,getNodes:i}=e();let s,a=null;o?s=n.map(c=>Tt(c,!0)):(s=oe(i(),n),a=oe(r,[])),Le({changedNodes:s,changedEdges:a,get:e,set:t})},addSelectedEdges:n=>{const{multiSelectionActive:o,edges:r,getNodes:i}=e();let s,a=null;o?s=n.map(c=>Tt(c,!0)):(s=oe(r,n),a=oe(i(),[])),Le({changedNodes:a,changedEdges:s,get:e,set:t})},unselectNodesAndEdges:({nodes:n,edges:o}={})=>{const{edges:r,getNodes:i}=e(),s=n||i(),a=o||r,c=s.map(l=>(l.selected=!1,Tt(l.id,!1))),u=a.map(l=>Tt(l.id,!1));Le({changedNodes:c,changedEdges:u,get:e,set:t})},setMinZoom:n=>{const{d3Zoom:o,maxZoom:r}=e();o?.scaleExtent([n,r]),t({minZoom:n})},setMaxZoom:n=>{const{d3Zoom:o,minZoom:r}=e();o?.scaleExtent([r,n]),t({maxZoom:n})},setTranslateExtent:n=>{e().d3Zoom?.translateExtent(n),t({translateExtent:n})},resetSelectedElements:()=>{const{edges:n,getNodes:o}=e(),i=o().filter(a=>a.selected).map(a=>Tt(a.id,!1)),s=n.filter(a=>a.selected).map(a=>Tt(a.id,!1));Le({changedNodes:i,changedEdges:s,get:e,set:t})},setNodeExtent:n=>{const{nodeInternals:o}=e();o.forEach(r=>{r.positionAbsolute=Zn(r.position,n)}),t({nodeExtent:n,nodeInternals:new Map(o)})},panBy:n=>{const{transform:o,width:r,height:i,d3Zoom:s,d3Selection:a,translateExtent:c}=e();if(!s||!a||!n.x&&!n.y)return!1;const u=Dt.translate(o[0]+n.x,o[1]+n.y).scale(o[2]),l=[[0,0],[r,i]],d=s?.constrain()(u,l,c);return s.transform(a,d),o[0]!==d.x||o[1]!==d.y||o[2]!==d.k},cancelConnection:()=>t({connectionNodeId:At.connectionNodeId,connectionHandleId:At.connectionHandleId,connectionHandleType:At.connectionHandleType,connectionStatus:At.connectionStatus,connectionStartHandle:At.connectionStartHandle,connectionEndHandle:At.connectionEndHandle}),reset:()=>t({...At})}),Object.is),mi=({children:t})=>{const e=_.useRef(null);return e.current||(e.current=Dd()),P.createElement(Gl,{value:e.current},t)};mi.displayName="ReactFlowProvider";const yi=({children:t})=>_.useContext(ln)?P.createElement(P.Fragment,null,t):P.createElement(mi,null,t);yi.displayName="ReactFlowWrapper";const Rd={input:qr,default:Hn,output:Qr,group:no},Id={default:en,straight:Jn,step:Qn,smoothstep:un,simplebezier:Gn},zd=[0,0],Hd=[15,15],Od={x:0,y:0,zoom:1},Bd={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0},Ld=_.forwardRef(({nodes:t,edges:e,defaultNodes:n,defaultEdges:o,className:r,nodeTypes:i=Rd,edgeTypes:s=Id,onNodeClick:a,onEdgeClick:c,onInit:u,onMove:l,onMoveStart:d,onMoveEnd:f,onConnect:h,onConnectStart:x,onConnectEnd:p,onClickConnectStart:S,onClickConnectEnd:m,onNodeMouseEnter:N,onNodeMouseMove:C,onNodeMouseLeave:y,onNodeContextMenu:$,onNodeDoubleClick:T,onNodeDragStart:z,onNodeDrag:R,onNodeDragStop:I,onNodesDelete:O,onEdgesDelete:H,onSelectionChange:B,onSelectionDragStart:E,onSelectionDrag:g,onSelectionDragStop:v,onSelectionContextMenu:b,onSelectionStart:M,onSelectionEnd:D,connectionMode:w=Kt.Strict,connectionLineType:k=Pt.Bezier,connectionLineStyle:A,connectionLineComponent:V,connectionLineContainerStyle:X,deleteKeyCode:F="Backspace",selectionKeyCode:W="Shift",selectionOnDrag:Z=!1,selectionMode:K=Ce.Full,panActivationKeyCode:q="Space",multiSelectionKeyCode:Q=Je()?"Meta":"Control",zoomActivationKeyCode:J=Je()?"Meta":"Control",snapToGrid:it=!1,snapGrid:gt=Hd,onlyRenderVisibleElements:xt=!1,selectNodesOnDrag:tt=!0,nodesDraggable:G,nodesConnectable:st,nodesFocusable:lt,nodeOrigin:Y=zd,edgesFocusable:It,edgesUpdatable:zt,elementsSelectable:fe,defaultViewport:qt=Od,minZoom:Ht=.5,maxZoom:Ct=2,translateExtent:Gt=Bn,preventScrolling:Mt=!0,nodeExtent:Ot,defaultMarkerColor:he="#b1b1b7",zoomOnScroll:Qt=!0,zoomOnPinch:ot=!0,panOnScroll:dt=!1,panOnScrollSpeed:Bt=.5,panOnScrollMode:Lt=Ut.Free,zoomOnDoubleClick:Jt=!0,panOnDrag:wt=!0,onPaneClick:Vt,onPaneMouseEnter:dn,onPaneMouseMove:fn,onPaneMouseLeave:ge,onPaneScroll:hn,onPaneContextMenu:ro,children:Ft,onEdgeUpdate:xi,onEdgeContextMenu:wi,onEdgeDoubleClick:bi,onEdgeMouseEnter:Si,onEdgeMouseMove:Ei,onEdgeMouseLeave:vi,onEdgeUpdateStart:_i,onEdgeUpdateEnd:Ni,edgeUpdaterRadius:ki=10,onNodesChange:Ci,onEdgesChange:Mi,noDragClassName:Ai="nodrag",noWheelClassName:$i="nowheel",noPanClassName:io="nopan",fitView:Ti=!1,fitViewOptions:Pi,connectOnClick:Di=!0,attributionPosition:Ri,proOptions:Ii,defaultEdgeOptions:zi,elevateNodesOnSelect:Hi=!0,elevateEdgesOnSelect:Oi=!1,disableKeyboardA11y:so=!1,autoPanOnConnect:Bi=!0,autoPanOnNodeDrag:Li=!0,connectionRadius:Vi=20,isValidConnection:Fi,onError:Xi,style:Yi,id:ao,nodeDragThreshold:Ui,...Wi},Zi)=>{const gn=ao||"1";return P.createElement("div",{...Wi,style:{...Yi,...Bd},ref:Zi,className:ht(["react-flow",r]),"data-testid":"rf__wrapper",id:ao},P.createElement(yi,null,P.createElement(Pd,{onInit:u,onMove:l,onMoveStart:d,onMoveEnd:f,onNodeClick:a,onEdgeClick:c,onNodeMouseEnter:N,onNodeMouseMove:C,onNodeMouseLeave:y,onNodeContextMenu:$,onNodeDoubleClick:T,nodeTypes:i,edgeTypes:s,connectionLineType:k,connectionLineStyle:A,connectionLineComponent:V,connectionLineContainerStyle:X,selectionKeyCode:W,selectionOnDrag:Z,selectionMode:K,deleteKeyCode:F,multiSelectionKeyCode:Q,panActivationKeyCode:q,zoomActivationKeyCode:J,onlyRenderVisibleElements:xt,selectNodesOnDrag:tt,defaultViewport:qt,translateExtent:Gt,minZoom:Ht,maxZoom:Ct,preventScrolling:Mt,zoomOnScroll:Qt,zoomOnPinch:ot,zoomOnDoubleClick:Jt,panOnScroll:dt,panOnScrollSpeed:Bt,panOnScrollMode:Lt,panOnDrag:wt,onPaneClick:Vt,onPaneMouseEnter:dn,onPaneMouseMove:fn,onPaneMouseLeave:ge,onPaneScroll:hn,onPaneContextMenu:ro,onSelectionContextMenu:b,onSelectionStart:M,onSelectionEnd:D,onEdgeUpdate:xi,onEdgeContextMenu:wi,onEdgeDoubleClick:bi,onEdgeMouseEnter:Si,onEdgeMouseMove:Ei,onEdgeMouseLeave:vi,onEdgeUpdateStart:_i,onEdgeUpdateEnd:Ni,edgeUpdaterRadius:ki,defaultMarkerColor:he,noDragClassName:Ai,noWheelClassName:$i,noPanClassName:io,elevateEdgesOnSelect:Oi,rfId:gn,disableKeyboardA11y:so,nodeOrigin:Y,nodeExtent:Ot}),P.createElement(Mu,{nodes:t,edges:e,defaultNodes:n,defaultEdges:o,onConnect:h,onConnectStart:x,onConnectEnd:p,onClickConnectStart:S,onClickConnectEnd:m,nodesDraggable:G,nodesConnectable:st,nodesFocusable:lt,edgesFocusable:It,edgesUpdatable:zt,elementsSelectable:fe,elevateNodesOnSelect:Hi,minZoom:Ht,maxZoom:Ct,nodeExtent:Ot,onNodesChange:Ci,onEdgesChange:Mi,snapToGrid:it,snapGrid:gt,connectionMode:w,translateExtent:Gt,connectOnClick:Di,defaultEdgeOptions:zi,fitView:Ti,fitViewOptions:Pi,onNodesDelete:O,onEdgesDelete:H,onNodeDragStart:z,onNodeDrag:R,onNodeDragStop:I,onSelectionDrag:g,onSelectionDragStart:E,onSelectionDragStop:v,noPanClassName:io,nodeOrigin:Y,rfId:gn,autoPanOnConnect:Bi,autoPanOnNodeDrag:Li,onError:Xi,connectionRadius:Vi,isValidConnection:Fi,nodeDragThreshold:Ui}),P.createElement(ku,{onSelectionChange:B}),Ft,P.createElement(jl,{proOptions:Ii,position:Ri}),P.createElement(Du,{rfId:gn,disableKeyboardA11y:so})))});Ld.displayName="ReactFlow";let Vd=(t=21)=>crypto.getRandomValues(new Uint8Array(t)).reduce((e,n)=>(n&=63,n<36?e+=n.toString(36):n<62?e+=(n-26).toString(36).toUpperCase():n>62?e+="-":e+="_",e),"");const rt=2.7,Nn=5,Jo=1e3;class Fd{options;constructor(e={}){this.options={padding:20,fontFamily:"balsamiq",fontURL:"https://fonts.gstatic.com/s/balsamiqsans/v3/P5sEzZiAbNrN8SB3lQQX7Pncwd4XIA.woff2",...e}}async loadFont(){const{fontFamily:e,fontURL:n}=this.options,o=new FontFace(e,`url(${n})`);await o.load(),document.fonts&&document?.fonts?.add(o)}async render(e){await this.loadFont();const{x:n,y:o,measuredWidth:r,measuredHeight:i}=this.findDimensions(e),{nodes:s,edges:a}=e,c=this.makeSvgElement("svg",{xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink",viewBox:`${n} ${o} ${r} ${i}`,style:"font-family: balsamiq",version:"1.1"});return a?.forEach(u=>{this.renderEdge(u,s,c)}),s?.forEach(u=>{const l=a.find(f=>f.target===u.id)?.source||"",d={...u,parentId:l};this.renderNode(d,c)}),c}findDimensions(e){const{nodes:n}=e,{padding:o}=this.options;if(!n?.length)return{x:0,y:0,measuredWidth:0,measuredHeight:0};const r=n?.reduce((f,h)=>f.position.x<h.position.x?f:h),i=n?.reduce((f,h)=>f.position.y<h.position.y?f:h),s=n?.reduce((f,h)=>f.position.y>h.position.y?f:h),a=n?.reduce((f,h)=>f.position.x+(f?.width??0)>h.position.x+(h?.width??0)?f:h);let c=Math.round(a?.position?.x+(a?.width??0)-r?.position?.x)+o*2;const u=Math.round(s?.position?.y-i?.position?.y+(s?.height??0))+o*2;let l=Math.floor(r.position.x)-o;const d=Math.round(i.position.y)-o;if(c<1e3){const f=Jo-c;c=Jo,l-=f/2}return{x:l,y:d,measuredWidth:c,measuredHeight:u}}makeSvgElement(e,n={},o){const r=document.createElementNS("http://www.w3.org/2000/svg",e);for(const i in n)n?.hasOwnProperty(i)&&r.setAttribute(i,n[i]);return o&&o.appendChild(r),r}renderNode(e,n){const o=e.type;o in this?this[o](e,n):console.warn(`No renderer for node type: ${o}`)}renderEdge(e,n,o){const[r]=this.getEdgesPath(e,n),i=e?.markerStart?this.renderMarker(e.markerStart,o):"",s=e?.markerEnd?this.renderMarker(e.markerEnd,o):"";this.makeSvgElement("path",{d:r,fill:"none",stroke:e?.style?.stroke??"#000","stroke-width":3.5,"data-edge-id":e.id,"stroke-linecap":"round","stroke-linejoin":"round","stroke-dasharray":e?.style?.strokeDasharray,...s&&{"marker-end":`url(#${s})`},...i&&{"marker-start":`url(#${i})`}},o)}getEdgesPath(e,n){const o=n.find(d=>d.id===e.source),r=n.find(d=>d.id===e.target),i=this.getSourcePosition(e,o),s=this.getTargetPosition(e,r);if(!i||!s)return[""];const a=e.sourceHandle.replace("1","2")||"x2",c=e.targetHandle.replace("2","1")||"x1",u=e.type,l={sourceX:i.x,sourceY:i.y,sourcePosition:this.getSourceEdgePosition(a),targetX:s.x,targetY:s.y,targetPosition:this.getTargetEdgePosition(c)};switch(u){case"default":return tn(l);case"straight":return Or(l);case"step":return Me({...l,borderRadius:0});case"smoothstep":return Me(l);case"simplebezier":return qn(l);default:return tn(l)}}renderMarker(e,n){let o=n?.querySelector("defs");o||(o=this.makeSvgElement("defs",{},n));const r=e.width??8,i=e.height??8,s=e.markerUnits??"strokeWidth",a=e.orient??"auto-start-reverse",c=o.querySelector(`marker[orient="${a}"][markerUnits="${s}"][markerWidth="${r}"][markerHeight="${i}"]`);if(c)return c.id;const u=`marker-${Vd(6)}`,l=this.makeSvgElement("marker",{id:u,markerWidth:r,markerHeight:i,viewBox:"-10 -10 20 20",markerUnits:s,orient:a,refX:1.5,refY:0},o);return this.makeSvgElement("polyline",{stroke:e.color??"#000","stroke-width":e.strokeWidth??2,"stroke-linecap":"round","stroke-linejoin":"round",fill:e?.type==="arrowclosed"?e.color??"#000":"none",points:this.getMarkerPoints(e)},l),u}getMarkerPoints(e){if(e.type==="arrow")return"-5,-4 0,0 -5,4";if(e.type==="arrowclosed")return"-5,-4 0,0 -5,4 -5,-4"}getSourcePosition(e,n){const o=e.sourceHandle.replace("1","2")||"x2",r=this.getSourceEdgePosition(o);if(!n||!r)return null;switch(r){case"top":return{x:n.position.x+(n.width||0)/2,y:n.position.y};case"bottom":return{x:n.position.x+(n.width||0)/2,y:n.position.y+(n.height||0)};case"left":return{x:n.position.x,y:n.position.y+(n.height||0)/2};case"right":return{x:n.position.x+(n.width||0),y:n.position.y+(n.height||0)/2};default:return null}}getTargetPosition(e,n){const o=e.targetHandle.replace("2","1")||"x1",r=this.getTargetEdgePosition(o);if(!n||!r)return null;switch(r){case"top":return{x:n.position.x+(n.width||0)/2,y:n.position.y};case"bottom":return{x:n.position.x+(n.width||0)/2,y:n.position.y+(n.height||0)};case"left":return{x:n.position.x,y:n.position.y+(n.height||0)/2};case"right":return{x:n.position.x+(n.width||0),y:n.position.y+(n.height||0)/2};default:return null}}getSourceEdgePosition(e){switch(e){case"w2":return L.Top;case"x2":return L.Bottom;case"y2":return L.Left;case"z2":return L.Right;default:return L.Bottom}}getTargetEdgePosition(e){switch(e){case"w1":return L.Top;case"x1":return L.Bottom;case"y1":return L.Left;case"z1":return L.Right;default:return L.Top}}drawRectangle(e,n){let o="transparent";switch(e?.type){case"topic":o="#fdff00";break;case"subtopic":o="#ffe599";break;case"button":o=e?.data?.backgroundColor??"white";break;case"legend":o=e?.data?.backgroundColor??"white";break}this.makeSvgElement("rect",{x:e.position.x+rt/2,y:e.position.y+rt/2,width:(e.width||e?.style?.width||0)-rt,height:(e.height||e?.style?.height||0)-rt,rx:e?.data?.radius??Nn,fill:o,stroke:e?.data?.borderColor||e?.data?.backgroundColor||"black","stroke-width":rt},n)}title(e,n){const o=this.makeSvgElement("g",{"data-node-id":e.id,"data-type":e.type,...e?.parentId&&{"data-parent-id":e?.parentId}},n),r=this.makeSvgElement("text",{x:e.position.x+(e?.width||e?.style?.width||0)/2,y:e.position.y+(e?.height||e?.style?.height||0)/2,"text-anchor":"middle","dominant-baseline":"middle","font-size":28,fill:"black"},o),i=this.makeSvgElement("tspan",{},r);i.textContent=e.data?.label??""}renderTopicSubTopic(e,n){const o=this.makeSvgElement("g",{"data-node-id":e.id,"data-type":e.type,...e?.parentId&&{"data-parent-id":e?.parentId}},n);this.drawRectangle(e,o);let r=e.position.x+(e?.width||e?.style?.width||0)/2;e?.data?.legend&&(r-=10,this.icon({x:e.position.x+(e?.width||0)-32,y:e.position.y+(e?.height||0)/2-10},e?.data?.legend?.color??"black",o));const i=this.makeSvgElement("text",{x:r,y:e.position.y+(e?.height||e?.style?.height||0)/2,"text-anchor":"middle","dominant-baseline":"middle","font-size":e?.data?.style?.fontSize??14,fill:"black"},o),s=this.makeSvgElement("tspan",{},i);s.textContent=e.data?.label??""}topic(e,n){return this.renderTopicSubTopic(e,n)}subtopic(e,n){this.renderTopicSubTopic(e,n)}section(e,n){const o=this.makeSvgElement("g",{"data-node-id":e.id,"data-type":e.type,...e?.parentId&&{"data-parent-id":e?.parentId}},n);this.makeSvgElement("rect",{x:e.position.x+rt/2,y:e.position.y+rt/2,width:(e.width||e?.style?.width||0)-rt,height:(e.height||e?.style?.height||0)-rt,rx:e?.data?.style?.borderRadius??Nn,fill:e?.data?.style?.backgroundColor??"transparent",stroke:e?.data?.style?.borderColor||e?.data?.style?.backgroundColor||"black","stroke-width":rt},o);const r=this.makeSvgElement("text",{x:e.position.x,y:e.position.y-8,"text-anchor":"left","dominant-baseline":"auto","font-size":e?.data?.style?.fontSize??14,fill:"black"},o),i=this.makeSvgElement("tspan",{},r);i.textContent=e.data?.label??""}legend(e,n){const o=e.data?.legends??[],r=this.makeSvgElement("g",{"data-node-id":e.id,"data-type":e.type,...e?.parentId&&{"data-parent-id":e?.parentId}},n);this.drawRectangle(e,r);const i=e.position.x+25;let s=e.position.y+19;if(e?.data?.label){s+=4;const a=this.makeSvgElement("text",{x:i+1,y:s+8,"text-anchor":"left","dominant-baseline":"middle","font-size":16,fill:"black"},r),c=this.makeSvgElement("tspan",{},a);c.textContent=e.data?.label??""}o.forEach((a,c)=>{const u=i,l=e?.data?.label?s+32*(c+1):s+32*c,d=this.makeSvgElement("g",{"data-node-id":a.id,"data-type":"legend-item","data-parent-id":e.id},r);this.icon({x:u,y:l},a.color??"black",d);const f=this.makeSvgElement("text",{x:u+28,y:l+12,"text-anchor":"left","dominant-baseline":"middle","font-size":16,fill:"black"},d),h=this.makeSvgElement("tspan",{},f);h.textContent=a.label??""})}icon(e,n,o){const{x:r,y:i}=e,s=9.5;this.makeSvgElement("circle",{cx:r+s+1,cy:i+s,r:s,fill:n},o),this.makeSvgElement("path",{d:`M${r+6.5} ${i+s}L${r+9} ${i+s+3} ${r+14} ${i+s-2}`,fill:"none",stroke:"#fff","stroke-width":2,"stroke-linecap":"round","stroke-linejoin":"round"},o)}linksgroup(e,n){const o=this.makeSvgElement("g",{"data-node-id":e.id,"data-type":e.type,...e?.parentId&&{"data-parent-id":e?.parentId}},n);this.drawRectangle(e,o);const r=e.data?.links??[],i=e.position.x+22;let s=e.position.y+22;if(e?.data?.label){s+=6;const a=this.makeSvgElement("text",{x:i+2,y:s+1,"text-anchor":"left","dominant-baseline":"middle","font-size":16,fill:"black"},o),c=this.makeSvgElement("tspan",{},a);c.textContent=e.data?.label??""}r.forEach((a,c)=>{const u=i,l=e?.data?.label?s+30*(c+1):s+30*c,d=this.makeSvgElement("g",{"data-node-id":a.id,"data-type":"link-item","data-parent-id":e.id,"data-link":a.url??""},o);this.icon({x:u,y:l},"#6b7280",d);const f=this.makeSvgElement("text",{x:u+28,y:l+10,"text-anchor":"left","dominant-baseline":"middle","font-size":16,fill:"black"},d),h=this.makeSvgElement("tspan",{},f);h.textContent=a.label??""})}vertical(e,n){const o=e?.data?.style??{},r=this.makeSvgElement("g",{"data-node-id":e.id,"data-type":e.type},n);this.makeSvgElement("line",{x1:e?.position?.x+10,y1:e?.position?.y+1,x2:e?.position?.x+10,y2:e?.position?.y+(e?.height||0),style:`stroke-linecap: round; stroke-width: 3; stroke: ${o?.stroke||"black"}; stroke-dasharray: ${o?.strokeDasharray??0};`},r)}horizontal(e,n){const o=e?.data?.style??{},r=this.makeSvgElement("g",{"data-node-id":e.id,"data-type":e.type},n);this.makeSvgElement("line",{x1:e?.position?.x??0,y1:e?.position?.y??0,x2:e?.position?.x+(e?.width||0),y2:e?.position?.y??0,style:`stroke-linecap: round; stroke-width: 3; stroke: ${o?.stroke||"black"}; stroke-dasharray: ${o?.strokeDasharray??0};`},r)}paragraph(e,n){const{style:o}=e?.data??{},r=this.makeSvgElement("g",{"data-node-id":e.id,"data-type":e.type},n);this.makeSvgElement("rect",{x:e.position.x+rt/2,y:e.position.y+rt/2,width:e.width||e?.style?.width||0,height:(e.height||e?.style?.height||0)-rt,rx:Nn,fill:o?.backgroundColor??"transparent",stroke:o?.borderColor??"transparent","stroke-width":rt},r);const i=this.splitTextIntoLines(e.data?.label??"",(e?.width||0)-18*2,o?.fontSize||14,this?.options.fontFamily||"balsamiq","normal"),s=20;let a=e.position.x+s,c=e.position.y+32-rt/2,u=26;switch(o?.fontSize){case 24:c+=6,u=36;break;case 12:c-=5,u=19;break;case 20:c+=2,u=30;break;case 28:c+=10,u=42;break}let l="start",d="middle";const f=(o?.fontSize||14)*1;if(o?.textAlign==="center"?(a=e.position.x+(e.width||parseInt(e?.style?.width||"0")||0)/2,l="middle"):o?.textAlign==="right"&&(a=e.position.x+(e.width||parseInt(e?.style?.width||"0")||0)-s,l="end"),o?.justifyContent==="center")c=e.position.y+(e.height||parseInt(e?.style?.height||"0")||0)/2,d="middle",c=c-i.length*f/2;else if(o?.justifyContent==="flex-end"){switch(c=e.position.y+(e.height||parseInt(e?.style?.height||"0")||0)-24,o?.fontSize){case 12:break;case 20:c-=i.length*2;break;case 24:c-=i.length*5;break;case 28:c-=i.length*8;break}d="text-top",c=c-i.length*f}const h=this.makeSvgElement("text",{fill:o?.color??"black"},r);i.forEach((x,p)=>{const S=this.makeSvgElement("tspan",{x:a,y:c,dy:`${p===0?0:u*p}`,"text-anchor":l,"dominant-baseline":d,"font-size":o?.fontSize??15},h);S.textContent=x})}splitTextIntoLines(e,n,o,r,i){const s="http://www.w3.org/2000/svg",a=document.createElementNS(s,"svg"),c=document.createElementNS(s,"text");c.setAttribute("font-size",o.toString()),c.setAttribute("font-family",r),c.setAttribute("font-weight",i),a.appendChild(c),document.body.appendChild(a);const u=[];let l="";for(const d of e.split(" ")){const f=l+(l?" ":"")+d;c.textContent=f,c.getComputedTextLength()<=n?l=f:(u.push(l),l=d)}return l&&u.push(l),document.body.removeChild(a),u}button(e,n){const o=this.makeSvgElement("g",{"data-link":e?.data?.href??"","data-node-id":e?.id??"","data-type":e?.type??"button"},n);this.drawRectangle(e,o);const r=this.makeSvgElement("text",{x:e.position.x+(e?.width||0)/2,y:e.position.y+(e?.height||0)/2,"text-anchor":"middle","dominant-baseline":"middle","font-size":e?.data?.style?.fontSize??14,fill:e?.data?.color??"black"},o),i=this.makeSvgElement("tspan",{},r);i.textContent=e.data?.label??""}}function Ud(t,e){return new Fd(e).render(t)}export{Ud as r};
