import{j as e}from"./jsx-runtime.KYujgZxC.js";import{r as p}from"./index.068npczX.js";import{C as N}from"./CheckIcon.z1qoljgL.js";import{a as w}from"./http.FvipgnVD.js";import{MarkFavorite as C}from"./MarkFavorite.L2HXZXkR.js";import{S as E}from"./Spinner.JIsgQuDp.js";import{CreateRoadmapButton as b}from"./CreateRoadmapButton.Uj753I87.js";import{C as $}from"./CreateRoadmapModal.nMDDa8KW.js";import{M as F}from"./map.sh6mCEPE.js";import{U as L}from"./users-round.SNGz35TB.js";import{i as S}from"./jwt.E7BTUPpl.js";import"./popup.xZrd6hzK.js";import"./use-toast.g_ZHNYU9.js";import"./toast.21LYZN4o.js";import"./index.rS7vpNfE.js";import"./classname.J02y5HY7.js";import"./bundle-mjs.-_24JQzE.js";import"./plus.WQOh6-OZ.js";import"./createLucideIcon.vQ5YHosT.js";import"./Modal.uIjZmYnD.js";import"./use-outside-click.8agT9V5u.js";import"./use-keydown.A5Ei3HxG.js";import"./loader-2.w-AOx68Q.js";function T(a){return e.jsxs("a",{className:"rounded-md border border-dashed border-purple-700 px-3 py-1.5 text-purple-400 transition-colors hover:border-gray-700 hover:text-white",href:"/teams",children:[e.jsx("span",{className:"relative -top-[0.5px] mr-1 text-xs font-semibold uppercase text-white",children:"New"})," ",e.jsxs("span",{className:"hidden sm:inline",children:["Announcing roadmaps for teams. ",e.jsx("span",{className:"font-semibold",children:"Learn more!"})]}),e.jsx("span",{className:"inline sm:hidden",children:"Announcing roadmaps for teams!"})]})}function k(a){const{title:s="Start learning ..",message:o="Your progress and favorite roadmaps will show up here."}=a;return e.jsxs("div",{className:"relative flex min-h-full flex-col items-start justify-center py-6 sm:items-center",children:[e.jsxs("h2",{className:"mb-1.5 flex items-center text-lg text-gray-200 sm:text-2xl",children:[e.jsx(N,{additionalClasses:"mr-2 top-[0.5px] w-[16px] h-[16px] sm:w-[20px] sm:h-[20px]"}),s]}),e.jsx("p",{className:"text-sm text-gray-400 sm:text-base",children:o}),e.jsx("p",{className:"mt-5",children:e.jsx(T,{})})]})}function v(a){const{url:s,percentageDone:o,resourceType:n,resourceId:l,resourceTitle:i,isFavorite:c,allowFavorite:x=!0}=a;return e.jsxs("a",{href:s,className:"relative flex flex-col overflow-hidden rounded-md border border-slate-800 bg-slate-900 p-3 text-sm text-slate-400 hover:border-slate-600 hover:text-slate-300",children:[e.jsx("span",{className:"relative z-20",children:i}),e.jsx("span",{className:"absolute bottom-0 left-0 top-0 z-10 bg-[#172a3a]",style:{width:`${o}%`}}),x&&e.jsx(C,{resourceId:l,resourceType:n,favorite:c})]})}function y(a){const{isLoading:s=!1,title:o,icon:n}=a;return e.jsxs("p",{className:"mb-4 flex items-center text-sm text-gray-400",children:[!s&&n,s&&e.jsx("span",{className:"mr-1.5",children:e.jsx(E,{})}),o]})}function R(a){const{teamRoadmaps:s={},progress:o,isLoading:n=!1,customRoadmaps:l}=a,[i,c]=p.useState(!1),[x,h]=p.useState();return e.jsxs("div",{className:"relative pb-12 pt-4 sm:pt-7",children:[e.jsx("p",{className:"mb-7 mt-2 text-sm",children:e.jsx(T,{})}),i&&e.jsx($,{teamId:x,onClose:()=>{c(!1),h(void 0)}}),e.jsx(y,{icon:e.jsx(N,{additionalClasses:"mr-1.5 h-[14px] w-[14px]"}),isLoading:n,title:"Your progress and favorite roadmaps."}),e.jsx("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3",children:o.map(r=>e.jsx(v,{resourceId:r.resourceId,resourceType:r.resourceType,resourceTitle:r.resourceTitle,isFavorite:r.isFavorite,percentageDone:(r.skipped+r.done)/r.total*100,url:r.resourceType==="roadmap"?`/${r.resourceId}`:`/best-practices/${r.resourceId}`},r.resourceId))}),e.jsxs("div",{className:"mt-5",children:[e.jsx(y,{icon:e.jsx(F,{className:"mr-1.5 h-[14px] w-[14px]"}),title:"Your custom roadmaps"}),l.length===0&&e.jsxs("p",{className:"rounded-md border border-dashed border-gray-800 p-2 text-sm text-gray-600",children:["You haven't created any custom roadmaps yet."," ",e.jsx("button",{className:"text-gray-500 underline underline-offset-2 hover:text-gray-400",onClick:()=>c(!0),children:"Create one!"})]}),l.length>0&&e.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3",children:[l.map(r=>e.jsx(v,{resourceId:r.resourceId,resourceType:"roadmap",resourceTitle:r.resourceTitle,percentageDone:(r.skipped+r.done)/r.total*100,url:`/r?id=${r.resourceId}`,allowFavorite:!1},r.resourceId)),e.jsx(b,{})]})]}),Object.keys(s).map(r=>{const m=s?.[r]?.[0]?.team,u=s[r].filter(d=>!!d.resourceTitle),f=["admin","manager"].includes(m?.role);return e.jsxs("div",{className:"mt-5",children:[e.jsx(y,{icon:e.jsx(L,{className:"mr-1.5 h-[14px] w-[14px]"}),title:e.jsxs(e.Fragment,{children:["Team"," ",e.jsx("a",{className:"mx-1 font-medium underline underline-offset-2 transition-colors hover:text-gray-300",href:`/team/progress?t=${m?.id}`,children:r}),"Roadmaps"]})}),u.length===0&&e.jsxs("p",{className:"rounded-md border border-dashed border-gray-800 p-2 text-sm text-gray-600",children:["Team does not have any roadmaps yet."," ",f&&e.jsx("button",{className:"text-gray-500 underline underline-offset-2 hover:text-gray-400",onClick:()=>{h(m?.id),c(!0)},children:"Create one!"})]}),u.length>0&&e.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-2 md:grid-cols-3",children:[u.map(d=>e.jsx(v,{resourceId:d.resourceId,resourceType:"roadmap",resourceTitle:d.resourceTitle,percentageDone:(d.skipped+d.done)/d.total*100,url:`/r?id=${d.resourceId}`,allowFavorite:!1},d.resourceId)),f&&e.jsx(b,{teamId:m?.id,text:"Create Team Roadmap"})]})]},r)})]})}function P(a){a.forEach(s=>{const o=s.resourceType==="best-practice"?`/best-practices/${s.resourceId}`:`/${s.resourceId}`,n=document.querySelector(`a[href="${o}"]`);if(!n)return;window.dispatchEvent(new CustomEvent("mark-favorite",{detail:{resourceId:s.resourceId,resourceType:s.resourceType,isFavorite:s.isFavorite}}));const i=(s.done+s.skipped)/s.total*100,c=n.querySelector("[data-progress]");c&&(c.style.width=`${i}%`)})}function ae(){if(!S())return null;const[s,o]=p.useState(!0),[n,l]=p.useState(!0),[i,c]=p.useState([]),[x,h]=p.useState(0);function r(){const t=document.getElementById("hero-text");t&&(t.classList.add("opacity-0"),setTimeout(()=>{t.parentElement?.removeChild(t),o(!1),setTimeout(()=>{h(100)},50)},0))}async function m(){l(!0);const{response:t,error:g}=await w("https://api.roadmap.sh/v1-get-hero-roadmaps");g||!t||(c(t),l(!1),r(),P(t))}if(p.useEffect(()=>{m().finally(()=>{l(!1)})},[]),p.useEffect(()=>(window.addEventListener("refresh-favorites",m),()=>window.removeEventListener("refresh-favorites",m)),[]),s)return null;const u=i?.length>0,f=i?.filter(t=>t.isCustomResource&&!t.team?.name),d=i?.filter(t=>!t.isCustomResource),I=i?.filter(t=>t.isCustomResource&&t.team?.name).reduce((t,g)=>{const j=g.team;return t[j.name]||(t[j.name]=[]),t[j.name].push(g),t},{});return e.jsx("div",{className:`transition-opacity duration-500  opacity-${x}`,children:e.jsx("div",{className:`flex min-h-[192px] bg-gradient-to-b sm:min-h-[280px] ${u&&"border-t border-t-[#1e293c]"}`,children:e.jsxs("div",{className:"container min-h-full",children:[!n&&i?.length==0&&e.jsx(k,{}),u&&e.jsx(R,{teamRoadmaps:I,customRoadmaps:f,progress:d,isLoading:n})]})})})}export{ae as FavoriteRoadmaps};
