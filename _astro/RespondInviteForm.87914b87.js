import{j as e}from"./jsx-runtime.6940b965.js";import{r as l}from"./index.070054a4.js";import{a as h,d as f}from"./http.2919396c.js";import{p as o}from"./page.2efb91d4.js";import{i as w}from"./jwt.5556697d.js";import{s as b}from"./popup.a359f713.js";import{g as v}from"./browser.6245b9a5.js";import"./index.4b590221.js";const j=new Proxy({src:"/_astro/building.cba30bfd.svg",width:24,height:24,format:"svg"},{get(t,r,a){return r==="clone"?structuredClone(t):(globalThis.astroAsset.referencedImages.add(t.fsPath),t[r])}}),y=new Proxy({src:"/_astro/error.985c5c63.svg",width:512,height:512,format:"svg"},{get(t,r,a){return r==="clone"?structuredClone(t):(globalThis.astroAsset.referencedImages.add(t.fsPath),t[r])}});function k(){const{i:t}=v(),[r,a]=l.useState(!0),[d,i]=l.useState(""),[m,x]=l.useState(),p=w();async function u(c){const{response:s,error:n}=await h(`https://api.roadmap.sh/v1-get-invitation/${c}`);if(n||!s){i(n?.message||"Something went wrong");return}x(s)}l.useEffect(()=>{t?u(t).finally(()=>{o.set(""),a(!1)}):(a(!1),i("Missing invite ID in URL"),o.set(""))},[t]);async function g(c){o.set("Please wait..."),i("");const{response:s,error:n}=await f(`https://api.roadmap.sh/v1-respond-invite/${t}`,{status:c});if(n||!s){i(n?.message||"Something went wrong");return}if(c==="reject"){window.location.href="/";return}window.location.href=`/team/progress?t=${s.teamId}`}return r?null:m?e.jsxs("div",{className:"container text-center",children:[e.jsx("img",{alt:"join team",src:j.src,className:"mx-auto mb-4 mt-24 w-20 opacity-20"}),e.jsx("h2",{className:"mb-1 text-2xl font-bold",children:"Join Team"}),e.jsxs("p",{className:"mb-3 text-base leading-6 text-gray-600",children:["You have been invited to join the team"," ",e.jsx("strong",{id:"team-name",children:m?.team?.name}),"."]}),!p&&e.jsx("div",{className:"mx-auto w-full duration-500 sm:max-w-md",children:e.jsx("div",{className:"flex w-full items-center gap-2",children:e.jsx("button",{onClick:()=>b(),"data-popup":"login-popup",type:"button",className:"flex-grow cursor-pointer rounded-lg bg-gray-200 px-3 py-2 text-center",children:"Login to respond"})})}),p&&e.jsxs("div",{className:"mx-auto w-full max-w-md",children:[e.jsxs("div",{className:"flex w-full items-center gap-2",children:[e.jsx("button",{type:"button",onClick:()=>g("accept").finally(()=>{o.set("")}),className:"flex-grow cursor-pointer rounded-lg bg-gray-200 px-3 py-2 text-center",children:"Accept"}),e.jsx("button",{type:"button",onClick:()=>g("reject").finally(()=>{o.set("")}),className:"flex-grow cursor-pointer rounded-lg bg-red-500 px-3 py-2 text-white disabled:opacity-40",children:"Reject"})]}),d&&e.jsx("p",{className:"mt-2 rounded-lg bg-red-100 p-2 text-red-700",children:d})]})]}):e.jsxs("div",{className:"container text-center",children:[e.jsx("img",{alt:"error",src:y.src,className:"mx-auto mb-4 mt-24 w-20 opacity-20"}),e.jsx("h2",{className:"mb-1 text-2xl font-bold",children:"Error"}),e.jsx("p",{className:"mb-4 text-base leading-6 text-gray-600",children:d||"There was a problem, please try again."}),e.jsx("div",{children:e.jsx("a",{href:"/",className:"flex-grow cursor-pointer rounded-lg bg-gray-200 px-3 py-2 text-center",children:"Back to home"})})]})}export{k as RespondInviteForm};
